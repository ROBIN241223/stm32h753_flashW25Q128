ARM GAS  /tmp/ccmcLKXV.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"quadspi.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.QSPI_CheckRange,"ax",%progbits
  17              		.align	1
  18              		.arch armv7e-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-d16
  24              	QSPI_CheckRange:
  25              	.LVL0:
  26              	.LFB149:
  27              		.file 1 "Core/Src/quadspi.c"
   1:Core/Src/quadspi.c **** /* USER CODE BEGIN Header */
   2:Core/Src/quadspi.c **** /**
   3:Core/Src/quadspi.c ****   ******************************************************************************
   4:Core/Src/quadspi.c ****   * @file    quadspi.c
   5:Core/Src/quadspi.c ****   * @brief   This file provides code for the configuration
   6:Core/Src/quadspi.c ****   *          of the QUADSPI instances.
   7:Core/Src/quadspi.c ****   ******************************************************************************
   8:Core/Src/quadspi.c ****   * @attention
   9:Core/Src/quadspi.c ****   *
  10:Core/Src/quadspi.c ****   * Copyright (c) 2025 STMicroelectronics.
  11:Core/Src/quadspi.c ****   * All rights reserved.
  12:Core/Src/quadspi.c ****   *
  13:Core/Src/quadspi.c ****   * This software is licensed under terms that can be found in the LICENSE file
  14:Core/Src/quadspi.c ****   * in the root directory of this software component.
  15:Core/Src/quadspi.c ****   * If no LICENSE file comes with this software, it is provided AS-IS.
  16:Core/Src/quadspi.c ****   *
  17:Core/Src/quadspi.c ****   ******************************************************************************
  18:Core/Src/quadspi.c ****   */
  19:Core/Src/quadspi.c **** /* USER CODE END Header */
  20:Core/Src/quadspi.c **** /* Includes ------------------------------------------------------------------*/
  21:Core/Src/quadspi.c **** #include "quadspi.h"
  22:Core/Src/quadspi.c **** 
  23:Core/Src/quadspi.c **** /* USER CODE BEGIN 0 */
  24:Core/Src/quadspi.c **** static uint8_t QSPI_WriteEnable(void);
  25:Core/Src/quadspi.c **** uint8_t QSPI_AutoPollingMemReady(void);
  26:Core/Src/quadspi.c **** static uint8_t QSPI_EnableMemoryMapped(void);
  27:Core/Src/quadspi.c **** static uint8_t QSPI_EraseSector(uint32_t address);
  28:Core/Src/quadspi.c **** static uint8_t QSPI_PageProgram(uint32_t address, const uint8_t *data, uint32_t length);
  29:Core/Src/quadspi.c **** void QSPI_FlashDemo(void); /* public demo (could be moved to user code) */
  30:Core/Src/quadspi.c **** void QSPI_IndirectModeDemo(void); /* public demo using Indirect Mode only */
  31:Core/Src/quadspi.c **** static uint8_t QSPI_SetQEBit(void);
ARM GAS  /tmp/ccmcLKXV.s 			page 2


  32:Core/Src/quadspi.c **** static uint8_t QSPI_EnableMemoryMappedQuad(void);
  33:Core/Src/quadspi.c **** static uint8_t QSPI_ReadStatusReg(uint8_t *sr1);
  34:Core/Src/quadspi.c **** static uint8_t QSPI_ReadStatusReg2(uint8_t *sr2); /* some Winbond parts have SR2 QE bit */
  35:Core/Src/quadspi.c **** static uint8_t QSPI_CheckRange(uint32_t address, uint32_t length);
  36:Core/Src/quadspi.c **** static uint8_t QSPI_ReadChunk(uint32_t address, uint8_t *data, uint32_t length);
  37:Core/Src/quadspi.c **** static uint8_t QSPI_EnsureQuadReady(void);
  38:Core/Src/quadspi.c **** static void     QSPI_CRC32_EnsureTable(void);
  39:Core/Src/quadspi.c **** static uint32_t QSPI_CRC32_Update(uint32_t crc, const uint8_t *data, uint32_t length);
  40:Core/Src/quadspi.c **** /* Track whether we entered memory-mapped mode and capture first word for debugging */
  41:Core/Src/quadspi.c **** static volatile uint8_t qspi_memory_mapped_entered = 0;
  42:Core/Src/quadspi.c **** static volatile uint32_t qspi_first_word = 0;
  43:Core/Src/quadspi.c **** static uint8_t qspi_qe_set = 0;
  44:Core/Src/quadspi.c **** static uint32_t qspi_crc32_table[256];
  45:Core/Src/quadspi.c **** static uint8_t qspi_crc32_table_ready = 0;
  46:Core/Src/quadspi.c **** static volatile uint8_t qspi_last_check_status = 0;
  47:Core/Src/quadspi.c **** 
  48:Core/Src/quadspi.c **** QSPI_HandleTypeDef hqspi;
  49:Core/Src/quadspi.c **** MDMA_HandleTypeDef hmdma_quadspi_fifo_th;
  50:Core/Src/quadspi.c **** 
  51:Core/Src/quadspi.c **** /* QUADSPI init function */
  52:Core/Src/quadspi.c **** void MX_QUADSPI_Init(void)
  53:Core/Src/quadspi.c **** {
  54:Core/Src/quadspi.c **** 
  55:Core/Src/quadspi.c ****   /* USER CODE BEGIN QUADSPI_Init 0 */
  56:Core/Src/quadspi.c **** 
  57:Core/Src/quadspi.c ****   /* USER CODE END QUADSPI_Init 0 */
  58:Core/Src/quadspi.c **** 
  59:Core/Src/quadspi.c ****   /* USER CODE BEGIN QUADSPI_Init 1 */
  60:Core/Src/quadspi.c **** 
  61:Core/Src/quadspi.c ****   /* USER CODE END QUADSPI_Init 1 */
  62:Core/Src/quadspi.c ****   hqspi.Instance = QUADSPI;
  63:Core/Src/quadspi.c ****   hqspi.Init.ClockPrescaler = 2;
  64:Core/Src/quadspi.c ****   hqspi.Init.FifoThreshold = 32;
  65:Core/Src/quadspi.c ****   hqspi.Init.SampleShifting = QSPI_SAMPLE_SHIFTING_NONE;
  66:Core/Src/quadspi.c ****   hqspi.Init.FlashSize = 23;
  67:Core/Src/quadspi.c ****   hqspi.Init.ChipSelectHighTime = QSPI_CS_HIGH_TIME_2_CYCLE;
  68:Core/Src/quadspi.c ****   hqspi.Init.ClockMode = QSPI_CLOCK_MODE_3;
  69:Core/Src/quadspi.c ****   hqspi.Init.FlashID = QSPI_FLASH_ID_1;
  70:Core/Src/quadspi.c ****   hqspi.Init.DualFlash = QSPI_DUALFLASH_DISABLE;
  71:Core/Src/quadspi.c ****   if (HAL_QSPI_Init(&hqspi) != HAL_OK)
  72:Core/Src/quadspi.c ****   {
  73:Core/Src/quadspi.c ****     Error_Handler();
  74:Core/Src/quadspi.c ****   }
  75:Core/Src/quadspi.c ****   /* USER CODE BEGIN QUADSPI_Init 2 */
  76:Core/Src/quadspi.c ****   /* Optional: verify external flash JEDEC ID & size */
  77:Core/Src/quadspi.c ****   qspi_last_check_status = QSPI_CheckFlashSize();
  78:Core/Src/quadspi.c ****   if (qspi_last_check_status != 0U) {
  79:Core/Src/quadspi.c ****     /* Size mismatch or ID read failure */
  80:Core/Src/quadspi.c ****     Error_Handler();
  81:Core/Src/quadspi.c ****   }
  82:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
  83:Core/Src/quadspi.c ****   if (QSPI_EnsureQuadReady() != 0) {
  84:Core/Src/quadspi.c ****     Error_Handler();
  85:Core/Src/quadspi.c ****   }
  86:Core/Src/quadspi.c **** #endif
  87:Core/Src/quadspi.c **** #if QSPI_ENABLE_XIP
  88:Core/Src/quadspi.c ****   /* Optional early pattern fill (only small region) */
ARM GAS  /tmp/ccmcLKXV.s 			page 3


  89:Core/Src/quadspi.c **** #if QSPI_ENABLE_PATTERN_FILL
  90:Core/Src/quadspi.c ****   QSPI_ProgramPatternIfBlank();
  91:Core/Src/quadspi.c **** #endif
  92:Core/Src/quadspi.c ****   if (
  93:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
  94:Core/Src/quadspi.c ****       QSPI_EnableMemoryMappedQuad() != 0
  95:Core/Src/quadspi.c **** #else
  96:Core/Src/quadspi.c ****       QSPI_EnableMemoryMapped() != 0
  97:Core/Src/quadspi.c **** #endif
  98:Core/Src/quadspi.c ****   ) {
  99:Core/Src/quadspi.c ****     Error_Handler();
 100:Core/Src/quadspi.c ****   }
 101:Core/Src/quadspi.c ****   else {
 102:Core/Src/quadspi.c ****     qspi_memory_mapped_entered = 1;
 103:Core/Src/quadspi.c ****     qspi_first_word = *(uint32_t*)0x90000000UL; /* capture for debugger */
 104:Core/Src/quadspi.c ****   }
 105:Core/Src/quadspi.c **** #endif
 106:Core/Src/quadspi.c **** 
 107:Core/Src/quadspi.c **** #if QSPI_ENABLE_DEMO
 108:Core/Src/quadspi.c ****   QSPI_FlashDemo();
 109:Core/Src/quadspi.c **** #endif
 110:Core/Src/quadspi.c **** 
 111:Core/Src/quadspi.c ****   /* USER CODE END QUADSPI_Init 2 */
 112:Core/Src/quadspi.c **** 
 113:Core/Src/quadspi.c **** }
 114:Core/Src/quadspi.c **** 
 115:Core/Src/quadspi.c **** void HAL_QSPI_MspInit(QSPI_HandleTypeDef* qspiHandle)
 116:Core/Src/quadspi.c **** {
 117:Core/Src/quadspi.c **** 
 118:Core/Src/quadspi.c ****   GPIO_InitTypeDef GPIO_InitStruct = {0};
 119:Core/Src/quadspi.c ****   RCC_PeriphCLKInitTypeDef PeriphClkInitStruct = {0};
 120:Core/Src/quadspi.c ****   if(qspiHandle->Instance==QUADSPI)
 121:Core/Src/quadspi.c ****   {
 122:Core/Src/quadspi.c ****   /* USER CODE BEGIN QUADSPI_MspInit 0 */
 123:Core/Src/quadspi.c **** 
 124:Core/Src/quadspi.c ****   /* USER CODE END QUADSPI_MspInit 0 */
 125:Core/Src/quadspi.c **** 
 126:Core/Src/quadspi.c ****   /** Initializes the peripherals clock
 127:Core/Src/quadspi.c ****   */
 128:Core/Src/quadspi.c ****     PeriphClkInitStruct.PeriphClockSelection = RCC_PERIPHCLK_QSPI;
 129:Core/Src/quadspi.c ****     PeriphClkInitStruct.QspiClockSelection = RCC_QSPICLKSOURCE_D1HCLK;
 130:Core/Src/quadspi.c ****     if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInitStruct) != HAL_OK)
 131:Core/Src/quadspi.c ****     {
 132:Core/Src/quadspi.c ****       Error_Handler();
 133:Core/Src/quadspi.c ****     }
 134:Core/Src/quadspi.c **** 
 135:Core/Src/quadspi.c ****     /* QUADSPI clock enable */
 136:Core/Src/quadspi.c ****     __HAL_RCC_QSPI_CLK_ENABLE();
 137:Core/Src/quadspi.c **** 
 138:Core/Src/quadspi.c ****     __HAL_RCC_GPIOE_CLK_ENABLE();
 139:Core/Src/quadspi.c ****     __HAL_RCC_GPIOG_CLK_ENABLE();
 140:Core/Src/quadspi.c ****     __HAL_RCC_GPIOF_CLK_ENABLE();
 141:Core/Src/quadspi.c ****     __HAL_RCC_GPIOD_CLK_ENABLE();
 142:Core/Src/quadspi.c ****     /**QUADSPI GPIO Configuration
 143:Core/Src/quadspi.c ****     PE2     ------> QUADSPI_BK1_IO2
 144:Core/Src/quadspi.c ****     PG6     ------> QUADSPI_BK1_NCS
 145:Core/Src/quadspi.c ****     PF10     ------> QUADSPI_CLK
ARM GAS  /tmp/ccmcLKXV.s 			page 4


 146:Core/Src/quadspi.c ****     PD13     ------> QUADSPI_BK1_IO3
 147:Core/Src/quadspi.c ****     PD12     ------> QUADSPI_BK1_IO1
 148:Core/Src/quadspi.c ****     PD11     ------> QUADSPI_BK1_IO0
 149:Core/Src/quadspi.c ****     */
 150:Core/Src/quadspi.c ****     GPIO_InitStruct.Pin = GPIO_PIN_2;
 151:Core/Src/quadspi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 152:Core/Src/quadspi.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 153:Core/Src/quadspi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 154:Core/Src/quadspi.c ****     GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
 155:Core/Src/quadspi.c ****     HAL_GPIO_Init(GPIOE, &GPIO_InitStruct);
 156:Core/Src/quadspi.c **** 
 157:Core/Src/quadspi.c ****     GPIO_InitStruct.Pin = GPIO_PIN_6;
 158:Core/Src/quadspi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 159:Core/Src/quadspi.c ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 160:Core/Src/quadspi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 161:Core/Src/quadspi.c ****     GPIO_InitStruct.Alternate = GPIO_AF10_QUADSPI;
 162:Core/Src/quadspi.c ****     HAL_GPIO_Init(GPIOG, &GPIO_InitStruct);
 163:Core/Src/quadspi.c **** 
 164:Core/Src/quadspi.c ****     GPIO_InitStruct.Pin = GPIO_PIN_10;
 165:Core/Src/quadspi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 166:Core/Src/quadspi.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 167:Core/Src/quadspi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 168:Core/Src/quadspi.c ****     GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
 169:Core/Src/quadspi.c ****     HAL_GPIO_Init(GPIOF, &GPIO_InitStruct);
 170:Core/Src/quadspi.c **** 
 171:Core/Src/quadspi.c ****     GPIO_InitStruct.Pin = GPIO_PIN_13|GPIO_PIN_12|GPIO_PIN_11;
 172:Core/Src/quadspi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 173:Core/Src/quadspi.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 174:Core/Src/quadspi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 175:Core/Src/quadspi.c ****     GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
 176:Core/Src/quadspi.c ****     HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);
 177:Core/Src/quadspi.c **** 
 178:Core/Src/quadspi.c ****     /* QUADSPI MDMA Init */
 179:Core/Src/quadspi.c ****     /* QUADSPI_FIFO_TH Init */
 180:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Instance = MDMA_Channel0;
 181:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.Request = MDMA_REQUEST_QUADSPI_FIFO_TH;
 182:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.TransferTriggerMode = MDMA_BUFFER_TRANSFER;
 183:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.Priority = MDMA_PRIORITY_LOW;
 184:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.Endianness = MDMA_LITTLE_ENDIANNESS_PRESERVE;
 185:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.SourceInc = MDMA_SRC_INC_BYTE;
 186:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DestinationInc = MDMA_DEST_INC_BYTE;
 187:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.SourceDataSize = MDMA_SRC_DATASIZE_BYTE;
 188:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DestDataSize = MDMA_DEST_DATASIZE_BYTE;
 189:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DataAlignment = MDMA_DATAALIGN_PACKENABLE;
 190:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.BufferTransferLength = 32;
 191:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.SourceBurst = MDMA_SOURCE_BURST_SINGLE;
 192:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DestBurst = MDMA_DEST_BURST_SINGLE;
 193:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.SourceBlockAddressOffset = 0;
 194:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DestBlockAddressOffset = 0;
 195:Core/Src/quadspi.c ****     if (HAL_MDMA_Init(&hmdma_quadspi_fifo_th) != HAL_OK)
 196:Core/Src/quadspi.c ****     {
 197:Core/Src/quadspi.c ****       Error_Handler();
 198:Core/Src/quadspi.c ****     }
 199:Core/Src/quadspi.c **** 
 200:Core/Src/quadspi.c ****     if (HAL_MDMA_ConfigPostRequestMask(&hmdma_quadspi_fifo_th, 0, 0) != HAL_OK)
 201:Core/Src/quadspi.c ****     {
 202:Core/Src/quadspi.c ****       Error_Handler();
ARM GAS  /tmp/ccmcLKXV.s 			page 5


 203:Core/Src/quadspi.c ****     }
 204:Core/Src/quadspi.c **** 
 205:Core/Src/quadspi.c ****     __HAL_LINKDMA(qspiHandle,hmdma,hmdma_quadspi_fifo_th);
 206:Core/Src/quadspi.c **** 
 207:Core/Src/quadspi.c ****   /* USER CODE BEGIN QUADSPI_MspInit 1 */
 208:Core/Src/quadspi.c **** 
 209:Core/Src/quadspi.c ****   /* USER CODE END QUADSPI_MspInit 1 */
 210:Core/Src/quadspi.c ****   }
 211:Core/Src/quadspi.c **** }
 212:Core/Src/quadspi.c **** 
 213:Core/Src/quadspi.c **** void HAL_QSPI_MspDeInit(QSPI_HandleTypeDef* qspiHandle)
 214:Core/Src/quadspi.c **** {
 215:Core/Src/quadspi.c **** 
 216:Core/Src/quadspi.c ****   if(qspiHandle->Instance==QUADSPI)
 217:Core/Src/quadspi.c ****   {
 218:Core/Src/quadspi.c ****   /* USER CODE BEGIN QUADSPI_MspDeInit 0 */
 219:Core/Src/quadspi.c **** 
 220:Core/Src/quadspi.c ****   /* USER CODE END QUADSPI_MspDeInit 0 */
 221:Core/Src/quadspi.c ****     /* Peripheral clock disable */
 222:Core/Src/quadspi.c ****     __HAL_RCC_QSPI_CLK_DISABLE();
 223:Core/Src/quadspi.c **** 
 224:Core/Src/quadspi.c ****     /**QUADSPI GPIO Configuration
 225:Core/Src/quadspi.c ****     PE2     ------> QUADSPI_BK1_IO2
 226:Core/Src/quadspi.c ****     PG6     ------> QUADSPI_BK1_NCS
 227:Core/Src/quadspi.c ****     PF10     ------> QUADSPI_CLK
 228:Core/Src/quadspi.c ****     PD13     ------> QUADSPI_BK1_IO3
 229:Core/Src/quadspi.c ****     PD12     ------> QUADSPI_BK1_IO1
 230:Core/Src/quadspi.c ****     PD11     ------> QUADSPI_BK1_IO0
 231:Core/Src/quadspi.c ****     */
 232:Core/Src/quadspi.c ****     HAL_GPIO_DeInit(GPIOE, GPIO_PIN_2);
 233:Core/Src/quadspi.c **** 
 234:Core/Src/quadspi.c ****     HAL_GPIO_DeInit(GPIOG, GPIO_PIN_6);
 235:Core/Src/quadspi.c **** 
 236:Core/Src/quadspi.c ****     HAL_GPIO_DeInit(GPIOF, GPIO_PIN_10);
 237:Core/Src/quadspi.c **** 
 238:Core/Src/quadspi.c ****     HAL_GPIO_DeInit(GPIOD, GPIO_PIN_13|GPIO_PIN_12|GPIO_PIN_11);
 239:Core/Src/quadspi.c **** 
 240:Core/Src/quadspi.c ****     /* QUADSPI MDMA DeInit */
 241:Core/Src/quadspi.c ****     HAL_MDMA_DeInit(qspiHandle->hmdma);
 242:Core/Src/quadspi.c ****   /* USER CODE BEGIN QUADSPI_MspDeInit 1 */
 243:Core/Src/quadspi.c **** 
 244:Core/Src/quadspi.c ****   /* USER CODE END QUADSPI_MspDeInit 1 */
 245:Core/Src/quadspi.c ****   }
 246:Core/Src/quadspi.c **** }
 247:Core/Src/quadspi.c **** 
 248:Core/Src/quadspi.c **** /* USER CODE BEGIN 1 */
 249:Core/Src/quadspi.c **** /* Low-level helpers ------------------------------------------------------- */
 250:Core/Src/quadspi.c **** static uint8_t QSPI_WaitWhileBusy(uint32_t timeout)
 251:Core/Src/quadspi.c **** {
 252:Core/Src/quadspi.c ****   QSPI_CommandTypeDef sCommand = {0};
 253:Core/Src/quadspi.c ****   QSPI_AutoPollingTypeDef sConfig = {0};
 254:Core/Src/quadspi.c ****   sCommand.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 255:Core/Src/quadspi.c ****   sCommand.Instruction = W25Q128_CMD_READ_STATUS_REG;
 256:Core/Src/quadspi.c ****   sCommand.AddressMode = QSPI_ADDRESS_NONE;
 257:Core/Src/quadspi.c ****   sCommand.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 258:Core/Src/quadspi.c ****   sCommand.DataMode = QSPI_DATA_1_LINE;
 259:Core/Src/quadspi.c ****   sCommand.DummyCycles = 0;
ARM GAS  /tmp/ccmcLKXV.s 			page 6


 260:Core/Src/quadspi.c ****   sConfig.Match = 0x00; /* WIP=0 */
 261:Core/Src/quadspi.c ****   sConfig.Mask = 0x01;  /* WIP bit */
 262:Core/Src/quadspi.c ****   sConfig.MatchMode = QSPI_MATCH_MODE_AND;
 263:Core/Src/quadspi.c ****   sConfig.StatusBytesSize = 1;
 264:Core/Src/quadspi.c ****   sConfig.Interval = 0x10;
 265:Core/Src/quadspi.c ****   sConfig.AutomaticStop = QSPI_AUTOMATIC_STOP_ENABLE;
 266:Core/Src/quadspi.c ****   if (HAL_QSPI_AutoPolling(&hqspi, &sCommand, &sConfig, timeout) != HAL_OK)
 267:Core/Src/quadspi.c ****     return 1;
 268:Core/Src/quadspi.c ****   return 0;
 269:Core/Src/quadspi.c **** }
 270:Core/Src/quadspi.c **** 
 271:Core/Src/quadspi.c **** static uint8_t QSPI_WriteEnable(void)
 272:Core/Src/quadspi.c **** {
 273:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 274:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 275:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_WRITE_ENABLE;
 276:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_NONE;
 277:Core/Src/quadspi.c ****   cmd.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 278:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_NONE;
 279:Core/Src/quadspi.c ****   cmd.DummyCycles = 0;
 280:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 1;
 281:Core/Src/quadspi.c ****   return 0;
 282:Core/Src/quadspi.c **** }
 283:Core/Src/quadspi.c **** 
 284:Core/Src/quadspi.c **** static uint8_t QSPI_CheckRange(uint32_t address, uint32_t length)
 285:Core/Src/quadspi.c **** {
  28              		.loc 1 285 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
 286:Core/Src/quadspi.c ****   if (length == 0) return 0;
  33              		.loc 1 286 3 view .LVU1
  34              		.loc 1 286 6 is_stmt 0 view .LVU2
  35 0000 41B1     		cbz	r1, .L3
 287:Core/Src/quadspi.c ****   if (address >= MEMORY_FLASH_SIZE) return 1;
  36              		.loc 1 287 3 is_stmt 1 view .LVU3
  37              		.loc 1 287 6 is_stmt 0 view .LVU4
  38 0002 B0F1807F 		cmp	r0, #16777216
  39 0006 07D2     		bcs	.L4
 288:Core/Src/quadspi.c ****   if (length > (MEMORY_FLASH_SIZE - address)) return 1;
  40              		.loc 1 288 3 is_stmt 1 view .LVU5
  41              		.loc 1 288 35 is_stmt 0 view .LVU6
  42 0008 C0F18070 		rsb	r0, r0, #16777216
  43              	.LVL1:
  44              		.loc 1 288 6 view .LVU7
  45 000c 8842     		cmp	r0, r1
  46 000e 05D3     		bcc	.L5
 289:Core/Src/quadspi.c ****   return 0;
  47              		.loc 1 289 10 view .LVU8
  48 0010 0020     		movs	r0, #0
  49 0012 7047     		bx	lr
  50              	.LVL2:
  51              	.L3:
 286:Core/Src/quadspi.c ****   if (address >= MEMORY_FLASH_SIZE) return 1;
  52              		.loc 1 286 27 view .LVU9
  53 0014 0020     		movs	r0, #0
ARM GAS  /tmp/ccmcLKXV.s 			page 7


  54              	.LVL3:
 286:Core/Src/quadspi.c ****   if (address >= MEMORY_FLASH_SIZE) return 1;
  55              		.loc 1 286 27 view .LVU10
  56 0016 7047     		bx	lr
  57              	.LVL4:
  58              	.L4:
 287:Core/Src/quadspi.c ****   if (length > (MEMORY_FLASH_SIZE - address)) return 1;
  59              		.loc 1 287 44 view .LVU11
  60 0018 0120     		movs	r0, #1
  61              	.LVL5:
 287:Core/Src/quadspi.c ****   if (length > (MEMORY_FLASH_SIZE - address)) return 1;
  62              		.loc 1 287 44 view .LVU12
  63 001a 7047     		bx	lr
  64              	.L5:
 288:Core/Src/quadspi.c ****   return 0;
  65              		.loc 1 288 54 view .LVU13
  66 001c 0120     		movs	r0, #1
 290:Core/Src/quadspi.c **** }
  67              		.loc 1 290 1 view .LVU14
  68 001e 7047     		bx	lr
  69              		.cfi_endproc
  70              	.LFE149:
  72              		.section	.text.QSPI_CRC32_EnsureTable,"ax",%progbits
  73              		.align	1
  74              		.syntax unified
  75              		.thumb
  76              		.thumb_func
  77              		.fpu fpv5-d16
  79              	QSPI_CRC32_EnsureTable:
  80              	.LFB152:
 291:Core/Src/quadspi.c **** 
 292:Core/Src/quadspi.c **** static uint8_t QSPI_EnsureQuadReady(void)
 293:Core/Src/quadspi.c **** {
 294:Core/Src/quadspi.c **** #if !QSPI_ENABLE_QUAD
 295:Core/Src/quadspi.c ****   return 0;
 296:Core/Src/quadspi.c **** #else
 297:Core/Src/quadspi.c ****   if (!qspi_qe_set) {
 298:Core/Src/quadspi.c ****     if (QSPI_SetQEBit()) return 1;
 299:Core/Src/quadspi.c ****   }
 300:Core/Src/quadspi.c ****   return 0;
 301:Core/Src/quadspi.c **** #endif
 302:Core/Src/quadspi.c **** }
 303:Core/Src/quadspi.c **** 
 304:Core/Src/quadspi.c **** static uint8_t QSPI_ReadChunk(uint32_t address, uint8_t *data, uint32_t length)
 305:Core/Src/quadspi.c **** {
 306:Core/Src/quadspi.c ****   if (length == 0) return 0;
 307:Core/Src/quadspi.c ****   if (!data) return 1;
 308:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
 309:Core/Src/quadspi.c ****   if (QSPI_EnsureQuadReady()) return 2;
 310:Core/Src/quadspi.c **** #endif
 311:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 312:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 313:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
 314:Core/Src/quadspi.c ****   cmd.Instruction = 0x6B; /* Fast Read Quad Output */
 315:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_4_LINES;
 316:Core/Src/quadspi.c ****   cmd.DummyCycles = QSPI_QUAD_DUMMY_CYCLES;
 317:Core/Src/quadspi.c **** #else
ARM GAS  /tmp/ccmcLKXV.s 			page 8


 318:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_READ_DATA;
 319:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_1_LINE;
 320:Core/Src/quadspi.c ****   cmd.DummyCycles = 0;
 321:Core/Src/quadspi.c **** #endif
 322:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_1_LINE;
 323:Core/Src/quadspi.c ****   cmd.AddressSize = QSPI_ADDRESS_24_BITS;
 324:Core/Src/quadspi.c ****   cmd.Address = address;
 325:Core/Src/quadspi.c ****   cmd.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 326:Core/Src/quadspi.c ****   cmd.DdrMode = QSPI_DDR_MODE_DISABLE;
 327:Core/Src/quadspi.c ****   cmd.DdrHoldHalfCycle = QSPI_DDR_HHC_ANALOG_DELAY;
 328:Core/Src/quadspi.c ****   cmd.SIOOMode = QSPI_SIOO_INST_EVERY_CMD;
 329:Core/Src/quadspi.c ****   cmd.NbData = length;
 330:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 3;
 331:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, data, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 4;
 332:Core/Src/quadspi.c ****   return 0;
 333:Core/Src/quadspi.c **** }
 334:Core/Src/quadspi.c **** 
 335:Core/Src/quadspi.c **** static void QSPI_CRC32_EnsureTable(void)
 336:Core/Src/quadspi.c **** {
  81              		.loc 1 336 1 is_stmt 1 view -0
  82              		.cfi_startproc
  83              		@ args = 0, pretend = 0, frame = 0
  84              		@ frame_needed = 0, uses_anonymous_args = 0
  85              		@ link register save eliminated.
 337:Core/Src/quadspi.c ****   if (qspi_crc32_table_ready) return;
  86              		.loc 1 337 3 view .LVU16
  87              		.loc 1 337 7 is_stmt 0 view .LVU17
  88 0000 0E4B     		ldr	r3, .L16
  89 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  90              		.loc 1 337 6 view .LVU18
  91 0004 C3B9     		cbnz	r3, .L6
  92              	.LBB2:
 338:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < 256U; ++i) {
  93              		.loc 1 338 17 view .LVU19
  94 0006 0020     		movs	r0, #0
  95 0008 0EE0     		b	.L8
  96              	.LVL6:
  97              	.L9:
  98              	.LBB3:
  99              	.LBB4:
 339:Core/Src/quadspi.c ****     uint32_t crc = i;
 340:Core/Src/quadspi.c ****     for (uint32_t bit = 0; bit < 8U; ++bit) {
 341:Core/Src/quadspi.c ****       if (crc & 1U) crc = (crc >> 1) ^ 0xEDB88320UL;
 342:Core/Src/quadspi.c ****       else crc >>= 1;
 100              		.loc 1 342 12 is_stmt 1 view .LVU20
 101              		.loc 1 342 16 is_stmt 0 view .LVU21
 102 000a 5208     		lsrs	r2, r2, #1
 103              	.LVL7:
 104              	.L10:
 340:Core/Src/quadspi.c ****       if (crc & 1U) crc = (crc >> 1) ^ 0xEDB88320UL;
 105              		.loc 1 340 38 is_stmt 1 discriminator 2 view .LVU22
 106 000c 0133     		adds	r3, r3, #1
 107              	.LVL8:
 108              	.L12:
 340:Core/Src/quadspi.c ****       if (crc & 1U) crc = (crc >> 1) ^ 0xEDB88320UL;
 109              		.loc 1 340 28 discriminator 1 view .LVU23
 340:Core/Src/quadspi.c ****       if (crc & 1U) crc = (crc >> 1) ^ 0xEDB88320UL;
ARM GAS  /tmp/ccmcLKXV.s 			page 9


 110              		.loc 1 340 5 is_stmt 0 discriminator 1 view .LVU24
 111 000e 072B     		cmp	r3, #7
 112 0010 06D8     		bhi	.L14
 341:Core/Src/quadspi.c ****       else crc >>= 1;
 113              		.loc 1 341 7 is_stmt 1 view .LVU25
 341:Core/Src/quadspi.c ****       else crc >>= 1;
 114              		.loc 1 341 10 is_stmt 0 view .LVU26
 115 0012 12F0010F 		tst	r2, #1
 116 0016 F8D0     		beq	.L9
 341:Core/Src/quadspi.c ****       else crc >>= 1;
 117              		.loc 1 341 21 is_stmt 1 discriminator 1 view .LVU27
 341:Core/Src/quadspi.c ****       else crc >>= 1;
 118              		.loc 1 341 25 is_stmt 0 discriminator 1 view .LVU28
 119 0018 0949     		ldr	r1, .L16+4
 120 001a 81EA5202 		eor	r2, r1, r2, lsr #1
 121              	.LVL9:
 341:Core/Src/quadspi.c ****       else crc >>= 1;
 122              		.loc 1 341 25 discriminator 1 view .LVU29
 123 001e F5E7     		b	.L10
 124              	.L14:
 341:Core/Src/quadspi.c ****       else crc >>= 1;
 125              		.loc 1 341 25 discriminator 1 view .LVU30
 126              	.LBE4:
 343:Core/Src/quadspi.c ****     }
 344:Core/Src/quadspi.c ****     qspi_crc32_table[i] = crc;
 127              		.loc 1 344 5 is_stmt 1 discriminator 2 view .LVU31
 128              		.loc 1 344 25 is_stmt 0 discriminator 2 view .LVU32
 129 0020 084B     		ldr	r3, .L16+8
 130              	.LVL10:
 131              		.loc 1 344 25 discriminator 2 view .LVU33
 132 0022 43F82020 		str	r2, [r3, r0, lsl #2]
 133              	.LBE3:
 338:Core/Src/quadspi.c ****     uint32_t crc = i;
 134              		.loc 1 338 34 is_stmt 1 discriminator 2 view .LVU34
 135 0026 0130     		adds	r0, r0, #1
 136              	.LVL11:
 137              	.L8:
 338:Core/Src/quadspi.c ****     uint32_t crc = i;
 138              		.loc 1 338 24 discriminator 1 view .LVU35
 338:Core/Src/quadspi.c ****     uint32_t crc = i;
 139              		.loc 1 338 3 is_stmt 0 discriminator 1 view .LVU36
 140 0028 FF28     		cmp	r0, #255
 141 002a 02D8     		bhi	.L15
 142              	.LBB6:
 339:Core/Src/quadspi.c ****     for (uint32_t bit = 0; bit < 8U; ++bit) {
 143              		.loc 1 339 14 view .LVU37
 144 002c 0246     		mov	r2, r0
 145              	.LBB5:
 340:Core/Src/quadspi.c ****       if (crc & 1U) crc = (crc >> 1) ^ 0xEDB88320UL;
 146              		.loc 1 340 19 view .LVU38
 147 002e 0023     		movs	r3, #0
 148 0030 EDE7     		b	.L12
 149              	.L15:
 340:Core/Src/quadspi.c ****       if (crc & 1U) crc = (crc >> 1) ^ 0xEDB88320UL;
 150              		.loc 1 340 19 view .LVU39
 151              	.LBE5:
 152              	.LBE6:
ARM GAS  /tmp/ccmcLKXV.s 			page 10


 153              	.LBE2:
 345:Core/Src/quadspi.c ****   }
 346:Core/Src/quadspi.c ****   qspi_crc32_table_ready = 1;
 154              		.loc 1 346 3 is_stmt 1 view .LVU40
 155              		.loc 1 346 26 is_stmt 0 view .LVU41
 156 0032 024B     		ldr	r3, .L16
 157 0034 0122     		movs	r2, #1
 158 0036 1A70     		strb	r2, [r3]
 159              	.LVL12:
 160              	.L6:
 347:Core/Src/quadspi.c **** }
 161              		.loc 1 347 1 view .LVU42
 162 0038 7047     		bx	lr
 163              	.L17:
 164 003a 00BF     		.align	2
 165              	.L16:
 166 003c 00000000 		.word	.LANCHOR0
 167 0040 2083B8ED 		.word	-306674912
 168 0044 00000000 		.word	.LANCHOR1
 169              		.cfi_endproc
 170              	.LFE152:
 172              		.section	.text.QSPI_CRC32_Update,"ax",%progbits
 173              		.align	1
 174              		.syntax unified
 175              		.thumb
 176              		.thumb_func
 177              		.fpu fpv5-d16
 179              	QSPI_CRC32_Update:
 180              	.LVL13:
 181              	.LFB153:
 348:Core/Src/quadspi.c **** 
 349:Core/Src/quadspi.c **** static uint32_t QSPI_CRC32_Update(uint32_t crc, const uint8_t *data, uint32_t length)
 350:Core/Src/quadspi.c **** {
 182              		.loc 1 350 1 is_stmt 1 view -0
 183              		.cfi_startproc
 184              		@ args = 0, pretend = 0, frame = 0
 185              		@ frame_needed = 0, uses_anonymous_args = 0
 351:Core/Src/quadspi.c ****   if (!data || length == 0) return crc;
 186              		.loc 1 351 3 view .LVU44
 187              		.loc 1 351 6 is_stmt 0 view .LVU45
 188 0000 002A     		cmp	r2, #0
 189 0002 18BF     		it	ne
 190 0004 0029     		cmpne	r1, #0
 191 0006 12D0     		beq	.L23
 350:Core/Src/quadspi.c ****   if (!data || length == 0) return crc;
 192              		.loc 1 350 1 view .LVU46
 193 0008 00B5     		push	{lr}
 194              	.LCFI0:
 195              		.cfi_def_cfa_offset 4
 196              		.cfi_offset 14, -4
 197 000a 8E46     		mov	lr, r1
 198 000c 9446     		mov	ip, r2
 199              	.LBB7:
 352:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < length; ++i) {
 200              		.loc 1 352 17 view .LVU47
 201 000e 0023     		movs	r3, #0
 202 0010 09E0     		b	.L20
ARM GAS  /tmp/ccmcLKXV.s 			page 11


 203              	.LVL14:
 204              	.L21:
 205              	.LBB8:
 353:Core/Src/quadspi.c ****     uint8_t idx = (uint8_t)((crc ^ data[i]) & 0xFFU);
 206              		.loc 1 353 5 is_stmt 1 discriminator 3 view .LVU48
 207              		.loc 1 353 19 is_stmt 0 discriminator 3 view .LVU49
 208 0012 C2B2     		uxtb	r2, r0
 209              		.loc 1 353 40 discriminator 3 view .LVU50
 210 0014 1EF80310 		ldrb	r1, [lr, r3]	@ zero_extendqisi2
 211              		.loc 1 353 13 discriminator 3 view .LVU51
 212 0018 4A40     		eors	r2, r2, r1
 213              	.LVL15:
 354:Core/Src/quadspi.c ****     crc = (crc >> 8) ^ qspi_crc32_table[idx];
 214              		.loc 1 354 5 is_stmt 1 discriminator 3 view .LVU52
 215              		.loc 1 354 40 is_stmt 0 discriminator 3 view .LVU53
 216 001a 0549     		ldr	r1, .L26
 217 001c 51F82220 		ldr	r2, [r1, r2, lsl #2]
 218              	.LVL16:
 219              		.loc 1 354 9 discriminator 3 view .LVU54
 220 0020 82EA1020 		eor	r0, r2, r0, lsr #8
 221              	.LVL17:
 222              		.loc 1 354 9 discriminator 3 view .LVU55
 223              	.LBE8:
 352:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < length; ++i) {
 224              		.loc 1 352 36 is_stmt 1 discriminator 3 view .LVU56
 225 0024 0133     		adds	r3, r3, #1
 226              	.LVL18:
 227              	.L20:
 352:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < length; ++i) {
 228              		.loc 1 352 24 discriminator 1 view .LVU57
 352:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < length; ++i) {
 229              		.loc 1 352 3 is_stmt 0 discriminator 1 view .LVU58
 230 0026 6345     		cmp	r3, ip
 231 0028 F3D3     		bcc	.L21
 352:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < length; ++i) {
 232              		.loc 1 352 3 discriminator 1 view .LVU59
 233              	.LBE7:
 355:Core/Src/quadspi.c ****   }
 356:Core/Src/quadspi.c ****   return crc;
 357:Core/Src/quadspi.c **** }
 234              		.loc 1 357 1 view .LVU60
 235 002a 5DF804FB 		ldr	pc, [sp], #4
 236              	.LVL19:
 237              	.L23:
 238              	.LCFI1:
 239              		.cfi_def_cfa_offset 0
 240              		.cfi_restore 14
 241              		.loc 1 357 1 view .LVU61
 242 002e 7047     		bx	lr
 243              	.L27:
 244              		.align	2
 245              	.L26:
 246 0030 00000000 		.word	.LANCHOR1
 247              		.cfi_endproc
 248              	.LFE153:
 250              		.section	.text.QSPI_WriteEnable,"ax",%progbits
 251              		.align	1
ARM GAS  /tmp/ccmcLKXV.s 			page 12


 252              		.syntax unified
 253              		.thumb
 254              		.thumb_func
 255              		.fpu fpv5-d16
 257              	QSPI_WriteEnable:
 258              	.LFB148:
 272:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 259              		.loc 1 272 1 is_stmt 1 view -0
 260              		.cfi_startproc
 261              		@ args = 0, pretend = 0, frame = 56
 262              		@ frame_needed = 0, uses_anonymous_args = 0
 263 0000 00B5     		push	{lr}
 264              	.LCFI2:
 265              		.cfi_def_cfa_offset 4
 266              		.cfi_offset 14, -4
 267 0002 8FB0     		sub	sp, sp, #60
 268              	.LCFI3:
 269              		.cfi_def_cfa_offset 64
 273:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 270              		.loc 1 273 3 view .LVU63
 273:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 271              		.loc 1 273 23 is_stmt 0 view .LVU64
 272 0004 3822     		movs	r2, #56
 273 0006 0021     		movs	r1, #0
 274 0008 6846     		mov	r0, sp
 275 000a FFF7FEFF 		bl	memset
 276              	.LVL20:
 274:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_WRITE_ENABLE;
 277              		.loc 1 274 3 is_stmt 1 view .LVU65
 274:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_WRITE_ENABLE;
 278              		.loc 1 274 23 is_stmt 0 view .LVU66
 279 000e 4FF48073 		mov	r3, #256
 280 0012 0693     		str	r3, [sp, #24]
 275:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_NONE;
 281              		.loc 1 275 3 is_stmt 1 view .LVU67
 275:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_NONE;
 282              		.loc 1 275 19 is_stmt 0 view .LVU68
 283 0014 0623     		movs	r3, #6
 284 0016 0093     		str	r3, [sp]
 276:Core/Src/quadspi.c ****   cmd.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 285              		.loc 1 276 3 is_stmt 1 view .LVU69
 277:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_NONE;
 286              		.loc 1 277 3 view .LVU70
 278:Core/Src/quadspi.c ****   cmd.DummyCycles = 0;
 287              		.loc 1 278 3 view .LVU71
 279:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 1;
 288              		.loc 1 279 3 view .LVU72
 280:Core/Src/quadspi.c ****   return 0;
 289              		.loc 1 280 3 view .LVU73
 280:Core/Src/quadspi.c ****   return 0;
 290              		.loc 1 280 7 is_stmt 0 view .LVU74
 291 0018 41F28832 		movw	r2, #5000
 292 001c 6946     		mov	r1, sp
 293 001e 0448     		ldr	r0, .L33
 294 0020 FFF7FEFF 		bl	HAL_QSPI_Command
 295              	.LVL21:
 280:Core/Src/quadspi.c ****   return 0;
ARM GAS  /tmp/ccmcLKXV.s 			page 13


 296              		.loc 1 280 6 view .LVU75
 297 0024 10B9     		cbnz	r0, .L32
 298              	.L29:
 282:Core/Src/quadspi.c **** 
 299              		.loc 1 282 1 view .LVU76
 300 0026 0FB0     		add	sp, sp, #60
 301              	.LCFI4:
 302              		.cfi_remember_state
 303              		.cfi_def_cfa_offset 4
 304              		@ sp needed
 305 0028 5DF804FB 		ldr	pc, [sp], #4
 306              	.L32:
 307              	.LCFI5:
 308              		.cfi_restore_state
 280:Core/Src/quadspi.c ****   return 0;
 309              		.loc 1 280 88 view .LVU77
 310 002c 0120     		movs	r0, #1
 311 002e FAE7     		b	.L29
 312              	.L34:
 313              		.align	2
 314              	.L33:
 315 0030 00000000 		.word	.LANCHOR2
 316              		.cfi_endproc
 317              	.LFE148:
 319              		.section	.text.QSPI_WaitWhileBusy,"ax",%progbits
 320              		.align	1
 321              		.syntax unified
 322              		.thumb
 323              		.thumb_func
 324              		.fpu fpv5-d16
 326              	QSPI_WaitWhileBusy:
 327              	.LVL22:
 328              	.LFB147:
 251:Core/Src/quadspi.c ****   QSPI_CommandTypeDef sCommand = {0};
 329              		.loc 1 251 1 is_stmt 1 view -0
 330              		.cfi_startproc
 331              		@ args = 0, pretend = 0, frame = 80
 332              		@ frame_needed = 0, uses_anonymous_args = 0
 251:Core/Src/quadspi.c ****   QSPI_CommandTypeDef sCommand = {0};
 333              		.loc 1 251 1 is_stmt 0 view .LVU79
 334 0000 10B5     		push	{r4, lr}
 335              	.LCFI6:
 336              		.cfi_def_cfa_offset 8
 337              		.cfi_offset 4, -8
 338              		.cfi_offset 14, -4
 339 0002 94B0     		sub	sp, sp, #80
 340              	.LCFI7:
 341              		.cfi_def_cfa_offset 88
 342 0004 0446     		mov	r4, r0
 252:Core/Src/quadspi.c ****   QSPI_AutoPollingTypeDef sConfig = {0};
 343              		.loc 1 252 3 is_stmt 1 view .LVU80
 252:Core/Src/quadspi.c ****   QSPI_AutoPollingTypeDef sConfig = {0};
 344              		.loc 1 252 23 is_stmt 0 view .LVU81
 345 0006 3822     		movs	r2, #56
 346 0008 0021     		movs	r1, #0
 347 000a 06A8     		add	r0, sp, #24
 348              	.LVL23:
ARM GAS  /tmp/ccmcLKXV.s 			page 14


 252:Core/Src/quadspi.c ****   QSPI_AutoPollingTypeDef sConfig = {0};
 349              		.loc 1 252 23 view .LVU82
 350 000c FFF7FEFF 		bl	memset
 351              	.LVL24:
 253:Core/Src/quadspi.c ****   sCommand.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 352              		.loc 1 253 3 is_stmt 1 view .LVU83
 253:Core/Src/quadspi.c ****   sCommand.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 353              		.loc 1 253 27 is_stmt 0 view .LVU84
 354 0010 0022     		movs	r2, #0
 355 0012 0092     		str	r2, [sp]
 356 0014 0192     		str	r2, [sp, #4]
 357 0016 0292     		str	r2, [sp, #8]
 358 0018 0392     		str	r2, [sp, #12]
 359 001a 0492     		str	r2, [sp, #16]
 360 001c 0592     		str	r2, [sp, #20]
 254:Core/Src/quadspi.c ****   sCommand.Instruction = W25Q128_CMD_READ_STATUS_REG;
 361              		.loc 1 254 3 is_stmt 1 view .LVU85
 254:Core/Src/quadspi.c ****   sCommand.Instruction = W25Q128_CMD_READ_STATUS_REG;
 362              		.loc 1 254 28 is_stmt 0 view .LVU86
 363 001e 4FF48073 		mov	r3, #256
 364 0022 0C93     		str	r3, [sp, #48]
 255:Core/Src/quadspi.c ****   sCommand.AddressMode = QSPI_ADDRESS_NONE;
 365              		.loc 1 255 3 is_stmt 1 view .LVU87
 255:Core/Src/quadspi.c ****   sCommand.AddressMode = QSPI_ADDRESS_NONE;
 366              		.loc 1 255 24 is_stmt 0 view .LVU88
 367 0024 0523     		movs	r3, #5
 368 0026 0693     		str	r3, [sp, #24]
 256:Core/Src/quadspi.c ****   sCommand.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 369              		.loc 1 256 3 is_stmt 1 view .LVU89
 257:Core/Src/quadspi.c ****   sCommand.DataMode = QSPI_DATA_1_LINE;
 370              		.loc 1 257 3 view .LVU90
 258:Core/Src/quadspi.c ****   sCommand.DummyCycles = 0;
 371              		.loc 1 258 3 view .LVU91
 258:Core/Src/quadspi.c ****   sCommand.DummyCycles = 0;
 372              		.loc 1 258 21 is_stmt 0 view .LVU92
 373 0028 4FF08073 		mov	r3, #16777216
 374 002c 0F93     		str	r3, [sp, #60]
 259:Core/Src/quadspi.c ****   sConfig.Match = 0x00; /* WIP=0 */
 375              		.loc 1 259 3 is_stmt 1 view .LVU93
 260:Core/Src/quadspi.c ****   sConfig.Mask = 0x01;  /* WIP bit */
 376              		.loc 1 260 3 view .LVU94
 261:Core/Src/quadspi.c ****   sConfig.MatchMode = QSPI_MATCH_MODE_AND;
 377              		.loc 1 261 3 view .LVU95
 261:Core/Src/quadspi.c ****   sConfig.MatchMode = QSPI_MATCH_MODE_AND;
 378              		.loc 1 261 16 is_stmt 0 view .LVU96
 379 002e 0123     		movs	r3, #1
 380 0030 0193     		str	r3, [sp, #4]
 262:Core/Src/quadspi.c ****   sConfig.StatusBytesSize = 1;
 381              		.loc 1 262 3 is_stmt 1 view .LVU97
 263:Core/Src/quadspi.c ****   sConfig.Interval = 0x10;
 382              		.loc 1 263 3 view .LVU98
 263:Core/Src/quadspi.c ****   sConfig.Interval = 0x10;
 383              		.loc 1 263 27 is_stmt 0 view .LVU99
 384 0032 0393     		str	r3, [sp, #12]
 264:Core/Src/quadspi.c ****   sConfig.AutomaticStop = QSPI_AUTOMATIC_STOP_ENABLE;
 385              		.loc 1 264 3 is_stmt 1 view .LVU100
 264:Core/Src/quadspi.c ****   sConfig.AutomaticStop = QSPI_AUTOMATIC_STOP_ENABLE;
ARM GAS  /tmp/ccmcLKXV.s 			page 15


 386              		.loc 1 264 20 is_stmt 0 view .LVU101
 387 0034 1023     		movs	r3, #16
 388 0036 0293     		str	r3, [sp, #8]
 265:Core/Src/quadspi.c ****   if (HAL_QSPI_AutoPolling(&hqspi, &sCommand, &sConfig, timeout) != HAL_OK)
 389              		.loc 1 265 3 is_stmt 1 view .LVU102
 265:Core/Src/quadspi.c ****   if (HAL_QSPI_AutoPolling(&hqspi, &sCommand, &sConfig, timeout) != HAL_OK)
 390              		.loc 1 265 25 is_stmt 0 view .LVU103
 391 0038 4FF48003 		mov	r3, #4194304
 392 003c 0593     		str	r3, [sp, #20]
 266:Core/Src/quadspi.c ****     return 1;
 393              		.loc 1 266 3 is_stmt 1 view .LVU104
 266:Core/Src/quadspi.c ****     return 1;
 394              		.loc 1 266 7 is_stmt 0 view .LVU105
 395 003e 2346     		mov	r3, r4
 396 0040 6A46     		mov	r2, sp
 397 0042 06A9     		add	r1, sp, #24
 398 0044 0348     		ldr	r0, .L40
 399 0046 FFF7FEFF 		bl	HAL_QSPI_AutoPolling
 400              	.LVL25:
 266:Core/Src/quadspi.c ****     return 1;
 401              		.loc 1 266 6 view .LVU106
 402 004a 08B9     		cbnz	r0, .L39
 403              	.L36:
 269:Core/Src/quadspi.c **** 
 404              		.loc 1 269 1 view .LVU107
 405 004c 14B0     		add	sp, sp, #80
 406              	.LCFI8:
 407              		.cfi_remember_state
 408              		.cfi_def_cfa_offset 8
 409              		@ sp needed
 410 004e 10BD     		pop	{r4, pc}
 411              	.LVL26:
 412              	.L39:
 413              	.LCFI9:
 414              		.cfi_restore_state
 267:Core/Src/quadspi.c ****   return 0;
 415              		.loc 1 267 12 view .LVU108
 416 0050 0120     		movs	r0, #1
 417 0052 FBE7     		b	.L36
 418              	.L41:
 419              		.align	2
 420              	.L40:
 421 0054 00000000 		.word	.LANCHOR2
 422              		.cfi_endproc
 423              	.LFE147:
 425              		.section	.text.QSPI_WriteStatusReg2,"ax",%progbits
 426              		.align	1
 427              		.syntax unified
 428              		.thumb
 429              		.thumb_func
 430              		.fpu fpv5-d16
 432              	QSPI_WriteStatusReg2:
 433              	.LVL27:
 434              	.LFB160:
 358:Core/Src/quadspi.c **** 
 359:Core/Src/quadspi.c **** static uint8_t QSPI_EraseSector(uint32_t address)
 360:Core/Src/quadspi.c **** {
ARM GAS  /tmp/ccmcLKXV.s 			page 16


 361:Core/Src/quadspi.c ****   if (QSPI_WriteEnable()) return 1;
 362:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 363:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 364:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_SECTOR_ERASE;
 365:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_1_LINE;
 366:Core/Src/quadspi.c ****   cmd.AddressSize = QSPI_ADDRESS_24_BITS;
 367:Core/Src/quadspi.c ****   cmd.Address = address;
 368:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_NONE;
 369:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 370:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(5000)) return 3;
 371:Core/Src/quadspi.c ****   return 0;
 372:Core/Src/quadspi.c **** }
 373:Core/Src/quadspi.c **** 
 374:Core/Src/quadspi.c **** static uint8_t QSPI_PageProgram(uint32_t address, const uint8_t *data, uint32_t length)
 375:Core/Src/quadspi.c **** {
 376:Core/Src/quadspi.c ****   if (length == 0 || length > MEMORY_PAGE_SIZE) return 1;
 377:Core/Src/quadspi.c ****   if (QSPI_WriteEnable()) return 2;
 378:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 379:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 380:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_PAGE_PROGRAM;
 381:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_1_LINE;
 382:Core/Src/quadspi.c ****   cmd.AddressSize = QSPI_ADDRESS_24_BITS;
 383:Core/Src/quadspi.c ****   cmd.Address = address;
 384:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_1_LINE;
 385:Core/Src/quadspi.c ****   cmd.NbData = length;
 386:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 3;
 387:Core/Src/quadspi.c ****   if (HAL_QSPI_Transmit(&hqspi, (uint8_t*)data, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 4
 388:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(100)) return 5;
 389:Core/Src/quadspi.c ****   return 0;
 390:Core/Src/quadspi.c **** }
 391:Core/Src/quadspi.c **** 
 392:Core/Src/quadspi.c **** static __attribute__((unused)) uint8_t QSPI_EnableMemoryMapped(void)
 393:Core/Src/quadspi.c **** {
 394:Core/Src/quadspi.c ****   QSPI_CommandTypeDef sCommand = {0};
 395:Core/Src/quadspi.c ****   QSPI_MemoryMappedTypeDef sMemMappedCfg = {0};
 396:Core/Src/quadspi.c ****   /* Use standard READ (0x03) first; can switch to fast quad read later. */
 397:Core/Src/quadspi.c ****   sCommand.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 398:Core/Src/quadspi.c ****   sCommand.Instruction = W25Q128_CMD_READ_DATA;
 399:Core/Src/quadspi.c ****   sCommand.AddressMode = QSPI_ADDRESS_1_LINE;
 400:Core/Src/quadspi.c ****   sCommand.AddressSize = QSPI_ADDRESS_24_BITS;
 401:Core/Src/quadspi.c ****   sCommand.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 402:Core/Src/quadspi.c ****   sCommand.DataMode = QSPI_DATA_1_LINE;
 403:Core/Src/quadspi.c ****   sCommand.DummyCycles = 0;
 404:Core/Src/quadspi.c ****   sCommand.DdrMode = QSPI_DDR_MODE_DISABLE;
 405:Core/Src/quadspi.c ****   sCommand.DdrHoldHalfCycle = QSPI_DDR_HHC_ANALOG_DELAY;
 406:Core/Src/quadspi.c ****   sCommand.SIOOMode = QSPI_SIOO_INST_ONLY_FIRST_CMD;
 407:Core/Src/quadspi.c **** 
 408:Core/Src/quadspi.c ****   sMemMappedCfg.TimeOutActivation = QSPI_TIMEOUT_COUNTER_DISABLE;
 409:Core/Src/quadspi.c ****   if (HAL_QSPI_MemoryMapped(&hqspi, &sCommand, &sMemMappedCfg) != HAL_OK) {
 410:Core/Src/quadspi.c ****     return 1;
 411:Core/Src/quadspi.c ****   }
 412:Core/Src/quadspi.c ****   return 0;
 413:Core/Src/quadspi.c **** }
 414:Core/Src/quadspi.c **** 
 415:Core/Src/quadspi.c **** static uint8_t QSPI_EnableMemoryMappedQuad(void)
 416:Core/Src/quadspi.c **** {
 417:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
ARM GAS  /tmp/ccmcLKXV.s 			page 17


 418:Core/Src/quadspi.c ****   /* Ensure QE bit set (Winbond: Status Reg 2 bit 1) */
 419:Core/Src/quadspi.c ****   if (QSPI_EnsureQuadReady()) return 1;
 420:Core/Src/quadspi.c ****   QSPI_CommandTypeDef sCommand = {0};
 421:Core/Src/quadspi.c ****   QSPI_MemoryMappedTypeDef sMemMappedCfg = {0};
 422:Core/Src/quadspi.c ****   /* Fast Read Quad Output 0x6B: Instruction(1) + Addr(3) + Dummy + Data(4 lines) */
 423:Core/Src/quadspi.c ****   sCommand.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 424:Core/Src/quadspi.c ****   sCommand.Instruction = 0x6B; /* FAST_READ_QUAD_OUTPUT */
 425:Core/Src/quadspi.c ****   sCommand.AddressMode = QSPI_ADDRESS_1_LINE; /* address still single line for this mode */
 426:Core/Src/quadspi.c ****   sCommand.AddressSize = QSPI_ADDRESS_24_BITS;
 427:Core/Src/quadspi.c ****   sCommand.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 428:Core/Src/quadspi.c ****   sCommand.DataMode = QSPI_DATA_4_LINES;
 429:Core/Src/quadspi.c ****   sCommand.DummyCycles = QSPI_QUAD_DUMMY_CYCLES;
 430:Core/Src/quadspi.c ****   sCommand.DdrMode = QSPI_DDR_MODE_DISABLE;
 431:Core/Src/quadspi.c ****   sCommand.DdrHoldHalfCycle = QSPI_DDR_HHC_ANALOG_DELAY;
 432:Core/Src/quadspi.c ****   sCommand.SIOOMode = QSPI_SIOO_INST_ONLY_FIRST_CMD;
 433:Core/Src/quadspi.c ****   sMemMappedCfg.TimeOutActivation = QSPI_TIMEOUT_COUNTER_DISABLE;
 434:Core/Src/quadspi.c ****   if (HAL_QSPI_MemoryMapped(&hqspi, &sCommand, &sMemMappedCfg) != HAL_OK) return 2;
 435:Core/Src/quadspi.c ****   return 0;
 436:Core/Src/quadspi.c **** #else
 437:Core/Src/quadspi.c ****   return QSPI_EnableMemoryMapped();
 438:Core/Src/quadspi.c **** #endif
 439:Core/Src/quadspi.c **** }
 440:Core/Src/quadspi.c **** 
 441:Core/Src/quadspi.c **** static __attribute__((unused)) uint8_t QSPI_ReadStatusReg(uint8_t *sr1)
 442:Core/Src/quadspi.c **** {
 443:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 444:Core/Src/quadspi.c ****   uint8_t val=0;
 445:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 446:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_READ_STATUS_REG; /* 0x05 */
 447:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_NONE;
 448:Core/Src/quadspi.c ****   cmd.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 449:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_1_LINE;
 450:Core/Src/quadspi.c ****   cmd.NbData = 1;
 451:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 1;
 452:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, &val, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 453:Core/Src/quadspi.c ****   if (sr1) *sr1 = val;
 454:Core/Src/quadspi.c ****   return 0;
 455:Core/Src/quadspi.c **** }
 456:Core/Src/quadspi.c **** 
 457:Core/Src/quadspi.c **** static uint8_t QSPI_ReadStatusReg2(uint8_t *sr2)
 458:Core/Src/quadspi.c **** {
 459:Core/Src/quadspi.c ****   /* Winbond SR2 is 0x35 read */
 460:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 461:Core/Src/quadspi.c ****   uint8_t val=0;
 462:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 463:Core/Src/quadspi.c ****   cmd.Instruction = 0x35; /* Read Status Register-2 */
 464:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_NONE;
 465:Core/Src/quadspi.c ****   cmd.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 466:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_1_LINE;
 467:Core/Src/quadspi.c ****   cmd.NbData = 1;
 468:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 1;
 469:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, &val, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 470:Core/Src/quadspi.c ****   if (sr2) *sr2 = val;
 471:Core/Src/quadspi.c ****   return 0;
 472:Core/Src/quadspi.c **** }
 473:Core/Src/quadspi.c **** 
 474:Core/Src/quadspi.c **** static uint8_t QSPI_WriteStatusReg2(uint8_t sr2)
ARM GAS  /tmp/ccmcLKXV.s 			page 18


 475:Core/Src/quadspi.c **** {
 435              		.loc 1 475 1 is_stmt 1 view -0
 436              		.cfi_startproc
 437              		@ args = 0, pretend = 0, frame = 64
 438              		@ frame_needed = 0, uses_anonymous_args = 0
 439              		.loc 1 475 1 is_stmt 0 view .LVU110
 440 0000 00B5     		push	{lr}
 441              	.LCFI10:
 442              		.cfi_def_cfa_offset 4
 443              		.cfi_offset 14, -4
 444 0002 91B0     		sub	sp, sp, #68
 445              	.LCFI11:
 446              		.cfi_def_cfa_offset 72
 447 0004 8DF80700 		strb	r0, [sp, #7]
 476:Core/Src/quadspi.c ****   if (QSPI_WriteEnable()) return 1;
 448              		.loc 1 476 3 is_stmt 1 view .LVU111
 449              		.loc 1 476 7 is_stmt 0 view .LVU112
 450 0008 FFF7FEFF 		bl	QSPI_WriteEnable
 451              	.LVL28:
 452              		.loc 1 476 6 view .LVU113
 453 000c 18B1     		cbz	r0, .L49
 454              		.loc 1 476 34 view .LVU114
 455 000e 0120     		movs	r0, #1
 456              	.L43:
 477:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 478:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 479:Core/Src/quadspi.c ****   cmd.Instruction = 0x31; /* Write Status Register-2 */
 480:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_NONE;
 481:Core/Src/quadspi.c ****   cmd.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 482:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_1_LINE;
 483:Core/Src/quadspi.c ****   cmd.NbData = 1;
 484:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 485:Core/Src/quadspi.c ****   if (HAL_QSPI_Transmit(&hqspi, &sr2, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 3;
 486:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(100)) return 4;
 487:Core/Src/quadspi.c ****   return 0;
 488:Core/Src/quadspi.c **** }
 457              		.loc 1 488 1 view .LVU115
 458 0010 11B0     		add	sp, sp, #68
 459              	.LCFI12:
 460              		.cfi_remember_state
 461              		.cfi_def_cfa_offset 4
 462              		@ sp needed
 463 0012 5DF804FB 		ldr	pc, [sp], #4
 464              	.L49:
 465              	.LCFI13:
 466              		.cfi_restore_state
 477:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 467              		.loc 1 477 3 is_stmt 1 view .LVU116
 477:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 468              		.loc 1 477 23 is_stmt 0 view .LVU117
 469 0016 3822     		movs	r2, #56
 470 0018 0021     		movs	r1, #0
 471 001a 02A8     		add	r0, sp, #8
 472 001c FFF7FEFF 		bl	memset
 473              	.LVL29:
 478:Core/Src/quadspi.c ****   cmd.Instruction = 0x31; /* Write Status Register-2 */
 474              		.loc 1 478 3 is_stmt 1 view .LVU118
ARM GAS  /tmp/ccmcLKXV.s 			page 19


 478:Core/Src/quadspi.c ****   cmd.Instruction = 0x31; /* Write Status Register-2 */
 475              		.loc 1 478 23 is_stmt 0 view .LVU119
 476 0020 4FF48073 		mov	r3, #256
 477 0024 0893     		str	r3, [sp, #32]
 479:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_NONE;
 478              		.loc 1 479 3 is_stmt 1 view .LVU120
 479:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_NONE;
 479              		.loc 1 479 19 is_stmt 0 view .LVU121
 480 0026 3123     		movs	r3, #49
 481 0028 0293     		str	r3, [sp, #8]
 480:Core/Src/quadspi.c ****   cmd.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 482              		.loc 1 480 3 is_stmt 1 view .LVU122
 481:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_1_LINE;
 483              		.loc 1 481 3 view .LVU123
 482:Core/Src/quadspi.c ****   cmd.NbData = 1;
 484              		.loc 1 482 3 view .LVU124
 482:Core/Src/quadspi.c ****   cmd.NbData = 1;
 485              		.loc 1 482 16 is_stmt 0 view .LVU125
 486 002a 4FF08073 		mov	r3, #16777216
 487 002e 0B93     		str	r3, [sp, #44]
 483:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 488              		.loc 1 483 3 is_stmt 1 view .LVU126
 483:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 489              		.loc 1 483 14 is_stmt 0 view .LVU127
 490 0030 0123     		movs	r3, #1
 491 0032 0C93     		str	r3, [sp, #48]
 484:Core/Src/quadspi.c ****   if (HAL_QSPI_Transmit(&hqspi, &sr2, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 3;
 492              		.loc 1 484 3 is_stmt 1 view .LVU128
 484:Core/Src/quadspi.c ****   if (HAL_QSPI_Transmit(&hqspi, &sr2, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 3;
 493              		.loc 1 484 7 is_stmt 0 view .LVU129
 494 0034 41F28832 		movw	r2, #5000
 495 0038 02A9     		add	r1, sp, #8
 496 003a 0B48     		ldr	r0, .L50
 497 003c FFF7FEFF 		bl	HAL_QSPI_Command
 498              	.LVL30:
 484:Core/Src/quadspi.c ****   if (HAL_QSPI_Transmit(&hqspi, &sr2, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 3;
 499              		.loc 1 484 6 view .LVU130
 500 0040 70B9     		cbnz	r0, .L45
 485:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(100)) return 4;
 501              		.loc 1 485 3 is_stmt 1 view .LVU131
 485:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(100)) return 4;
 502              		.loc 1 485 7 is_stmt 0 view .LVU132
 503 0042 41F28832 		movw	r2, #5000
 504 0046 0DF10701 		add	r1, sp, #7
 505 004a 0748     		ldr	r0, .L50
 506 004c FFF7FEFF 		bl	HAL_QSPI_Transmit
 507              	.LVL31:
 485:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(100)) return 4;
 508              		.loc 1 485 6 view .LVU133
 509 0050 40B9     		cbnz	r0, .L46
 486:Core/Src/quadspi.c ****   return 0;
 510              		.loc 1 486 3 is_stmt 1 view .LVU134
 486:Core/Src/quadspi.c ****   return 0;
 511              		.loc 1 486 7 is_stmt 0 view .LVU135
 512 0052 6420     		movs	r0, #100
 513 0054 FFF7FEFF 		bl	QSPI_WaitWhileBusy
 514              	.LVL32:
ARM GAS  /tmp/ccmcLKXV.s 			page 20


 486:Core/Src/quadspi.c ****   return 0;
 515              		.loc 1 486 6 view .LVU136
 516 0058 0028     		cmp	r0, #0
 517 005a D9D0     		beq	.L43
 486:Core/Src/quadspi.c ****   return 0;
 518              		.loc 1 486 39 view .LVU137
 519 005c 0420     		movs	r0, #4
 520 005e D7E7     		b	.L43
 521              	.L45:
 484:Core/Src/quadspi.c ****   if (HAL_QSPI_Transmit(&hqspi, &sr2, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 3;
 522              		.loc 1 484 88 view .LVU138
 523 0060 0220     		movs	r0, #2
 524 0062 D5E7     		b	.L43
 525              	.L46:
 485:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(100)) return 4;
 526              		.loc 1 485 89 view .LVU139
 527 0064 0320     		movs	r0, #3
 528 0066 D3E7     		b	.L43
 529              	.L51:
 530              		.align	2
 531              	.L50:
 532 0068 00000000 		.word	.LANCHOR2
 533              		.cfi_endproc
 534              	.LFE160:
 536              		.section	.text.QSPI_EraseSector,"ax",%progbits
 537              		.align	1
 538              		.syntax unified
 539              		.thumb
 540              		.thumb_func
 541              		.fpu fpv5-d16
 543              	QSPI_EraseSector:
 544              	.LVL33:
 545              	.LFB154:
 360:Core/Src/quadspi.c ****   if (QSPI_WriteEnable()) return 1;
 546              		.loc 1 360 1 is_stmt 1 view -0
 547              		.cfi_startproc
 548              		@ args = 0, pretend = 0, frame = 56
 549              		@ frame_needed = 0, uses_anonymous_args = 0
 360:Core/Src/quadspi.c ****   if (QSPI_WriteEnable()) return 1;
 550              		.loc 1 360 1 is_stmt 0 view .LVU141
 551 0000 10B5     		push	{r4, lr}
 552              	.LCFI14:
 553              		.cfi_def_cfa_offset 8
 554              		.cfi_offset 4, -8
 555              		.cfi_offset 14, -4
 556 0002 8EB0     		sub	sp, sp, #56
 557              	.LCFI15:
 558              		.cfi_def_cfa_offset 64
 559 0004 0446     		mov	r4, r0
 361:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 560              		.loc 1 361 3 is_stmt 1 view .LVU142
 361:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 561              		.loc 1 361 7 is_stmt 0 view .LVU143
 562 0006 FFF7FEFF 		bl	QSPI_WriteEnable
 563              	.LVL34:
 361:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 564              		.loc 1 361 6 view .LVU144
ARM GAS  /tmp/ccmcLKXV.s 			page 21


 565 000a 10B1     		cbz	r0, .L58
 361:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 566              		.loc 1 361 34 view .LVU145
 567 000c 0120     		movs	r0, #1
 568              	.L53:
 372:Core/Src/quadspi.c **** 
 569              		.loc 1 372 1 view .LVU146
 570 000e 0EB0     		add	sp, sp, #56
 571              	.LCFI16:
 572              		.cfi_remember_state
 573              		.cfi_def_cfa_offset 8
 574              		@ sp needed
 575 0010 10BD     		pop	{r4, pc}
 576              	.LVL35:
 577              	.L58:
 578              	.LCFI17:
 579              		.cfi_restore_state
 362:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 580              		.loc 1 362 3 is_stmt 1 view .LVU147
 362:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 581              		.loc 1 362 23 is_stmt 0 view .LVU148
 582 0012 3822     		movs	r2, #56
 583 0014 0021     		movs	r1, #0
 584 0016 6846     		mov	r0, sp
 585 0018 FFF7FEFF 		bl	memset
 586              	.LVL36:
 363:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_SECTOR_ERASE;
 587              		.loc 1 363 3 is_stmt 1 view .LVU149
 363:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_SECTOR_ERASE;
 588              		.loc 1 363 23 is_stmt 0 view .LVU150
 589 001c 4FF48073 		mov	r3, #256
 590 0020 0693     		str	r3, [sp, #24]
 364:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_1_LINE;
 591              		.loc 1 364 3 is_stmt 1 view .LVU151
 364:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_1_LINE;
 592              		.loc 1 364 19 is_stmt 0 view .LVU152
 593 0022 2023     		movs	r3, #32
 594 0024 0093     		str	r3, [sp]
 365:Core/Src/quadspi.c ****   cmd.AddressSize = QSPI_ADDRESS_24_BITS;
 595              		.loc 1 365 3 is_stmt 1 view .LVU153
 365:Core/Src/quadspi.c ****   cmd.AddressSize = QSPI_ADDRESS_24_BITS;
 596              		.loc 1 365 19 is_stmt 0 view .LVU154
 597 0026 4FF48063 		mov	r3, #1024
 598 002a 0793     		str	r3, [sp, #28]
 366:Core/Src/quadspi.c ****   cmd.Address = address;
 599              		.loc 1 366 3 is_stmt 1 view .LVU155
 366:Core/Src/quadspi.c ****   cmd.Address = address;
 600              		.loc 1 366 19 is_stmt 0 view .LVU156
 601 002c 4FF40053 		mov	r3, #8192
 602 0030 0393     		str	r3, [sp, #12]
 367:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_NONE;
 603              		.loc 1 367 3 is_stmt 1 view .LVU157
 367:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_NONE;
 604              		.loc 1 367 15 is_stmt 0 view .LVU158
 605 0032 0194     		str	r4, [sp, #4]
 368:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 606              		.loc 1 368 3 is_stmt 1 view .LVU159
ARM GAS  /tmp/ccmcLKXV.s 			page 22


 369:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(5000)) return 3;
 607              		.loc 1 369 3 view .LVU160
 369:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(5000)) return 3;
 608              		.loc 1 369 7 is_stmt 0 view .LVU161
 609 0034 41F28832 		movw	r2, #5000
 610 0038 6946     		mov	r1, sp
 611 003a 0748     		ldr	r0, .L59
 612 003c FFF7FEFF 		bl	HAL_QSPI_Command
 613              	.LVL37:
 369:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(5000)) return 3;
 614              		.loc 1 369 6 view .LVU162
 615 0040 38B9     		cbnz	r0, .L55
 370:Core/Src/quadspi.c ****   return 0;
 616              		.loc 1 370 3 is_stmt 1 view .LVU163
 370:Core/Src/quadspi.c ****   return 0;
 617              		.loc 1 370 7 is_stmt 0 view .LVU164
 618 0042 41F28830 		movw	r0, #5000
 619 0046 FFF7FEFF 		bl	QSPI_WaitWhileBusy
 620              	.LVL38:
 370:Core/Src/quadspi.c ****   return 0;
 621              		.loc 1 370 6 view .LVU165
 622 004a 0028     		cmp	r0, #0
 623 004c DFD0     		beq	.L53
 370:Core/Src/quadspi.c ****   return 0;
 624              		.loc 1 370 40 view .LVU166
 625 004e 0320     		movs	r0, #3
 626 0050 DDE7     		b	.L53
 627              	.L55:
 369:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(5000)) return 3;
 628              		.loc 1 369 88 view .LVU167
 629 0052 0220     		movs	r0, #2
 630 0054 DBE7     		b	.L53
 631              	.L60:
 632 0056 00BF     		.align	2
 633              	.L59:
 634 0058 00000000 		.word	.LANCHOR2
 635              		.cfi_endproc
 636              	.LFE154:
 638              		.section	.text.QSPI_PageProgram,"ax",%progbits
 639              		.align	1
 640              		.syntax unified
 641              		.thumb
 642              		.thumb_func
 643              		.fpu fpv5-d16
 645              	QSPI_PageProgram:
 646              	.LVL39:
 647              	.LFB155:
 375:Core/Src/quadspi.c ****   if (length == 0 || length > MEMORY_PAGE_SIZE) return 1;
 648              		.loc 1 375 1 is_stmt 1 view -0
 649              		.cfi_startproc
 650              		@ args = 0, pretend = 0, frame = 56
 651              		@ frame_needed = 0, uses_anonymous_args = 0
 376:Core/Src/quadspi.c ****   if (QSPI_WriteEnable()) return 2;
 652              		.loc 1 376 3 view .LVU169
 376:Core/Src/quadspi.c ****   if (QSPI_WriteEnable()) return 2;
 653              		.loc 1 376 19 is_stmt 0 view .LVU170
 654 0000 531E     		subs	r3, r2, #1
ARM GAS  /tmp/ccmcLKXV.s 			page 23


 376:Core/Src/quadspi.c ****   if (QSPI_WriteEnable()) return 2;
 655              		.loc 1 376 6 view .LVU171
 656 0002 FF2B     		cmp	r3, #255
 657 0004 01D9     		bls	.L72
 376:Core/Src/quadspi.c ****   if (QSPI_WriteEnable()) return 2;
 658              		.loc 1 376 56 view .LVU172
 659 0006 0120     		movs	r0, #1
 660              	.LVL40:
 390:Core/Src/quadspi.c **** 
 661              		.loc 1 390 1 view .LVU173
 662 0008 7047     		bx	lr
 663              	.LVL41:
 664              	.L72:
 375:Core/Src/quadspi.c ****   if (length == 0 || length > MEMORY_PAGE_SIZE) return 1;
 665              		.loc 1 375 1 view .LVU174
 666 000a 70B5     		push	{r4, r5, r6, lr}
 667              	.LCFI18:
 668              		.cfi_def_cfa_offset 16
 669              		.cfi_offset 4, -16
 670              		.cfi_offset 5, -12
 671              		.cfi_offset 6, -8
 672              		.cfi_offset 14, -4
 673 000c 8EB0     		sub	sp, sp, #56
 674              	.LCFI19:
 675              		.cfi_def_cfa_offset 72
 676 000e 0546     		mov	r5, r0
 677 0010 0E46     		mov	r6, r1
 678 0012 1446     		mov	r4, r2
 377:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 679              		.loc 1 377 3 is_stmt 1 view .LVU175
 377:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 680              		.loc 1 377 7 is_stmt 0 view .LVU176
 681 0014 FFF7FEFF 		bl	QSPI_WriteEnable
 682              	.LVL42:
 377:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 683              		.loc 1 377 6 view .LVU177
 684 0018 40BB     		cbnz	r0, .L64
 378:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 685              		.loc 1 378 3 is_stmt 1 view .LVU178
 378:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 686              		.loc 1 378 23 is_stmt 0 view .LVU179
 687 001a 3822     		movs	r2, #56
 688 001c 0021     		movs	r1, #0
 689 001e 6846     		mov	r0, sp
 690 0020 FFF7FEFF 		bl	memset
 691              	.LVL43:
 379:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_PAGE_PROGRAM;
 692              		.loc 1 379 3 is_stmt 1 view .LVU180
 379:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_PAGE_PROGRAM;
 693              		.loc 1 379 23 is_stmt 0 view .LVU181
 694 0024 4FF48073 		mov	r3, #256
 695 0028 0693     		str	r3, [sp, #24]
 380:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_1_LINE;
 696              		.loc 1 380 3 is_stmt 1 view .LVU182
 380:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_1_LINE;
 697              		.loc 1 380 19 is_stmt 0 view .LVU183
 698 002a 0223     		movs	r3, #2
ARM GAS  /tmp/ccmcLKXV.s 			page 24


 699 002c 0093     		str	r3, [sp]
 381:Core/Src/quadspi.c ****   cmd.AddressSize = QSPI_ADDRESS_24_BITS;
 700              		.loc 1 381 3 is_stmt 1 view .LVU184
 381:Core/Src/quadspi.c ****   cmd.AddressSize = QSPI_ADDRESS_24_BITS;
 701              		.loc 1 381 19 is_stmt 0 view .LVU185
 702 002e 4FF48063 		mov	r3, #1024
 703 0032 0793     		str	r3, [sp, #28]
 382:Core/Src/quadspi.c ****   cmd.Address = address;
 704              		.loc 1 382 3 is_stmt 1 view .LVU186
 382:Core/Src/quadspi.c ****   cmd.Address = address;
 705              		.loc 1 382 19 is_stmt 0 view .LVU187
 706 0034 4FF40053 		mov	r3, #8192
 707 0038 0393     		str	r3, [sp, #12]
 383:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_1_LINE;
 708              		.loc 1 383 3 is_stmt 1 view .LVU188
 383:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_1_LINE;
 709              		.loc 1 383 15 is_stmt 0 view .LVU189
 710 003a 0195     		str	r5, [sp, #4]
 384:Core/Src/quadspi.c ****   cmd.NbData = length;
 711              		.loc 1 384 3 is_stmt 1 view .LVU190
 384:Core/Src/quadspi.c ****   cmd.NbData = length;
 712              		.loc 1 384 16 is_stmt 0 view .LVU191
 713 003c 4FF08073 		mov	r3, #16777216
 714 0040 0993     		str	r3, [sp, #36]
 385:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 3;
 715              		.loc 1 385 3 is_stmt 1 view .LVU192
 385:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 3;
 716              		.loc 1 385 14 is_stmt 0 view .LVU193
 717 0042 0A94     		str	r4, [sp, #40]
 386:Core/Src/quadspi.c ****   if (HAL_QSPI_Transmit(&hqspi, (uint8_t*)data, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 4
 718              		.loc 1 386 3 is_stmt 1 view .LVU194
 386:Core/Src/quadspi.c ****   if (HAL_QSPI_Transmit(&hqspi, (uint8_t*)data, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 4
 719              		.loc 1 386 7 is_stmt 0 view .LVU195
 720 0044 41F28832 		movw	r2, #5000
 721 0048 6946     		mov	r1, sp
 722 004a 0C48     		ldr	r0, .L73
 723 004c FFF7FEFF 		bl	HAL_QSPI_Command
 724              	.LVL44:
 386:Core/Src/quadspi.c ****   if (HAL_QSPI_Transmit(&hqspi, (uint8_t*)data, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 4
 725              		.loc 1 386 6 view .LVU196
 726 0050 78B9     		cbnz	r0, .L65
 387:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(100)) return 5;
 727              		.loc 1 387 3 is_stmt 1 view .LVU197
 387:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(100)) return 5;
 728              		.loc 1 387 7 is_stmt 0 view .LVU198
 729 0052 41F28832 		movw	r2, #5000
 730 0056 3146     		mov	r1, r6
 731 0058 0848     		ldr	r0, .L73
 732 005a FFF7FEFF 		bl	HAL_QSPI_Transmit
 733              	.LVL45:
 387:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(100)) return 5;
 734              		.loc 1 387 6 view .LVU199
 735 005e 50B9     		cbnz	r0, .L66
 388:Core/Src/quadspi.c ****   return 0;
 736              		.loc 1 388 3 is_stmt 1 view .LVU200
 388:Core/Src/quadspi.c ****   return 0;
 737              		.loc 1 388 7 is_stmt 0 view .LVU201
ARM GAS  /tmp/ccmcLKXV.s 			page 25


 738 0060 6420     		movs	r0, #100
 739 0062 FFF7FEFF 		bl	QSPI_WaitWhileBusy
 740              	.LVL46:
 388:Core/Src/quadspi.c ****   return 0;
 741              		.loc 1 388 6 view .LVU202
 742 0066 10B1     		cbz	r0, .L62
 388:Core/Src/quadspi.c ****   return 0;
 743              		.loc 1 388 39 view .LVU203
 744 0068 0520     		movs	r0, #5
 745 006a 00E0     		b	.L62
 746              	.L64:
 377:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 747              		.loc 1 377 34 view .LVU204
 748 006c 0220     		movs	r0, #2
 749              	.L62:
 390:Core/Src/quadspi.c **** 
 750              		.loc 1 390 1 view .LVU205
 751 006e 0EB0     		add	sp, sp, #56
 752              	.LCFI20:
 753              		.cfi_remember_state
 754              		.cfi_def_cfa_offset 16
 755              		@ sp needed
 756 0070 70BD     		pop	{r4, r5, r6, pc}
 757              	.LVL47:
 758              	.L65:
 759              	.LCFI21:
 760              		.cfi_restore_state
 386:Core/Src/quadspi.c ****   if (HAL_QSPI_Transmit(&hqspi, (uint8_t*)data, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 4
 761              		.loc 1 386 88 view .LVU206
 762 0072 0320     		movs	r0, #3
 763 0074 FBE7     		b	.L62
 764              	.L66:
 387:Core/Src/quadspi.c ****   if (QSPI_WaitWhileBusy(100)) return 5;
 765              		.loc 1 387 99 view .LVU207
 766 0076 0420     		movs	r0, #4
 767 0078 F9E7     		b	.L62
 768              	.L74:
 769 007a 00BF     		.align	2
 770              	.L73:
 771 007c 00000000 		.word	.LANCHOR2
 772              		.cfi_endproc
 773              	.LFE155:
 775              		.section	.text.QSPI_ReadStatusReg2,"ax",%progbits
 776              		.align	1
 777              		.syntax unified
 778              		.thumb
 779              		.thumb_func
 780              		.fpu fpv5-d16
 782              	QSPI_ReadStatusReg2:
 783              	.LVL48:
 784              	.LFB159:
 458:Core/Src/quadspi.c ****   /* Winbond SR2 is 0x35 read */
 785              		.loc 1 458 1 is_stmt 1 view -0
 786              		.cfi_startproc
 787              		@ args = 0, pretend = 0, frame = 64
 788              		@ frame_needed = 0, uses_anonymous_args = 0
 458:Core/Src/quadspi.c ****   /* Winbond SR2 is 0x35 read */
ARM GAS  /tmp/ccmcLKXV.s 			page 26


 789              		.loc 1 458 1 is_stmt 0 view .LVU209
 790 0000 10B5     		push	{r4, lr}
 791              	.LCFI22:
 792              		.cfi_def_cfa_offset 8
 793              		.cfi_offset 4, -8
 794              		.cfi_offset 14, -4
 795 0002 90B0     		sub	sp, sp, #64
 796              	.LCFI23:
 797              		.cfi_def_cfa_offset 72
 798 0004 0446     		mov	r4, r0
 460:Core/Src/quadspi.c ****   uint8_t val=0;
 799              		.loc 1 460 3 is_stmt 1 view .LVU210
 460:Core/Src/quadspi.c ****   uint8_t val=0;
 800              		.loc 1 460 23 is_stmt 0 view .LVU211
 801 0006 3822     		movs	r2, #56
 802 0008 0021     		movs	r1, #0
 803 000a 02A8     		add	r0, sp, #8
 804              	.LVL49:
 460:Core/Src/quadspi.c ****   uint8_t val=0;
 805              		.loc 1 460 23 view .LVU212
 806 000c FFF7FEFF 		bl	memset
 807              	.LVL50:
 461:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 808              		.loc 1 461 3 is_stmt 1 view .LVU213
 461:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 809              		.loc 1 461 11 is_stmt 0 view .LVU214
 810 0010 0023     		movs	r3, #0
 811 0012 8DF80730 		strb	r3, [sp, #7]
 462:Core/Src/quadspi.c ****   cmd.Instruction = 0x35; /* Read Status Register-2 */
 812              		.loc 1 462 3 is_stmt 1 view .LVU215
 462:Core/Src/quadspi.c ****   cmd.Instruction = 0x35; /* Read Status Register-2 */
 813              		.loc 1 462 23 is_stmt 0 view .LVU216
 814 0016 4FF48073 		mov	r3, #256
 815 001a 0893     		str	r3, [sp, #32]
 463:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_NONE;
 816              		.loc 1 463 3 is_stmt 1 view .LVU217
 463:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_NONE;
 817              		.loc 1 463 19 is_stmt 0 view .LVU218
 818 001c 3523     		movs	r3, #53
 819 001e 0293     		str	r3, [sp, #8]
 464:Core/Src/quadspi.c ****   cmd.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 820              		.loc 1 464 3 is_stmt 1 view .LVU219
 465:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_1_LINE;
 821              		.loc 1 465 3 view .LVU220
 466:Core/Src/quadspi.c ****   cmd.NbData = 1;
 822              		.loc 1 466 3 view .LVU221
 466:Core/Src/quadspi.c ****   cmd.NbData = 1;
 823              		.loc 1 466 16 is_stmt 0 view .LVU222
 824 0020 4FF08073 		mov	r3, #16777216
 825 0024 0B93     		str	r3, [sp, #44]
 467:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 1;
 826              		.loc 1 467 3 is_stmt 1 view .LVU223
 467:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 1;
 827              		.loc 1 467 14 is_stmt 0 view .LVU224
 828 0026 0123     		movs	r3, #1
 829 0028 0C93     		str	r3, [sp, #48]
 468:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, &val, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
ARM GAS  /tmp/ccmcLKXV.s 			page 27


 830              		.loc 1 468 3 is_stmt 1 view .LVU225
 468:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, &val, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 831              		.loc 1 468 7 is_stmt 0 view .LVU226
 832 002a 41F28832 		movw	r2, #5000
 833 002e 02A9     		add	r1, sp, #8
 834 0030 0B48     		ldr	r0, .L81
 835 0032 FFF7FEFF 		bl	HAL_QSPI_Command
 836              	.LVL51:
 468:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, &val, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 837              		.loc 1 468 6 view .LVU227
 838 0036 10B1     		cbz	r0, .L80
 468:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, &val, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 839              		.loc 1 468 88 view .LVU228
 840 0038 0120     		movs	r0, #1
 841              	.L76:
 472:Core/Src/quadspi.c **** 
 842              		.loc 1 472 1 view .LVU229
 843 003a 10B0     		add	sp, sp, #64
 844              	.LCFI24:
 845              		.cfi_remember_state
 846              		.cfi_def_cfa_offset 8
 847              		@ sp needed
 848 003c 10BD     		pop	{r4, pc}
 849              	.LVL52:
 850              	.L80:
 851              	.LCFI25:
 852              		.cfi_restore_state
 469:Core/Src/quadspi.c ****   if (sr2) *sr2 = val;
 853              		.loc 1 469 3 is_stmt 1 view .LVU230
 469:Core/Src/quadspi.c ****   if (sr2) *sr2 = val;
 854              		.loc 1 469 7 is_stmt 0 view .LVU231
 855 003e 41F28832 		movw	r2, #5000
 856 0042 0DF10701 		add	r1, sp, #7
 857 0046 0648     		ldr	r0, .L81
 858 0048 FFF7FEFF 		bl	HAL_QSPI_Receive
 859              	.LVL53:
 469:Core/Src/quadspi.c ****   if (sr2) *sr2 = val;
 860              		.loc 1 469 6 view .LVU232
 861 004c 28B9     		cbnz	r0, .L78
 470:Core/Src/quadspi.c ****   return 0;
 862              		.loc 1 470 3 is_stmt 1 view .LVU233
 470:Core/Src/quadspi.c ****   return 0;
 863              		.loc 1 470 6 is_stmt 0 view .LVU234
 864 004e 002C     		cmp	r4, #0
 865 0050 F3D0     		beq	.L76
 470:Core/Src/quadspi.c ****   return 0;
 866              		.loc 1 470 12 is_stmt 1 discriminator 1 view .LVU235
 470:Core/Src/quadspi.c ****   return 0;
 867              		.loc 1 470 17 is_stmt 0 discriminator 1 view .LVU236
 868 0052 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 869 0056 2370     		strb	r3, [r4]
 870 0058 EFE7     		b	.L76
 871              	.L78:
 469:Core/Src/quadspi.c ****   if (sr2) *sr2 = val;
 872              		.loc 1 469 88 view .LVU237
 873 005a 0220     		movs	r0, #2
 874 005c EDE7     		b	.L76
ARM GAS  /tmp/ccmcLKXV.s 			page 28


 875              	.L82:
 876 005e 00BF     		.align	2
 877              	.L81:
 878 0060 00000000 		.word	.LANCHOR2
 879              		.cfi_endproc
 880              	.LFE159:
 882              		.section	.text.QSPI_SetQEBit,"ax",%progbits
 883              		.align	1
 884              		.syntax unified
 885              		.thumb
 886              		.thumb_func
 887              		.fpu fpv5-d16
 889              	QSPI_SetQEBit:
 890              	.LFB161:
 489:Core/Src/quadspi.c **** 
 490:Core/Src/quadspi.c **** static uint8_t QSPI_SetQEBit(void)
 491:Core/Src/quadspi.c **** {
 891              		.loc 1 491 1 is_stmt 1 view -0
 892              		.cfi_startproc
 893              		@ args = 0, pretend = 0, frame = 8
 894              		@ frame_needed = 0, uses_anonymous_args = 0
 895 0000 10B5     		push	{r4, lr}
 896              	.LCFI26:
 897              		.cfi_def_cfa_offset 8
 898              		.cfi_offset 4, -8
 899              		.cfi_offset 14, -4
 900 0002 82B0     		sub	sp, sp, #8
 901              	.LCFI27:
 902              		.cfi_def_cfa_offset 16
 492:Core/Src/quadspi.c **** #if !QSPI_ENABLE_QUAD
 493:Core/Src/quadspi.c ****   return 0;
 494:Core/Src/quadspi.c **** #else
 495:Core/Src/quadspi.c ****   uint8_t sr2;
 903              		.loc 1 495 3 view .LVU239
 496:Core/Src/quadspi.c ****   if (QSPI_ReadStatusReg2(&sr2)) return 1;
 904              		.loc 1 496 3 view .LVU240
 905              		.loc 1 496 7 is_stmt 0 view .LVU241
 906 0004 0DF10700 		add	r0, sp, #7
 907 0008 FFF7FEFF 		bl	QSPI_ReadStatusReg2
 908              	.LVL54:
 909              		.loc 1 496 6 view .LVU242
 910 000c F0B9     		cbnz	r0, .L86
 911 000e 0446     		mov	r4, r0
 497:Core/Src/quadspi.c ****   if ((sr2 & (1U<<1)) == 0U) {
 912              		.loc 1 497 3 is_stmt 1 view .LVU243
 913              		.loc 1 497 12 is_stmt 0 view .LVU244
 914 0010 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
 915              		.loc 1 497 6 view .LVU245
 916 0014 10F0020F 		tst	r0, #2
 917 0018 05D0     		beq	.L91
 918              	.L85:
 498:Core/Src/quadspi.c ****     sr2 |= (1U<<1);
 499:Core/Src/quadspi.c ****     if (QSPI_WriteStatusReg2(sr2)) return 2;
 500:Core/Src/quadspi.c ****     if (QSPI_ReadStatusReg2(&sr2)) return 3;
 501:Core/Src/quadspi.c ****     if ((sr2 & (1U<<1)) == 0U) return 4;
 502:Core/Src/quadspi.c ****   }
 503:Core/Src/quadspi.c ****   qspi_qe_set = 1;
ARM GAS  /tmp/ccmcLKXV.s 			page 29


 919              		.loc 1 503 3 is_stmt 1 view .LVU246
 920              		.loc 1 503 15 is_stmt 0 view .LVU247
 921 001a 0F4B     		ldr	r3, .L92
 922 001c 0122     		movs	r2, #1
 923 001e 1A70     		strb	r2, [r3]
 504:Core/Src/quadspi.c ****   return 0;
 924              		.loc 1 504 3 is_stmt 1 view .LVU248
 925              	.L84:
 505:Core/Src/quadspi.c **** #endif
 506:Core/Src/quadspi.c **** }
 926              		.loc 1 506 1 is_stmt 0 view .LVU249
 927 0020 2046     		mov	r0, r4
 928 0022 02B0     		add	sp, sp, #8
 929              	.LCFI28:
 930              		.cfi_remember_state
 931              		.cfi_def_cfa_offset 8
 932              		@ sp needed
 933 0024 10BD     		pop	{r4, pc}
 934              	.L91:
 935              	.LCFI29:
 936              		.cfi_restore_state
 498:Core/Src/quadspi.c ****     if (QSPI_WriteStatusReg2(sr2)) return 2;
 937              		.loc 1 498 5 is_stmt 1 view .LVU250
 498:Core/Src/quadspi.c ****     if (QSPI_WriteStatusReg2(sr2)) return 2;
 938              		.loc 1 498 9 is_stmt 0 view .LVU251
 939 0026 40F00200 		orr	r0, r0, #2
 940 002a 8DF80700 		strb	r0, [sp, #7]
 499:Core/Src/quadspi.c ****     if (QSPI_ReadStatusReg2(&sr2)) return 3;
 941              		.loc 1 499 5 is_stmt 1 view .LVU252
 499:Core/Src/quadspi.c ****     if (QSPI_ReadStatusReg2(&sr2)) return 3;
 942              		.loc 1 499 9 is_stmt 0 view .LVU253
 943 002e FFF7FEFF 		bl	QSPI_WriteStatusReg2
 944              	.LVL55:
 499:Core/Src/quadspi.c ****     if (QSPI_ReadStatusReg2(&sr2)) return 3;
 945              		.loc 1 499 8 view .LVU254
 946 0032 68B9     		cbnz	r0, .L87
 500:Core/Src/quadspi.c ****     if ((sr2 & (1U<<1)) == 0U) return 4;
 947              		.loc 1 500 5 is_stmt 1 view .LVU255
 500:Core/Src/quadspi.c ****     if ((sr2 & (1U<<1)) == 0U) return 4;
 948              		.loc 1 500 9 is_stmt 0 view .LVU256
 949 0034 0DF10700 		add	r0, sp, #7
 950 0038 FFF7FEFF 		bl	QSPI_ReadStatusReg2
 951              	.LVL56:
 500:Core/Src/quadspi.c ****     if ((sr2 & (1U<<1)) == 0U) return 4;
 952              		.loc 1 500 8 view .LVU257
 953 003c 50B9     		cbnz	r0, .L88
 501:Core/Src/quadspi.c ****   }
 954              		.loc 1 501 5 is_stmt 1 view .LVU258
 501:Core/Src/quadspi.c ****   }
 955              		.loc 1 501 14 is_stmt 0 view .LVU259
 956 003e 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 501:Core/Src/quadspi.c ****   }
 957              		.loc 1 501 8 view .LVU260
 958 0042 13F0020F 		tst	r3, #2
 959 0046 E8D1     		bne	.L85
 501:Core/Src/quadspi.c ****   }
 960              		.loc 1 501 39 view .LVU261
ARM GAS  /tmp/ccmcLKXV.s 			page 30


 961 0048 0424     		movs	r4, #4
 962 004a E9E7     		b	.L84
 963              	.L86:
 496:Core/Src/quadspi.c ****   if ((sr2 & (1U<<1)) == 0U) {
 964              		.loc 1 496 41 view .LVU262
 965 004c 0124     		movs	r4, #1
 966 004e E7E7     		b	.L84
 967              	.L87:
 499:Core/Src/quadspi.c ****     if (QSPI_ReadStatusReg2(&sr2)) return 3;
 968              		.loc 1 499 43 view .LVU263
 969 0050 0224     		movs	r4, #2
 970 0052 E5E7     		b	.L84
 971              	.L88:
 500:Core/Src/quadspi.c ****     if ((sr2 & (1U<<1)) == 0U) return 4;
 972              		.loc 1 500 43 view .LVU264
 973 0054 0324     		movs	r4, #3
 974 0056 E3E7     		b	.L84
 975              	.L93:
 976              		.align	2
 977              	.L92:
 978 0058 00000000 		.word	.LANCHOR3
 979              		.cfi_endproc
 980              	.LFE161:
 982              		.section	.text.QSPI_EnsureQuadReady,"ax",%progbits
 983              		.align	1
 984              		.syntax unified
 985              		.thumb
 986              		.thumb_func
 987              		.fpu fpv5-d16
 989              	QSPI_EnsureQuadReady:
 990              	.LFB150:
 293:Core/Src/quadspi.c **** #if !QSPI_ENABLE_QUAD
 991              		.loc 1 293 1 is_stmt 1 view -0
 992              		.cfi_startproc
 993              		@ args = 0, pretend = 0, frame = 0
 994              		@ frame_needed = 0, uses_anonymous_args = 0
 995 0000 08B5     		push	{r3, lr}
 996              	.LCFI30:
 997              		.cfi_def_cfa_offset 8
 998              		.cfi_offset 3, -8
 999              		.cfi_offset 14, -4
 297:Core/Src/quadspi.c ****     if (QSPI_SetQEBit()) return 1;
 1000              		.loc 1 297 3 view .LVU266
 297:Core/Src/quadspi.c ****     if (QSPI_SetQEBit()) return 1;
 1001              		.loc 1 297 7 is_stmt 0 view .LVU267
 1002 0002 054B     		ldr	r3, .L100
 1003 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 297:Core/Src/quadspi.c ****     if (QSPI_SetQEBit()) return 1;
 1004              		.loc 1 297 6 view .LVU268
 1005 0006 0BB1     		cbz	r3, .L99
 300:Core/Src/quadspi.c **** #endif
 1006              		.loc 1 300 10 view .LVU269
 1007 0008 0020     		movs	r0, #0
 1008              	.L95:
 302:Core/Src/quadspi.c **** 
 1009              		.loc 1 302 1 view .LVU270
 1010 000a 08BD     		pop	{r3, pc}
ARM GAS  /tmp/ccmcLKXV.s 			page 31


 1011              	.L99:
 298:Core/Src/quadspi.c ****   }
 1012              		.loc 1 298 5 is_stmt 1 view .LVU271
 298:Core/Src/quadspi.c ****   }
 1013              		.loc 1 298 9 is_stmt 0 view .LVU272
 1014 000c FFF7FEFF 		bl	QSPI_SetQEBit
 1015              	.LVL57:
 298:Core/Src/quadspi.c ****   }
 1016              		.loc 1 298 8 view .LVU273
 1017 0010 0028     		cmp	r0, #0
 1018 0012 FAD0     		beq	.L95
 298:Core/Src/quadspi.c ****   }
 1019              		.loc 1 298 33 view .LVU274
 1020 0014 0120     		movs	r0, #1
 1021 0016 F8E7     		b	.L95
 1022              	.L101:
 1023              		.align	2
 1024              	.L100:
 1025 0018 00000000 		.word	.LANCHOR3
 1026              		.cfi_endproc
 1027              	.LFE150:
 1029              		.section	.text.QSPI_ReadChunk,"ax",%progbits
 1030              		.align	1
 1031              		.syntax unified
 1032              		.thumb
 1033              		.thumb_func
 1034              		.fpu fpv5-d16
 1036              	QSPI_ReadChunk:
 1037              	.LVL58:
 1038              	.LFB151:
 305:Core/Src/quadspi.c ****   if (length == 0) return 0;
 1039              		.loc 1 305 1 is_stmt 1 view -0
 1040              		.cfi_startproc
 1041              		@ args = 0, pretend = 0, frame = 56
 1042              		@ frame_needed = 0, uses_anonymous_args = 0
 306:Core/Src/quadspi.c ****   if (!data) return 1;
 1043              		.loc 1 306 3 view .LVU276
 306:Core/Src/quadspi.c ****   if (!data) return 1;
 1044              		.loc 1 306 6 is_stmt 0 view .LVU277
 1045 0000 7AB3     		cbz	r2, .L104
 305:Core/Src/quadspi.c ****   if (length == 0) return 0;
 1046              		.loc 1 305 1 view .LVU278
 1047 0002 70B5     		push	{r4, r5, r6, lr}
 1048              	.LCFI31:
 1049              		.cfi_def_cfa_offset 16
 1050              		.cfi_offset 4, -16
 1051              		.cfi_offset 5, -12
 1052              		.cfi_offset 6, -8
 1053              		.cfi_offset 14, -4
 1054 0004 8EB0     		sub	sp, sp, #56
 1055              	.LCFI32:
 1056              		.cfi_def_cfa_offset 72
 1057 0006 0546     		mov	r5, r0
 1058 0008 0C46     		mov	r4, r1
 1059 000a 1646     		mov	r6, r2
 307:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
 1060              		.loc 1 307 3 is_stmt 1 view .LVU279
ARM GAS  /tmp/ccmcLKXV.s 			page 32


 307:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
 1061              		.loc 1 307 6 is_stmt 0 view .LVU280
 1062 000c 59B3     		cbz	r1, .L105
 309:Core/Src/quadspi.c **** #endif
 1063              		.loc 1 309 3 is_stmt 1 view .LVU281
 309:Core/Src/quadspi.c **** #endif
 1064              		.loc 1 309 7 is_stmt 0 view .LVU282
 1065 000e FFF7FEFF 		bl	QSPI_EnsureQuadReady
 1066              	.LVL59:
 309:Core/Src/quadspi.c **** #endif
 1067              		.loc 1 309 6 view .LVU283
 1068 0012 58BB     		cbnz	r0, .L106
 311:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 1069              		.loc 1 311 3 is_stmt 1 view .LVU284
 311:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 1070              		.loc 1 311 23 is_stmt 0 view .LVU285
 1071 0014 3822     		movs	r2, #56
 1072 0016 0021     		movs	r1, #0
 1073 0018 6846     		mov	r0, sp
 1074 001a FFF7FEFF 		bl	memset
 1075              	.LVL60:
 312:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
 1076              		.loc 1 312 3 is_stmt 1 view .LVU286
 312:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
 1077              		.loc 1 312 23 is_stmt 0 view .LVU287
 1078 001e 4FF48073 		mov	r3, #256
 1079 0022 0693     		str	r3, [sp, #24]
 314:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_4_LINES;
 1080              		.loc 1 314 3 is_stmt 1 view .LVU288
 314:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_4_LINES;
 1081              		.loc 1 314 19 is_stmt 0 view .LVU289
 1082 0024 6B23     		movs	r3, #107
 1083 0026 0093     		str	r3, [sp]
 315:Core/Src/quadspi.c ****   cmd.DummyCycles = QSPI_QUAD_DUMMY_CYCLES;
 1084              		.loc 1 315 3 is_stmt 1 view .LVU290
 315:Core/Src/quadspi.c ****   cmd.DummyCycles = QSPI_QUAD_DUMMY_CYCLES;
 1085              		.loc 1 315 16 is_stmt 0 view .LVU291
 1086 0028 4FF04073 		mov	r3, #50331648
 1087 002c 0993     		str	r3, [sp, #36]
 316:Core/Src/quadspi.c **** #else
 1088              		.loc 1 316 3 is_stmt 1 view .LVU292
 316:Core/Src/quadspi.c **** #else
 1089              		.loc 1 316 19 is_stmt 0 view .LVU293
 1090 002e 0823     		movs	r3, #8
 1091 0030 0593     		str	r3, [sp, #20]
 322:Core/Src/quadspi.c ****   cmd.AddressSize = QSPI_ADDRESS_24_BITS;
 1092              		.loc 1 322 3 is_stmt 1 view .LVU294
 322:Core/Src/quadspi.c ****   cmd.AddressSize = QSPI_ADDRESS_24_BITS;
 1093              		.loc 1 322 19 is_stmt 0 view .LVU295
 1094 0032 4FF48063 		mov	r3, #1024
 1095 0036 0793     		str	r3, [sp, #28]
 323:Core/Src/quadspi.c ****   cmd.Address = address;
 1096              		.loc 1 323 3 is_stmt 1 view .LVU296
 323:Core/Src/quadspi.c ****   cmd.Address = address;
 1097              		.loc 1 323 19 is_stmt 0 view .LVU297
 1098 0038 4FF40053 		mov	r3, #8192
 1099 003c 0393     		str	r3, [sp, #12]
ARM GAS  /tmp/ccmcLKXV.s 			page 33


 324:Core/Src/quadspi.c ****   cmd.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 1100              		.loc 1 324 3 is_stmt 1 view .LVU298
 324:Core/Src/quadspi.c ****   cmd.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 1101              		.loc 1 324 15 is_stmt 0 view .LVU299
 1102 003e 0195     		str	r5, [sp, #4]
 325:Core/Src/quadspi.c ****   cmd.DdrMode = QSPI_DDR_MODE_DISABLE;
 1103              		.loc 1 325 3 is_stmt 1 view .LVU300
 326:Core/Src/quadspi.c ****   cmd.DdrHoldHalfCycle = QSPI_DDR_HHC_ANALOG_DELAY;
 1104              		.loc 1 326 3 view .LVU301
 327:Core/Src/quadspi.c ****   cmd.SIOOMode = QSPI_SIOO_INST_EVERY_CMD;
 1105              		.loc 1 327 3 view .LVU302
 328:Core/Src/quadspi.c ****   cmd.NbData = length;
 1106              		.loc 1 328 3 view .LVU303
 329:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 3;
 1107              		.loc 1 329 3 view .LVU304
 329:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 3;
 1108              		.loc 1 329 14 is_stmt 0 view .LVU305
 1109 0040 0A96     		str	r6, [sp, #40]
 330:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, data, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 4;
 1110              		.loc 1 330 3 is_stmt 1 view .LVU306
 330:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, data, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 4;
 1111              		.loc 1 330 7 is_stmt 0 view .LVU307
 1112 0042 41F28832 		movw	r2, #5000
 1113 0046 6946     		mov	r1, sp
 1114 0048 0A48     		ldr	r0, .L113
 1115 004a FFF7FEFF 		bl	HAL_QSPI_Command
 1116              	.LVL61:
 330:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, data, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 4;
 1117              		.loc 1 330 6 view .LVU308
 1118 004e 78B9     		cbnz	r0, .L107
 331:Core/Src/quadspi.c ****   return 0;
 1119              		.loc 1 331 3 is_stmt 1 view .LVU309
 331:Core/Src/quadspi.c ****   return 0;
 1120              		.loc 1 331 7 is_stmt 0 view .LVU310
 1121 0050 41F28832 		movw	r2, #5000
 1122 0054 2146     		mov	r1, r4
 1123 0056 0748     		ldr	r0, .L113
 1124 0058 FFF7FEFF 		bl	HAL_QSPI_Receive
 1125              	.LVL62:
 331:Core/Src/quadspi.c ****   return 0;
 1126              		.loc 1 331 6 view .LVU311
 1127 005c 20B1     		cbz	r0, .L103
 331:Core/Src/quadspi.c ****   return 0;
 1128              		.loc 1 331 88 view .LVU312
 1129 005e 0420     		movs	r0, #4
 1130 0060 02E0     		b	.L103
 1131              	.LVL63:
 1132              	.L104:
 1133              	.LCFI33:
 1134              		.cfi_def_cfa_offset 0
 1135              		.cfi_restore 4
 1136              		.cfi_restore 5
 1137              		.cfi_restore 6
 1138              		.cfi_restore 14
 306:Core/Src/quadspi.c ****   if (!data) return 1;
 1139              		.loc 1 306 27 view .LVU313
 1140 0062 0020     		movs	r0, #0
ARM GAS  /tmp/ccmcLKXV.s 			page 34


 1141              	.LVL64:
 333:Core/Src/quadspi.c **** 
 1142              		.loc 1 333 1 view .LVU314
 1143 0064 7047     		bx	lr
 1144              	.LVL65:
 1145              	.L105:
 1146              	.LCFI34:
 1147              		.cfi_def_cfa_offset 72
 1148              		.cfi_offset 4, -16
 1149              		.cfi_offset 5, -12
 1150              		.cfi_offset 6, -8
 1151              		.cfi_offset 14, -4
 307:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
 1152              		.loc 1 307 21 view .LVU315
 1153 0066 0120     		movs	r0, #1
 1154              	.LVL66:
 1155              	.L103:
 333:Core/Src/quadspi.c **** 
 1156              		.loc 1 333 1 view .LVU316
 1157 0068 0EB0     		add	sp, sp, #56
 1158              	.LCFI35:
 1159              		.cfi_remember_state
 1160              		.cfi_def_cfa_offset 16
 1161              		@ sp needed
 1162 006a 70BD     		pop	{r4, r5, r6, pc}
 1163              	.LVL67:
 1164              	.L106:
 1165              	.LCFI36:
 1166              		.cfi_restore_state
 309:Core/Src/quadspi.c **** #endif
 1167              		.loc 1 309 38 view .LVU317
 1168 006c 0220     		movs	r0, #2
 1169 006e FBE7     		b	.L103
 1170              	.L107:
 330:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, data, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 4;
 1171              		.loc 1 330 88 view .LVU318
 1172 0070 0320     		movs	r0, #3
 1173 0072 F9E7     		b	.L103
 1174              	.L114:
 1175              		.align	2
 1176              	.L113:
 1177 0074 00000000 		.word	.LANCHOR2
 1178              		.cfi_endproc
 1179              	.LFE151:
 1181              		.section	.text.QSPI_ReadStatusReg,"ax",%progbits
 1182              		.align	1
 1183              		.syntax unified
 1184              		.thumb
 1185              		.thumb_func
 1186              		.fpu fpv5-d16
 1188              	QSPI_ReadStatusReg:
 1189              	.LVL68:
 1190              	.LFB158:
 442:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 1191              		.loc 1 442 1 is_stmt 1 view -0
 1192              		.cfi_startproc
 1193              		@ args = 0, pretend = 0, frame = 64
ARM GAS  /tmp/ccmcLKXV.s 			page 35


 1194              		@ frame_needed = 0, uses_anonymous_args = 0
 442:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 1195              		.loc 1 442 1 is_stmt 0 view .LVU320
 1196 0000 10B5     		push	{r4, lr}
 1197              	.LCFI37:
 1198              		.cfi_def_cfa_offset 8
 1199              		.cfi_offset 4, -8
 1200              		.cfi_offset 14, -4
 1201 0002 90B0     		sub	sp, sp, #64
 1202              	.LCFI38:
 1203              		.cfi_def_cfa_offset 72
 1204 0004 0446     		mov	r4, r0
 443:Core/Src/quadspi.c ****   uint8_t val=0;
 1205              		.loc 1 443 3 is_stmt 1 view .LVU321
 443:Core/Src/quadspi.c ****   uint8_t val=0;
 1206              		.loc 1 443 23 is_stmt 0 view .LVU322
 1207 0006 3822     		movs	r2, #56
 1208 0008 0021     		movs	r1, #0
 1209 000a 02A8     		add	r0, sp, #8
 1210              	.LVL69:
 443:Core/Src/quadspi.c ****   uint8_t val=0;
 1211              		.loc 1 443 23 view .LVU323
 1212 000c FFF7FEFF 		bl	memset
 1213              	.LVL70:
 444:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 1214              		.loc 1 444 3 is_stmt 1 view .LVU324
 444:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 1215              		.loc 1 444 11 is_stmt 0 view .LVU325
 1216 0010 0023     		movs	r3, #0
 1217 0012 8DF80730 		strb	r3, [sp, #7]
 445:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_READ_STATUS_REG; /* 0x05 */
 1218              		.loc 1 445 3 is_stmt 1 view .LVU326
 445:Core/Src/quadspi.c ****   cmd.Instruction = W25Q128_CMD_READ_STATUS_REG; /* 0x05 */
 1219              		.loc 1 445 23 is_stmt 0 view .LVU327
 1220 0016 4FF48073 		mov	r3, #256
 1221 001a 0893     		str	r3, [sp, #32]
 446:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_NONE;
 1222              		.loc 1 446 3 is_stmt 1 view .LVU328
 446:Core/Src/quadspi.c ****   cmd.AddressMode = QSPI_ADDRESS_NONE;
 1223              		.loc 1 446 19 is_stmt 0 view .LVU329
 1224 001c 0523     		movs	r3, #5
 1225 001e 0293     		str	r3, [sp, #8]
 447:Core/Src/quadspi.c ****   cmd.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 1226              		.loc 1 447 3 is_stmt 1 view .LVU330
 448:Core/Src/quadspi.c ****   cmd.DataMode = QSPI_DATA_1_LINE;
 1227              		.loc 1 448 3 view .LVU331
 449:Core/Src/quadspi.c ****   cmd.NbData = 1;
 1228              		.loc 1 449 3 view .LVU332
 449:Core/Src/quadspi.c ****   cmd.NbData = 1;
 1229              		.loc 1 449 16 is_stmt 0 view .LVU333
 1230 0020 4FF08073 		mov	r3, #16777216
 1231 0024 0B93     		str	r3, [sp, #44]
 450:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 1;
 1232              		.loc 1 450 3 is_stmt 1 view .LVU334
 450:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 1;
 1233              		.loc 1 450 14 is_stmt 0 view .LVU335
 1234 0026 0123     		movs	r3, #1
ARM GAS  /tmp/ccmcLKXV.s 			page 36


 1235 0028 0C93     		str	r3, [sp, #48]
 451:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, &val, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 1236              		.loc 1 451 3 is_stmt 1 view .LVU336
 451:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, &val, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 1237              		.loc 1 451 7 is_stmt 0 view .LVU337
 1238 002a 41F28832 		movw	r2, #5000
 1239 002e 02A9     		add	r1, sp, #8
 1240 0030 0B48     		ldr	r0, .L121
 1241 0032 FFF7FEFF 		bl	HAL_QSPI_Command
 1242              	.LVL71:
 451:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, &val, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 1243              		.loc 1 451 6 view .LVU338
 1244 0036 10B1     		cbz	r0, .L120
 451:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, &val, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK) return 2;
 1245              		.loc 1 451 88 view .LVU339
 1246 0038 0120     		movs	r0, #1
 1247              	.L116:
 455:Core/Src/quadspi.c **** 
 1248              		.loc 1 455 1 view .LVU340
 1249 003a 10B0     		add	sp, sp, #64
 1250              	.LCFI39:
 1251              		.cfi_remember_state
 1252              		.cfi_def_cfa_offset 8
 1253              		@ sp needed
 1254 003c 10BD     		pop	{r4, pc}
 1255              	.LVL72:
 1256              	.L120:
 1257              	.LCFI40:
 1258              		.cfi_restore_state
 452:Core/Src/quadspi.c ****   if (sr1) *sr1 = val;
 1259              		.loc 1 452 3 is_stmt 1 view .LVU341
 452:Core/Src/quadspi.c ****   if (sr1) *sr1 = val;
 1260              		.loc 1 452 7 is_stmt 0 view .LVU342
 1261 003e 41F28832 		movw	r2, #5000
 1262 0042 0DF10701 		add	r1, sp, #7
 1263 0046 0648     		ldr	r0, .L121
 1264 0048 FFF7FEFF 		bl	HAL_QSPI_Receive
 1265              	.LVL73:
 452:Core/Src/quadspi.c ****   if (sr1) *sr1 = val;
 1266              		.loc 1 452 6 view .LVU343
 1267 004c 28B9     		cbnz	r0, .L118
 453:Core/Src/quadspi.c ****   return 0;
 1268              		.loc 1 453 3 is_stmt 1 view .LVU344
 453:Core/Src/quadspi.c ****   return 0;
 1269              		.loc 1 453 6 is_stmt 0 view .LVU345
 1270 004e 002C     		cmp	r4, #0
 1271 0050 F3D0     		beq	.L116
 453:Core/Src/quadspi.c ****   return 0;
 1272              		.loc 1 453 12 is_stmt 1 discriminator 1 view .LVU346
 453:Core/Src/quadspi.c ****   return 0;
 1273              		.loc 1 453 17 is_stmt 0 discriminator 1 view .LVU347
 1274 0052 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1275 0056 2370     		strb	r3, [r4]
 1276 0058 EFE7     		b	.L116
 1277              	.L118:
 452:Core/Src/quadspi.c ****   if (sr1) *sr1 = val;
 1278              		.loc 1 452 88 view .LVU348
ARM GAS  /tmp/ccmcLKXV.s 			page 37


 1279 005a 0220     		movs	r0, #2
 1280 005c EDE7     		b	.L116
 1281              	.L122:
 1282 005e 00BF     		.align	2
 1283              	.L121:
 1284 0060 00000000 		.word	.LANCHOR2
 1285              		.cfi_endproc
 1286              	.LFE158:
 1288              		.section	.text.QSPI_EnableMemoryMappedQuad,"ax",%progbits
 1289              		.align	1
 1290              		.syntax unified
 1291              		.thumb
 1292              		.thumb_func
 1293              		.fpu fpv5-d16
 1295              	QSPI_EnableMemoryMappedQuad:
 1296              	.LFB157:
 416:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
 1297              		.loc 1 416 1 is_stmt 1 view -0
 1298              		.cfi_startproc
 1299              		@ args = 0, pretend = 0, frame = 64
 1300              		@ frame_needed = 0, uses_anonymous_args = 0
 1301 0000 00B5     		push	{lr}
 1302              	.LCFI41:
 1303              		.cfi_def_cfa_offset 4
 1304              		.cfi_offset 14, -4
 1305 0002 91B0     		sub	sp, sp, #68
 1306              	.LCFI42:
 1307              		.cfi_def_cfa_offset 72
 419:Core/Src/quadspi.c ****   QSPI_CommandTypeDef sCommand = {0};
 1308              		.loc 1 419 3 view .LVU350
 419:Core/Src/quadspi.c ****   QSPI_CommandTypeDef sCommand = {0};
 1309              		.loc 1 419 7 is_stmt 0 view .LVU351
 1310 0004 FFF7FEFF 		bl	QSPI_EnsureQuadReady
 1311              	.LVL74:
 419:Core/Src/quadspi.c ****   QSPI_CommandTypeDef sCommand = {0};
 1312              		.loc 1 419 6 view .LVU352
 1313 0008 18B1     		cbz	r0, .L128
 419:Core/Src/quadspi.c ****   QSPI_CommandTypeDef sCommand = {0};
 1314              		.loc 1 419 38 view .LVU353
 1315 000a 0120     		movs	r0, #1
 1316              	.L124:
 439:Core/Src/quadspi.c **** 
 1317              		.loc 1 439 1 view .LVU354
 1318 000c 11B0     		add	sp, sp, #68
 1319              	.LCFI43:
 1320              		.cfi_remember_state
 1321              		.cfi_def_cfa_offset 4
 1322              		@ sp needed
 1323 000e 5DF804FB 		ldr	pc, [sp], #4
 1324              	.L128:
 1325              	.LCFI44:
 1326              		.cfi_restore_state
 420:Core/Src/quadspi.c ****   QSPI_MemoryMappedTypeDef sMemMappedCfg = {0};
 1327              		.loc 1 420 3 is_stmt 1 view .LVU355
 420:Core/Src/quadspi.c ****   QSPI_MemoryMappedTypeDef sMemMappedCfg = {0};
 1328              		.loc 1 420 23 is_stmt 0 view .LVU356
 1329 0012 3822     		movs	r2, #56
ARM GAS  /tmp/ccmcLKXV.s 			page 38


 1330 0014 0021     		movs	r1, #0
 1331 0016 02A8     		add	r0, sp, #8
 1332 0018 FFF7FEFF 		bl	memset
 1333              	.LVL75:
 421:Core/Src/quadspi.c ****   /* Fast Read Quad Output 0x6B: Instruction(1) + Addr(3) + Dummy + Data(4 lines) */
 1334              		.loc 1 421 3 is_stmt 1 view .LVU357
 421:Core/Src/quadspi.c ****   /* Fast Read Quad Output 0x6B: Instruction(1) + Addr(3) + Dummy + Data(4 lines) */
 1335              		.loc 1 421 28 is_stmt 0 view .LVU358
 1336 001c 0023     		movs	r3, #0
 1337 001e 0093     		str	r3, [sp]
 1338 0020 0193     		str	r3, [sp, #4]
 423:Core/Src/quadspi.c ****   sCommand.Instruction = 0x6B; /* FAST_READ_QUAD_OUTPUT */
 1339              		.loc 1 423 3 is_stmt 1 view .LVU359
 423:Core/Src/quadspi.c ****   sCommand.Instruction = 0x6B; /* FAST_READ_QUAD_OUTPUT */
 1340              		.loc 1 423 28 is_stmt 0 view .LVU360
 1341 0022 4FF48073 		mov	r3, #256
 1342 0026 0893     		str	r3, [sp, #32]
 424:Core/Src/quadspi.c ****   sCommand.AddressMode = QSPI_ADDRESS_1_LINE; /* address still single line for this mode */
 1343              		.loc 1 424 3 is_stmt 1 view .LVU361
 424:Core/Src/quadspi.c ****   sCommand.AddressMode = QSPI_ADDRESS_1_LINE; /* address still single line for this mode */
 1344              		.loc 1 424 24 is_stmt 0 view .LVU362
 1345 0028 6B23     		movs	r3, #107
 1346 002a 0293     		str	r3, [sp, #8]
 425:Core/Src/quadspi.c ****   sCommand.AddressSize = QSPI_ADDRESS_24_BITS;
 1347              		.loc 1 425 3 is_stmt 1 view .LVU363
 425:Core/Src/quadspi.c ****   sCommand.AddressSize = QSPI_ADDRESS_24_BITS;
 1348              		.loc 1 425 24 is_stmt 0 view .LVU364
 1349 002c 4FF48063 		mov	r3, #1024
 1350 0030 0993     		str	r3, [sp, #36]
 426:Core/Src/quadspi.c ****   sCommand.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 1351              		.loc 1 426 3 is_stmt 1 view .LVU365
 426:Core/Src/quadspi.c ****   sCommand.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 1352              		.loc 1 426 24 is_stmt 0 view .LVU366
 1353 0032 4FF40053 		mov	r3, #8192
 1354 0036 0593     		str	r3, [sp, #20]
 427:Core/Src/quadspi.c ****   sCommand.DataMode = QSPI_DATA_4_LINES;
 1355              		.loc 1 427 3 is_stmt 1 view .LVU367
 428:Core/Src/quadspi.c ****   sCommand.DummyCycles = QSPI_QUAD_DUMMY_CYCLES;
 1356              		.loc 1 428 3 view .LVU368
 428:Core/Src/quadspi.c ****   sCommand.DummyCycles = QSPI_QUAD_DUMMY_CYCLES;
 1357              		.loc 1 428 21 is_stmt 0 view .LVU369
 1358 0038 4FF04073 		mov	r3, #50331648
 1359 003c 0B93     		str	r3, [sp, #44]
 429:Core/Src/quadspi.c ****   sCommand.DdrMode = QSPI_DDR_MODE_DISABLE;
 1360              		.loc 1 429 3 is_stmt 1 view .LVU370
 429:Core/Src/quadspi.c ****   sCommand.DdrMode = QSPI_DDR_MODE_DISABLE;
 1361              		.loc 1 429 24 is_stmt 0 view .LVU371
 1362 003e 0823     		movs	r3, #8
 1363 0040 0793     		str	r3, [sp, #28]
 430:Core/Src/quadspi.c ****   sCommand.DdrHoldHalfCycle = QSPI_DDR_HHC_ANALOG_DELAY;
 1364              		.loc 1 430 3 is_stmt 1 view .LVU372
 431:Core/Src/quadspi.c ****   sCommand.SIOOMode = QSPI_SIOO_INST_ONLY_FIRST_CMD;
 1365              		.loc 1 431 3 view .LVU373
 432:Core/Src/quadspi.c ****   sMemMappedCfg.TimeOutActivation = QSPI_TIMEOUT_COUNTER_DISABLE;
 1366              		.loc 1 432 3 view .LVU374
 432:Core/Src/quadspi.c ****   sMemMappedCfg.TimeOutActivation = QSPI_TIMEOUT_COUNTER_DISABLE;
 1367              		.loc 1 432 21 is_stmt 0 view .LVU375
ARM GAS  /tmp/ccmcLKXV.s 			page 39


 1368 0042 4FF08053 		mov	r3, #268435456
 1369 0046 0F93     		str	r3, [sp, #60]
 433:Core/Src/quadspi.c ****   if (HAL_QSPI_MemoryMapped(&hqspi, &sCommand, &sMemMappedCfg) != HAL_OK) return 2;
 1370              		.loc 1 433 3 is_stmt 1 view .LVU376
 434:Core/Src/quadspi.c ****   return 0;
 1371              		.loc 1 434 3 view .LVU377
 434:Core/Src/quadspi.c ****   return 0;
 1372              		.loc 1 434 7 is_stmt 0 view .LVU378
 1373 0048 6A46     		mov	r2, sp
 1374 004a 02A9     		add	r1, sp, #8
 1375 004c 0348     		ldr	r0, .L129
 1376 004e FFF7FEFF 		bl	HAL_QSPI_MemoryMapped
 1377              	.LVL76:
 434:Core/Src/quadspi.c ****   return 0;
 1378              		.loc 1 434 6 view .LVU379
 1379 0052 0028     		cmp	r0, #0
 1380 0054 DAD0     		beq	.L124
 434:Core/Src/quadspi.c ****   return 0;
 1381              		.loc 1 434 82 view .LVU380
 1382 0056 0220     		movs	r0, #2
 1383 0058 D8E7     		b	.L124
 1384              	.L130:
 1385 005a 00BF     		.align	2
 1386              	.L129:
 1387 005c 00000000 		.word	.LANCHOR2
 1388              		.cfi_endproc
 1389              	.LFE157:
 1391              		.section	.text.HAL_QSPI_MspInit,"ax",%progbits
 1392              		.align	1
 1393              		.global	HAL_QSPI_MspInit
 1394              		.syntax unified
 1395              		.thumb
 1396              		.thumb_func
 1397              		.fpu fpv5-d16
 1399              	HAL_QSPI_MspInit:
 1400              	.LVL77:
 1401              	.LFB145:
 116:Core/Src/quadspi.c **** 
 1402              		.loc 1 116 1 is_stmt 1 view -0
 1403              		.cfi_startproc
 1404              		@ args = 0, pretend = 0, frame = 240
 1405              		@ frame_needed = 0, uses_anonymous_args = 0
 116:Core/Src/quadspi.c **** 
 1406              		.loc 1 116 1 is_stmt 0 view .LVU382
 1407 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1408              	.LCFI45:
 1409              		.cfi_def_cfa_offset 24
 1410              		.cfi_offset 4, -24
 1411              		.cfi_offset 5, -20
 1412              		.cfi_offset 6, -16
 1413              		.cfi_offset 7, -12
 1414              		.cfi_offset 8, -8
 1415              		.cfi_offset 14, -4
 1416 0004 BCB0     		sub	sp, sp, #240
 1417              	.LCFI46:
 1418              		.cfi_def_cfa_offset 264
 1419 0006 0446     		mov	r4, r0
ARM GAS  /tmp/ccmcLKXV.s 			page 40


 118:Core/Src/quadspi.c ****   RCC_PeriphCLKInitTypeDef PeriphClkInitStruct = {0};
 1420              		.loc 1 118 3 is_stmt 1 view .LVU383
 118:Core/Src/quadspi.c ****   RCC_PeriphCLKInitTypeDef PeriphClkInitStruct = {0};
 1421              		.loc 1 118 20 is_stmt 0 view .LVU384
 1422 0008 0021     		movs	r1, #0
 1423 000a 3791     		str	r1, [sp, #220]
 1424 000c 3891     		str	r1, [sp, #224]
 1425 000e 3991     		str	r1, [sp, #228]
 1426 0010 3A91     		str	r1, [sp, #232]
 1427 0012 3B91     		str	r1, [sp, #236]
 119:Core/Src/quadspi.c ****   if(qspiHandle->Instance==QUADSPI)
 1428              		.loc 1 119 3 is_stmt 1 view .LVU385
 119:Core/Src/quadspi.c ****   if(qspiHandle->Instance==QUADSPI)
 1429              		.loc 1 119 28 is_stmt 0 view .LVU386
 1430 0014 C022     		movs	r2, #192
 1431 0016 06A8     		add	r0, sp, #24
 1432              	.LVL78:
 119:Core/Src/quadspi.c ****   if(qspiHandle->Instance==QUADSPI)
 1433              		.loc 1 119 28 view .LVU387
 1434 0018 FFF7FEFF 		bl	memset
 1435              	.LVL79:
 120:Core/Src/quadspi.c ****   {
 1436              		.loc 1 120 3 is_stmt 1 view .LVU388
 120:Core/Src/quadspi.c ****   {
 1437              		.loc 1 120 16 is_stmt 0 view .LVU389
 1438 001c 2268     		ldr	r2, [r4]
 120:Core/Src/quadspi.c ****   {
 1439              		.loc 1 120 5 view .LVU390
 1440 001e 574B     		ldr	r3, .L141
 1441 0020 9A42     		cmp	r2, r3
 1442 0022 02D0     		beq	.L137
 1443              	.L131:
 211:Core/Src/quadspi.c **** 
 1444              		.loc 1 211 1 view .LVU391
 1445 0024 3CB0     		add	sp, sp, #240
 1446              	.LCFI47:
 1447              		.cfi_remember_state
 1448              		.cfi_def_cfa_offset 24
 1449              		@ sp needed
 1450 0026 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1451              	.LVL80:
 1452              	.L137:
 1453              	.LCFI48:
 1454              		.cfi_restore_state
 128:Core/Src/quadspi.c ****     PeriphClkInitStruct.QspiClockSelection = RCC_QSPICLKSOURCE_D1HCLK;
 1455              		.loc 1 128 5 is_stmt 1 view .LVU392
 128:Core/Src/quadspi.c ****     PeriphClkInitStruct.QspiClockSelection = RCC_QSPICLKSOURCE_D1HCLK;
 1456              		.loc 1 128 46 is_stmt 0 view .LVU393
 1457 002a 4FF00072 		mov	r2, #33554432
 1458 002e 0023     		movs	r3, #0
 1459 0030 CDE90623 		strd	r2, [sp, #24]
 129:Core/Src/quadspi.c ****     if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInitStruct) != HAL_OK)
 1460              		.loc 1 129 5 is_stmt 1 view .LVU394
 130:Core/Src/quadspi.c ****     {
 1461              		.loc 1 130 5 view .LVU395
 130:Core/Src/quadspi.c ****     {
 1462              		.loc 1 130 9 is_stmt 0 view .LVU396
ARM GAS  /tmp/ccmcLKXV.s 			page 41


 1463 0034 06A8     		add	r0, sp, #24
 1464 0036 FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 1465              	.LVL81:
 130:Core/Src/quadspi.c ****     {
 1466              		.loc 1 130 8 view .LVU397
 1467 003a 0028     		cmp	r0, #0
 1468 003c 40F09480 		bne	.L138
 1469              	.L133:
 136:Core/Src/quadspi.c **** 
 1470              		.loc 1 136 5 is_stmt 1 view .LVU398
 1471              	.LBB9:
 136:Core/Src/quadspi.c **** 
 1472              		.loc 1 136 5 view .LVU399
 136:Core/Src/quadspi.c **** 
 1473              		.loc 1 136 5 view .LVU400
 1474 0040 4F4B     		ldr	r3, .L141+4
 1475 0042 D3F8D420 		ldr	r2, [r3, #212]
 1476 0046 42F48042 		orr	r2, r2, #16384
 1477 004a C3F8D420 		str	r2, [r3, #212]
 136:Core/Src/quadspi.c **** 
 1478              		.loc 1 136 5 view .LVU401
 1479 004e D3F8D420 		ldr	r2, [r3, #212]
 1480 0052 02F48042 		and	r2, r2, #16384
 1481 0056 0192     		str	r2, [sp, #4]
 136:Core/Src/quadspi.c **** 
 1482              		.loc 1 136 5 view .LVU402
 1483 0058 019A     		ldr	r2, [sp, #4]
 1484              	.LBE9:
 136:Core/Src/quadspi.c **** 
 1485              		.loc 1 136 5 view .LVU403
 138:Core/Src/quadspi.c ****     __HAL_RCC_GPIOG_CLK_ENABLE();
 1486              		.loc 1 138 5 view .LVU404
 1487              	.LBB10:
 138:Core/Src/quadspi.c ****     __HAL_RCC_GPIOG_CLK_ENABLE();
 1488              		.loc 1 138 5 view .LVU405
 138:Core/Src/quadspi.c ****     __HAL_RCC_GPIOG_CLK_ENABLE();
 1489              		.loc 1 138 5 view .LVU406
 1490 005a D3F8E020 		ldr	r2, [r3, #224]
 1491 005e 42F01002 		orr	r2, r2, #16
 1492 0062 C3F8E020 		str	r2, [r3, #224]
 138:Core/Src/quadspi.c ****     __HAL_RCC_GPIOG_CLK_ENABLE();
 1493              		.loc 1 138 5 view .LVU407
 1494 0066 D3F8E020 		ldr	r2, [r3, #224]
 1495 006a 02F01002 		and	r2, r2, #16
 1496 006e 0292     		str	r2, [sp, #8]
 138:Core/Src/quadspi.c ****     __HAL_RCC_GPIOG_CLK_ENABLE();
 1497              		.loc 1 138 5 view .LVU408
 1498 0070 029A     		ldr	r2, [sp, #8]
 1499              	.LBE10:
 138:Core/Src/quadspi.c ****     __HAL_RCC_GPIOG_CLK_ENABLE();
 1500              		.loc 1 138 5 view .LVU409
 139:Core/Src/quadspi.c ****     __HAL_RCC_GPIOF_CLK_ENABLE();
 1501              		.loc 1 139 5 view .LVU410
 1502              	.LBB11:
 139:Core/Src/quadspi.c ****     __HAL_RCC_GPIOF_CLK_ENABLE();
 1503              		.loc 1 139 5 view .LVU411
 139:Core/Src/quadspi.c ****     __HAL_RCC_GPIOF_CLK_ENABLE();
ARM GAS  /tmp/ccmcLKXV.s 			page 42


 1504              		.loc 1 139 5 view .LVU412
 1505 0072 D3F8E020 		ldr	r2, [r3, #224]
 1506 0076 42F04002 		orr	r2, r2, #64
 1507 007a C3F8E020 		str	r2, [r3, #224]
 139:Core/Src/quadspi.c ****     __HAL_RCC_GPIOF_CLK_ENABLE();
 1508              		.loc 1 139 5 view .LVU413
 1509 007e D3F8E020 		ldr	r2, [r3, #224]
 1510 0082 02F04002 		and	r2, r2, #64
 1511 0086 0392     		str	r2, [sp, #12]
 139:Core/Src/quadspi.c ****     __HAL_RCC_GPIOF_CLK_ENABLE();
 1512              		.loc 1 139 5 view .LVU414
 1513 0088 039A     		ldr	r2, [sp, #12]
 1514              	.LBE11:
 139:Core/Src/quadspi.c ****     __HAL_RCC_GPIOF_CLK_ENABLE();
 1515              		.loc 1 139 5 view .LVU415
 140:Core/Src/quadspi.c ****     __HAL_RCC_GPIOD_CLK_ENABLE();
 1516              		.loc 1 140 5 view .LVU416
 1517              	.LBB12:
 140:Core/Src/quadspi.c ****     __HAL_RCC_GPIOD_CLK_ENABLE();
 1518              		.loc 1 140 5 view .LVU417
 140:Core/Src/quadspi.c ****     __HAL_RCC_GPIOD_CLK_ENABLE();
 1519              		.loc 1 140 5 view .LVU418
 1520 008a D3F8E020 		ldr	r2, [r3, #224]
 1521 008e 42F02002 		orr	r2, r2, #32
 1522 0092 C3F8E020 		str	r2, [r3, #224]
 140:Core/Src/quadspi.c ****     __HAL_RCC_GPIOD_CLK_ENABLE();
 1523              		.loc 1 140 5 view .LVU419
 1524 0096 D3F8E020 		ldr	r2, [r3, #224]
 1525 009a 02F02002 		and	r2, r2, #32
 1526 009e 0492     		str	r2, [sp, #16]
 140:Core/Src/quadspi.c ****     __HAL_RCC_GPIOD_CLK_ENABLE();
 1527              		.loc 1 140 5 view .LVU420
 1528 00a0 049A     		ldr	r2, [sp, #16]
 1529              	.LBE12:
 140:Core/Src/quadspi.c ****     __HAL_RCC_GPIOD_CLK_ENABLE();
 1530              		.loc 1 140 5 view .LVU421
 141:Core/Src/quadspi.c ****     /**QUADSPI GPIO Configuration
 1531              		.loc 1 141 5 view .LVU422
 1532              	.LBB13:
 141:Core/Src/quadspi.c ****     /**QUADSPI GPIO Configuration
 1533              		.loc 1 141 5 view .LVU423
 141:Core/Src/quadspi.c ****     /**QUADSPI GPIO Configuration
 1534              		.loc 1 141 5 view .LVU424
 1535 00a2 D3F8E020 		ldr	r2, [r3, #224]
 1536 00a6 42F00802 		orr	r2, r2, #8
 1537 00aa C3F8E020 		str	r2, [r3, #224]
 141:Core/Src/quadspi.c ****     /**QUADSPI GPIO Configuration
 1538              		.loc 1 141 5 view .LVU425
 1539 00ae D3F8E030 		ldr	r3, [r3, #224]
 1540 00b2 03F00803 		and	r3, r3, #8
 1541 00b6 0593     		str	r3, [sp, #20]
 141:Core/Src/quadspi.c ****     /**QUADSPI GPIO Configuration
 1542              		.loc 1 141 5 view .LVU426
 1543 00b8 059B     		ldr	r3, [sp, #20]
 1544              	.LBE13:
 141:Core/Src/quadspi.c ****     /**QUADSPI GPIO Configuration
 1545              		.loc 1 141 5 view .LVU427
ARM GAS  /tmp/ccmcLKXV.s 			page 43


 150:Core/Src/quadspi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 1546              		.loc 1 150 5 view .LVU428
 150:Core/Src/quadspi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 1547              		.loc 1 150 25 is_stmt 0 view .LVU429
 1548 00ba 0423     		movs	r3, #4
 1549 00bc 3793     		str	r3, [sp, #220]
 151:Core/Src/quadspi.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 1550              		.loc 1 151 5 is_stmt 1 view .LVU430
 151:Core/Src/quadspi.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 1551              		.loc 1 151 26 is_stmt 0 view .LVU431
 1552 00be 0226     		movs	r6, #2
 1553 00c0 3896     		str	r6, [sp, #224]
 152:Core/Src/quadspi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 1554              		.loc 1 152 5 is_stmt 1 view .LVU432
 152:Core/Src/quadspi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 1555              		.loc 1 152 26 is_stmt 0 view .LVU433
 1556 00c2 0025     		movs	r5, #0
 1557 00c4 3995     		str	r5, [sp, #228]
 153:Core/Src/quadspi.c ****     GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
 1558              		.loc 1 153 5 is_stmt 1 view .LVU434
 153:Core/Src/quadspi.c ****     GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
 1559              		.loc 1 153 27 is_stmt 0 view .LVU435
 1560 00c6 0327     		movs	r7, #3
 1561 00c8 3A97     		str	r7, [sp, #232]
 154:Core/Src/quadspi.c ****     HAL_GPIO_Init(GPIOE, &GPIO_InitStruct);
 1562              		.loc 1 154 5 is_stmt 1 view .LVU436
 154:Core/Src/quadspi.c ****     HAL_GPIO_Init(GPIOE, &GPIO_InitStruct);
 1563              		.loc 1 154 31 is_stmt 0 view .LVU437
 1564 00ca 4FF00908 		mov	r8, #9
 1565 00ce CDF8EC80 		str	r8, [sp, #236]
 155:Core/Src/quadspi.c **** 
 1566              		.loc 1 155 5 is_stmt 1 view .LVU438
 1567 00d2 37A9     		add	r1, sp, #220
 1568 00d4 2B48     		ldr	r0, .L141+8
 1569 00d6 FFF7FEFF 		bl	HAL_GPIO_Init
 1570              	.LVL82:
 157:Core/Src/quadspi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 1571              		.loc 1 157 5 view .LVU439
 157:Core/Src/quadspi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 1572              		.loc 1 157 25 is_stmt 0 view .LVU440
 1573 00da 4023     		movs	r3, #64
 1574 00dc 3793     		str	r3, [sp, #220]
 158:Core/Src/quadspi.c ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 1575              		.loc 1 158 5 is_stmt 1 view .LVU441
 158:Core/Src/quadspi.c ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 1576              		.loc 1 158 26 is_stmt 0 view .LVU442
 1577 00de 3896     		str	r6, [sp, #224]
 159:Core/Src/quadspi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 1578              		.loc 1 159 5 is_stmt 1 view .LVU443
 159:Core/Src/quadspi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 1579              		.loc 1 159 26 is_stmt 0 view .LVU444
 1580 00e0 0123     		movs	r3, #1
 1581 00e2 3993     		str	r3, [sp, #228]
 160:Core/Src/quadspi.c ****     GPIO_InitStruct.Alternate = GPIO_AF10_QUADSPI;
 1582              		.loc 1 160 5 is_stmt 1 view .LVU445
 160:Core/Src/quadspi.c ****     GPIO_InitStruct.Alternate = GPIO_AF10_QUADSPI;
 1583              		.loc 1 160 27 is_stmt 0 view .LVU446
ARM GAS  /tmp/ccmcLKXV.s 			page 44


 1584 00e4 3A97     		str	r7, [sp, #232]
 161:Core/Src/quadspi.c ****     HAL_GPIO_Init(GPIOG, &GPIO_InitStruct);
 1585              		.loc 1 161 5 is_stmt 1 view .LVU447
 161:Core/Src/quadspi.c ****     HAL_GPIO_Init(GPIOG, &GPIO_InitStruct);
 1586              		.loc 1 161 31 is_stmt 0 view .LVU448
 1587 00e6 0A23     		movs	r3, #10
 1588 00e8 3B93     		str	r3, [sp, #236]
 162:Core/Src/quadspi.c **** 
 1589              		.loc 1 162 5 is_stmt 1 view .LVU449
 1590 00ea 37A9     		add	r1, sp, #220
 1591 00ec 2648     		ldr	r0, .L141+12
 1592 00ee FFF7FEFF 		bl	HAL_GPIO_Init
 1593              	.LVL83:
 164:Core/Src/quadspi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 1594              		.loc 1 164 5 view .LVU450
 164:Core/Src/quadspi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 1595              		.loc 1 164 25 is_stmt 0 view .LVU451
 1596 00f2 4FF48063 		mov	r3, #1024
 1597 00f6 3793     		str	r3, [sp, #220]
 165:Core/Src/quadspi.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 1598              		.loc 1 165 5 is_stmt 1 view .LVU452
 165:Core/Src/quadspi.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 1599              		.loc 1 165 26 is_stmt 0 view .LVU453
 1600 00f8 3896     		str	r6, [sp, #224]
 166:Core/Src/quadspi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 1601              		.loc 1 166 5 is_stmt 1 view .LVU454
 166:Core/Src/quadspi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 1602              		.loc 1 166 26 is_stmt 0 view .LVU455
 1603 00fa 3995     		str	r5, [sp, #228]
 167:Core/Src/quadspi.c ****     GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
 1604              		.loc 1 167 5 is_stmt 1 view .LVU456
 167:Core/Src/quadspi.c ****     GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
 1605              		.loc 1 167 27 is_stmt 0 view .LVU457
 1606 00fc 3A97     		str	r7, [sp, #232]
 168:Core/Src/quadspi.c ****     HAL_GPIO_Init(GPIOF, &GPIO_InitStruct);
 1607              		.loc 1 168 5 is_stmt 1 view .LVU458
 168:Core/Src/quadspi.c ****     HAL_GPIO_Init(GPIOF, &GPIO_InitStruct);
 1608              		.loc 1 168 31 is_stmt 0 view .LVU459
 1609 00fe CDF8EC80 		str	r8, [sp, #236]
 169:Core/Src/quadspi.c **** 
 1610              		.loc 1 169 5 is_stmt 1 view .LVU460
 1611 0102 37A9     		add	r1, sp, #220
 1612 0104 2148     		ldr	r0, .L141+16
 1613 0106 FFF7FEFF 		bl	HAL_GPIO_Init
 1614              	.LVL84:
 171:Core/Src/quadspi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 1615              		.loc 1 171 5 view .LVU461
 171:Core/Src/quadspi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 1616              		.loc 1 171 25 is_stmt 0 view .LVU462
 1617 010a 4FF46053 		mov	r3, #14336
 1618 010e 3793     		str	r3, [sp, #220]
 172:Core/Src/quadspi.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 1619              		.loc 1 172 5 is_stmt 1 view .LVU463
 172:Core/Src/quadspi.c ****     GPIO_InitStruct.Pull = GPIO_NOPULL;
 1620              		.loc 1 172 26 is_stmt 0 view .LVU464
 1621 0110 3896     		str	r6, [sp, #224]
 173:Core/Src/quadspi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
ARM GAS  /tmp/ccmcLKXV.s 			page 45


 1622              		.loc 1 173 5 is_stmt 1 view .LVU465
 173:Core/Src/quadspi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 1623              		.loc 1 173 26 is_stmt 0 view .LVU466
 1624 0112 3995     		str	r5, [sp, #228]
 174:Core/Src/quadspi.c ****     GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
 1625              		.loc 1 174 5 is_stmt 1 view .LVU467
 174:Core/Src/quadspi.c ****     GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
 1626              		.loc 1 174 27 is_stmt 0 view .LVU468
 1627 0114 3A97     		str	r7, [sp, #232]
 175:Core/Src/quadspi.c ****     HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);
 1628              		.loc 1 175 5 is_stmt 1 view .LVU469
 175:Core/Src/quadspi.c ****     HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);
 1629              		.loc 1 175 31 is_stmt 0 view .LVU470
 1630 0116 CDF8EC80 		str	r8, [sp, #236]
 176:Core/Src/quadspi.c **** 
 1631              		.loc 1 176 5 is_stmt 1 view .LVU471
 1632 011a 37A9     		add	r1, sp, #220
 1633 011c 1C48     		ldr	r0, .L141+20
 1634 011e FFF7FEFF 		bl	HAL_GPIO_Init
 1635              	.LVL85:
 180:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.Request = MDMA_REQUEST_QUADSPI_FIFO_TH;
 1636              		.loc 1 180 5 view .LVU472
 180:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.Request = MDMA_REQUEST_QUADSPI_FIFO_TH;
 1637              		.loc 1 180 36 is_stmt 0 view .LVU473
 1638 0122 1C48     		ldr	r0, .L141+24
 1639 0124 1C4B     		ldr	r3, .L141+28
 1640 0126 0360     		str	r3, [r0]
 181:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.TransferTriggerMode = MDMA_BUFFER_TRANSFER;
 1641              		.loc 1 181 5 is_stmt 1 view .LVU474
 181:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.TransferTriggerMode = MDMA_BUFFER_TRANSFER;
 1642              		.loc 1 181 40 is_stmt 0 view .LVU475
 1643 0128 1623     		movs	r3, #22
 1644 012a 4360     		str	r3, [r0, #4]
 182:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.Priority = MDMA_PRIORITY_LOW;
 1645              		.loc 1 182 5 is_stmt 1 view .LVU476
 182:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.Priority = MDMA_PRIORITY_LOW;
 1646              		.loc 1 182 52 is_stmt 0 view .LVU477
 1647 012c 8560     		str	r5, [r0, #8]
 183:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.Endianness = MDMA_LITTLE_ENDIANNESS_PRESERVE;
 1648              		.loc 1 183 5 is_stmt 1 view .LVU478
 183:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.Endianness = MDMA_LITTLE_ENDIANNESS_PRESERVE;
 1649              		.loc 1 183 41 is_stmt 0 view .LVU479
 1650 012e C560     		str	r5, [r0, #12]
 184:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.SourceInc = MDMA_SRC_INC_BYTE;
 1651              		.loc 1 184 5 is_stmt 1 view .LVU480
 184:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.SourceInc = MDMA_SRC_INC_BYTE;
 1652              		.loc 1 184 43 is_stmt 0 view .LVU481
 1653 0130 0561     		str	r5, [r0, #16]
 185:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DestinationInc = MDMA_DEST_INC_BYTE;
 1654              		.loc 1 185 5 is_stmt 1 view .LVU482
 185:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DestinationInc = MDMA_DEST_INC_BYTE;
 1655              		.loc 1 185 42 is_stmt 0 view .LVU483
 1656 0132 4661     		str	r6, [r0, #20]
 186:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.SourceDataSize = MDMA_SRC_DATASIZE_BYTE;
 1657              		.loc 1 186 5 is_stmt 1 view .LVU484
 186:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.SourceDataSize = MDMA_SRC_DATASIZE_BYTE;
 1658              		.loc 1 186 47 is_stmt 0 view .LVU485
ARM GAS  /tmp/ccmcLKXV.s 			page 46


 1659 0134 0823     		movs	r3, #8
 1660 0136 8361     		str	r3, [r0, #24]
 187:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DestDataSize = MDMA_DEST_DATASIZE_BYTE;
 1661              		.loc 1 187 5 is_stmt 1 view .LVU486
 187:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DestDataSize = MDMA_DEST_DATASIZE_BYTE;
 1662              		.loc 1 187 47 is_stmt 0 view .LVU487
 1663 0138 C561     		str	r5, [r0, #28]
 188:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DataAlignment = MDMA_DATAALIGN_PACKENABLE;
 1664              		.loc 1 188 5 is_stmt 1 view .LVU488
 188:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DataAlignment = MDMA_DATAALIGN_PACKENABLE;
 1665              		.loc 1 188 45 is_stmt 0 view .LVU489
 1666 013a 0562     		str	r5, [r0, #32]
 189:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.BufferTransferLength = 32;
 1667              		.loc 1 189 5 is_stmt 1 view .LVU490
 189:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.BufferTransferLength = 32;
 1668              		.loc 1 189 46 is_stmt 0 view .LVU491
 1669 013c 4FF00073 		mov	r3, #33554432
 1670 0140 4362     		str	r3, [r0, #36]
 190:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.SourceBurst = MDMA_SOURCE_BURST_SINGLE;
 1671              		.loc 1 190 5 is_stmt 1 view .LVU492
 190:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.SourceBurst = MDMA_SOURCE_BURST_SINGLE;
 1672              		.loc 1 190 53 is_stmt 0 view .LVU493
 1673 0142 2023     		movs	r3, #32
 1674 0144 8362     		str	r3, [r0, #40]
 191:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DestBurst = MDMA_DEST_BURST_SINGLE;
 1675              		.loc 1 191 5 is_stmt 1 view .LVU494
 191:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DestBurst = MDMA_DEST_BURST_SINGLE;
 1676              		.loc 1 191 44 is_stmt 0 view .LVU495
 1677 0146 C562     		str	r5, [r0, #44]
 192:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.SourceBlockAddressOffset = 0;
 1678              		.loc 1 192 5 is_stmt 1 view .LVU496
 192:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.SourceBlockAddressOffset = 0;
 1679              		.loc 1 192 42 is_stmt 0 view .LVU497
 1680 0148 0563     		str	r5, [r0, #48]
 193:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DestBlockAddressOffset = 0;
 1681              		.loc 1 193 5 is_stmt 1 view .LVU498
 193:Core/Src/quadspi.c ****     hmdma_quadspi_fifo_th.Init.DestBlockAddressOffset = 0;
 1682              		.loc 1 193 57 is_stmt 0 view .LVU499
 1683 014a 4563     		str	r5, [r0, #52]
 194:Core/Src/quadspi.c ****     if (HAL_MDMA_Init(&hmdma_quadspi_fifo_th) != HAL_OK)
 1684              		.loc 1 194 5 is_stmt 1 view .LVU500
 194:Core/Src/quadspi.c ****     if (HAL_MDMA_Init(&hmdma_quadspi_fifo_th) != HAL_OK)
 1685              		.loc 1 194 55 is_stmt 0 view .LVU501
 1686 014c 8563     		str	r5, [r0, #56]
 195:Core/Src/quadspi.c ****     {
 1687              		.loc 1 195 5 is_stmt 1 view .LVU502
 195:Core/Src/quadspi.c ****     {
 1688              		.loc 1 195 9 is_stmt 0 view .LVU503
 1689 014e FFF7FEFF 		bl	HAL_MDMA_Init
 1690              	.LVL86:
 195:Core/Src/quadspi.c ****     {
 1691              		.loc 1 195 8 view .LVU504
 1692 0152 60B9     		cbnz	r0, .L139
 1693              	.L134:
 200:Core/Src/quadspi.c ****     {
 1694              		.loc 1 200 5 is_stmt 1 view .LVU505
 200:Core/Src/quadspi.c ****     {
ARM GAS  /tmp/ccmcLKXV.s 			page 47


 1695              		.loc 1 200 9 is_stmt 0 view .LVU506
 1696 0154 0022     		movs	r2, #0
 1697 0156 1146     		mov	r1, r2
 1698 0158 0E48     		ldr	r0, .L141+24
 1699 015a FFF7FEFF 		bl	HAL_MDMA_ConfigPostRequestMask
 1700              	.LVL87:
 200:Core/Src/quadspi.c ****     {
 1701              		.loc 1 200 8 view .LVU507
 1702 015e 48B9     		cbnz	r0, .L140
 1703              	.L135:
 205:Core/Src/quadspi.c **** 
 1704              		.loc 1 205 5 is_stmt 1 view .LVU508
 205:Core/Src/quadspi.c **** 
 1705              		.loc 1 205 5 view .LVU509
 1706 0160 0C4B     		ldr	r3, .L141+24
 1707 0162 E363     		str	r3, [r4, #60]
 205:Core/Src/quadspi.c **** 
 1708              		.loc 1 205 5 view .LVU510
 1709 0164 1C64     		str	r4, [r3, #64]
 205:Core/Src/quadspi.c **** 
 1710              		.loc 1 205 5 view .LVU511
 211:Core/Src/quadspi.c **** 
 1711              		.loc 1 211 1 is_stmt 0 view .LVU512
 1712 0166 5DE7     		b	.L131
 1713              	.L138:
 132:Core/Src/quadspi.c ****     }
 1714              		.loc 1 132 7 is_stmt 1 view .LVU513
 1715 0168 FFF7FEFF 		bl	Error_Handler
 1716              	.LVL88:
 1717 016c 68E7     		b	.L133
 1718              	.L139:
 197:Core/Src/quadspi.c ****     }
 1719              		.loc 1 197 7 view .LVU514
 1720 016e FFF7FEFF 		bl	Error_Handler
 1721              	.LVL89:
 1722 0172 EFE7     		b	.L134
 1723              	.L140:
 202:Core/Src/quadspi.c ****     }
 1724              		.loc 1 202 7 view .LVU515
 1725 0174 FFF7FEFF 		bl	Error_Handler
 1726              	.LVL90:
 1727 0178 F2E7     		b	.L135
 1728              	.L142:
 1729 017a 00BF     		.align	2
 1730              	.L141:
 1731 017c 00500052 		.word	1375752192
 1732 0180 00440258 		.word	1476543488
 1733 0184 00100258 		.word	1476530176
 1734 0188 00180258 		.word	1476532224
 1735 018c 00140258 		.word	1476531200
 1736 0190 000C0258 		.word	1476529152
 1737 0194 00000000 		.word	.LANCHOR4
 1738 0198 40000052 		.word	1375731776
 1739              		.cfi_endproc
 1740              	.LFE145:
 1742              		.section	.text.HAL_QSPI_MspDeInit,"ax",%progbits
 1743              		.align	1
ARM GAS  /tmp/ccmcLKXV.s 			page 48


 1744              		.global	HAL_QSPI_MspDeInit
 1745              		.syntax unified
 1746              		.thumb
 1747              		.thumb_func
 1748              		.fpu fpv5-d16
 1750              	HAL_QSPI_MspDeInit:
 1751              	.LVL91:
 1752              	.LFB146:
 214:Core/Src/quadspi.c **** 
 1753              		.loc 1 214 1 view -0
 1754              		.cfi_startproc
 1755              		@ args = 0, pretend = 0, frame = 0
 1756              		@ frame_needed = 0, uses_anonymous_args = 0
 216:Core/Src/quadspi.c ****   {
 1757              		.loc 1 216 3 view .LVU517
 216:Core/Src/quadspi.c ****   {
 1758              		.loc 1 216 16 is_stmt 0 view .LVU518
 1759 0000 0268     		ldr	r2, [r0]
 216:Core/Src/quadspi.c ****   {
 1760              		.loc 1 216 5 view .LVU519
 1761 0002 114B     		ldr	r3, .L150
 1762 0004 9A42     		cmp	r2, r3
 1763 0006 00D0     		beq	.L149
 1764 0008 7047     		bx	lr
 1765              	.L149:
 214:Core/Src/quadspi.c **** 
 1766              		.loc 1 214 1 view .LVU520
 1767 000a 10B5     		push	{r4, lr}
 1768              	.LCFI49:
 1769              		.cfi_def_cfa_offset 8
 1770              		.cfi_offset 4, -8
 1771              		.cfi_offset 14, -4
 1772 000c 0446     		mov	r4, r0
 222:Core/Src/quadspi.c **** 
 1773              		.loc 1 222 5 is_stmt 1 view .LVU521
 1774 000e 0F4A     		ldr	r2, .L150+4
 1775 0010 D2F8D430 		ldr	r3, [r2, #212]
 1776 0014 23F48043 		bic	r3, r3, #16384
 1777 0018 C2F8D430 		str	r3, [r2, #212]
 232:Core/Src/quadspi.c **** 
 1778              		.loc 1 232 5 view .LVU522
 1779 001c 0421     		movs	r1, #4
 1780 001e 0C48     		ldr	r0, .L150+8
 1781              	.LVL92:
 232:Core/Src/quadspi.c **** 
 1782              		.loc 1 232 5 is_stmt 0 view .LVU523
 1783 0020 FFF7FEFF 		bl	HAL_GPIO_DeInit
 1784              	.LVL93:
 234:Core/Src/quadspi.c **** 
 1785              		.loc 1 234 5 is_stmt 1 view .LVU524
 1786 0024 4021     		movs	r1, #64
 1787 0026 0B48     		ldr	r0, .L150+12
 1788 0028 FFF7FEFF 		bl	HAL_GPIO_DeInit
 1789              	.LVL94:
 236:Core/Src/quadspi.c **** 
 1790              		.loc 1 236 5 view .LVU525
 1791 002c 4FF48061 		mov	r1, #1024
ARM GAS  /tmp/ccmcLKXV.s 			page 49


 1792 0030 0948     		ldr	r0, .L150+16
 1793 0032 FFF7FEFF 		bl	HAL_GPIO_DeInit
 1794              	.LVL95:
 238:Core/Src/quadspi.c **** 
 1795              		.loc 1 238 5 view .LVU526
 1796 0036 4FF46051 		mov	r1, #14336
 1797 003a 0848     		ldr	r0, .L150+20
 1798 003c FFF7FEFF 		bl	HAL_GPIO_DeInit
 1799              	.LVL96:
 241:Core/Src/quadspi.c ****   /* USER CODE BEGIN QUADSPI_MspDeInit 1 */
 1800              		.loc 1 241 5 view .LVU527
 1801 0040 E06B     		ldr	r0, [r4, #60]
 1802 0042 FFF7FEFF 		bl	HAL_MDMA_DeInit
 1803              	.LVL97:
 246:Core/Src/quadspi.c **** 
 1804              		.loc 1 246 1 is_stmt 0 view .LVU528
 1805 0046 10BD     		pop	{r4, pc}
 1806              	.LVL98:
 1807              	.L151:
 246:Core/Src/quadspi.c **** 
 1808              		.loc 1 246 1 view .LVU529
 1809              		.align	2
 1810              	.L150:
 1811 0048 00500052 		.word	1375752192
 1812 004c 00440258 		.word	1476543488
 1813 0050 00100258 		.word	1476530176
 1814 0054 00180258 		.word	1476532224
 1815 0058 00140258 		.word	1476531200
 1816 005c 000C0258 		.word	1476529152
 1817              		.cfi_endproc
 1818              	.LFE146:
 1820              		.section	.text.QSPI_FlashDemo,"ax",%progbits
 1821              		.align	1
 1822              		.global	QSPI_FlashDemo
 1823              		.syntax unified
 1824              		.thumb
 1825              		.thumb_func
 1826              		.fpu fpv5-d16
 1828              	QSPI_FlashDemo:
 1829              	.LFB162:
 507:Core/Src/quadspi.c **** 
 508:Core/Src/quadspi.c **** void QSPI_FlashDemo(void)
 509:Core/Src/quadspi.c **** {
 1830              		.loc 1 509 1 is_stmt 1 view -0
 1831              		.cfi_startproc
 1832              		@ args = 0, pretend = 0, frame = 0
 1833              		@ frame_needed = 0, uses_anonymous_args = 0
 1834 0000 08B5     		push	{r3, lr}
 1835              	.LCFI50:
 1836              		.cfi_def_cfa_offset 8
 1837              		.cfi_offset 3, -8
 1838              		.cfi_offset 14, -4
 510:Core/Src/quadspi.c ****   /* Demo: erase first sector (0x000000), program one page, read-back verify. */
 511:Core/Src/quadspi.c ****   static const uint32_t test_addr = QSPI_DEMO_SECTOR_ADDR;
 1839              		.loc 1 511 3 view .LVU531
 512:Core/Src/quadspi.c ****   static uint8_t page_tx[MEMORY_PAGE_SIZE];
 1840              		.loc 1 512 3 view .LVU532
ARM GAS  /tmp/ccmcLKXV.s 			page 50


 513:Core/Src/quadspi.c ****   static uint8_t page_rx[MEMORY_PAGE_SIZE];
 1841              		.loc 1 513 3 view .LVU533
 514:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < MEMORY_PAGE_SIZE; ++i) page_tx[i] = (uint8_t)(i ^ 0x5A);
 1842              		.loc 1 514 3 view .LVU534
 1843              	.LBB14:
 1844              		.loc 1 514 8 view .LVU535
 1845              	.LVL99:
 1846              		.loc 1 514 17 is_stmt 0 view .LVU536
 1847 0002 0023     		movs	r3, #0
 1848              		.loc 1 514 3 view .LVU537
 1849 0004 04E0     		b	.L153
 1850              	.LVL100:
 1851              	.L154:
 1852              		.loc 1 514 51 is_stmt 1 discriminator 3 view .LVU538
 1853              		.loc 1 514 64 is_stmt 0 discriminator 3 view .LVU539
 1854 0006 83F05A01 		eor	r1, r3, #90
 1855              		.loc 1 514 62 discriminator 3 view .LVU540
 1856 000a 134A     		ldr	r2, .L162
 1857 000c D154     		strb	r1, [r2, r3]
 1858              		.loc 1 514 46 is_stmt 1 discriminator 3 view .LVU541
 1859 000e 0133     		adds	r3, r3, #1
 1860              	.LVL101:
 1861              	.L153:
 1862              		.loc 1 514 24 discriminator 1 view .LVU542
 1863              		.loc 1 514 3 is_stmt 0 discriminator 1 view .LVU543
 1864 0010 FF2B     		cmp	r3, #255
 1865 0012 F8D9     		bls	.L154
 1866              	.LBE14:
 515:Core/Src/quadspi.c ****   if (QSPI_EraseSector(test_addr) != 0) return; /* silently abort demo */
 1867              		.loc 1 515 3 is_stmt 1 view .LVU544
 1868              		.loc 1 515 7 is_stmt 0 view .LVU545
 1869 0014 0020     		movs	r0, #0
 1870 0016 FFF7FEFF 		bl	QSPI_EraseSector
 1871              	.LVL102:
 1872              		.loc 1 515 6 view .LVU546
 1873 001a 00B1     		cbz	r0, .L161
 1874              	.L152:
 516:Core/Src/quadspi.c ****   if (QSPI_PageProgram(test_addr, page_tx, MEMORY_PAGE_SIZE) != 0) return;
 517:Core/Src/quadspi.c **** 
 518:Core/Src/quadspi.c ****   /* Exit memory mapped? Not needed; we can directly memcpy from mapped region 0x90000000 + test_ad
 519:Core/Src/quadspi.c ****   uint8_t *mapped = (uint8_t*)(0x90000000UL + test_addr);
 520:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < MEMORY_PAGE_SIZE; ++i) page_rx[i] = mapped[i];
 521:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < MEMORY_PAGE_SIZE; ++i) {
 522:Core/Src/quadspi.c ****     if (page_rx[i] != page_tx[i]) {
 523:Core/Src/quadspi.c ****       /* Verification failed: handle as needed (toggle LED, etc.) */
 524:Core/Src/quadspi.c ****       return;
 525:Core/Src/quadspi.c ****     }
 526:Core/Src/quadspi.c ****   }
 527:Core/Src/quadspi.c ****   /* If reached here: demo success */
 528:Core/Src/quadspi.c **** }
 1875              		.loc 1 528 1 view .LVU547
 1876 001c 08BD     		pop	{r3, pc}
 1877              	.L161:
 516:Core/Src/quadspi.c ****   if (QSPI_PageProgram(test_addr, page_tx, MEMORY_PAGE_SIZE) != 0) return;
 1878              		.loc 1 516 3 is_stmt 1 view .LVU548
 516:Core/Src/quadspi.c ****   if (QSPI_PageProgram(test_addr, page_tx, MEMORY_PAGE_SIZE) != 0) return;
 1879              		.loc 1 516 7 is_stmt 0 view .LVU549
ARM GAS  /tmp/ccmcLKXV.s 			page 51


 1880 001e 4FF48072 		mov	r2, #256
 1881 0022 0D49     		ldr	r1, .L162
 1882 0024 FFF7FEFF 		bl	QSPI_PageProgram
 1883              	.LVL103:
 516:Core/Src/quadspi.c ****   if (QSPI_PageProgram(test_addr, page_tx, MEMORY_PAGE_SIZE) != 0) return;
 1884              		.loc 1 516 6 view .LVU550
 1885 0028 0028     		cmp	r0, #0
 1886 002a F7D1     		bne	.L152
 1887              	.LBB15:
 520:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < MEMORY_PAGE_SIZE; ++i) {
 1888              		.loc 1 520 17 view .LVU551
 1889 002c 0023     		movs	r3, #0
 1890 002e 05E0     		b	.L156
 1891              	.LVL104:
 1892              	.L157:
 520:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < MEMORY_PAGE_SIZE; ++i) {
 1893              		.loc 1 520 51 is_stmt 1 discriminator 3 view .LVU552
 520:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < MEMORY_PAGE_SIZE; ++i) {
 1894              		.loc 1 520 70 is_stmt 0 discriminator 3 view .LVU553
 1895 0030 03F11042 		add	r2, r3, #-1879048192
 1896 0034 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
 520:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < MEMORY_PAGE_SIZE; ++i) {
 1897              		.loc 1 520 62 discriminator 3 view .LVU554
 1898 0036 094A     		ldr	r2, .L162+4
 1899 0038 D154     		strb	r1, [r2, r3]
 520:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < MEMORY_PAGE_SIZE; ++i) {
 1900              		.loc 1 520 46 is_stmt 1 discriminator 3 view .LVU555
 1901 003a 0133     		adds	r3, r3, #1
 1902              	.LVL105:
 1903              	.L156:
 520:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < MEMORY_PAGE_SIZE; ++i) {
 1904              		.loc 1 520 24 discriminator 1 view .LVU556
 520:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < MEMORY_PAGE_SIZE; ++i) {
 1905              		.loc 1 520 3 is_stmt 0 discriminator 1 view .LVU557
 1906 003c FF2B     		cmp	r3, #255
 1907 003e F7D9     		bls	.L157
 1908              	.LBE15:
 1909              	.LBB16:
 521:Core/Src/quadspi.c ****     if (page_rx[i] != page_tx[i]) {
 1910              		.loc 1 521 17 view .LVU558
 1911 0040 0023     		movs	r3, #0
 1912              	.LVL106:
 1913              	.L158:
 521:Core/Src/quadspi.c ****     if (page_rx[i] != page_tx[i]) {
 1914              		.loc 1 521 24 is_stmt 1 discriminator 1 view .LVU559
 521:Core/Src/quadspi.c ****     if (page_rx[i] != page_tx[i]) {
 1915              		.loc 1 521 3 is_stmt 0 discriminator 1 view .LVU560
 1916 0042 FF2B     		cmp	r3, #255
 1917 0044 EAD8     		bhi	.L152
 522:Core/Src/quadspi.c ****       /* Verification failed: handle as needed (toggle LED, etc.) */
 1918              		.loc 1 522 5 is_stmt 1 view .LVU561
 522:Core/Src/quadspi.c ****       /* Verification failed: handle as needed (toggle LED, etc.) */
 1919              		.loc 1 522 16 is_stmt 0 view .LVU562
 1920 0046 054A     		ldr	r2, .L162+4
 1921 0048 D15C     		ldrb	r1, [r2, r3]	@ zero_extendqisi2
 522:Core/Src/quadspi.c ****       /* Verification failed: handle as needed (toggle LED, etc.) */
 1922              		.loc 1 522 30 view .LVU563
ARM GAS  /tmp/ccmcLKXV.s 			page 52


 1923 004a 034A     		ldr	r2, .L162
 1924 004c D25C     		ldrb	r2, [r2, r3]	@ zero_extendqisi2
 522:Core/Src/quadspi.c ****       /* Verification failed: handle as needed (toggle LED, etc.) */
 1925              		.loc 1 522 8 view .LVU564
 1926 004e 9142     		cmp	r1, r2
 1927 0050 E4D1     		bne	.L152
 521:Core/Src/quadspi.c ****     if (page_rx[i] != page_tx[i]) {
 1928              		.loc 1 521 46 is_stmt 1 discriminator 2 view .LVU565
 1929 0052 0133     		adds	r3, r3, #1
 1930              	.LVL107:
 521:Core/Src/quadspi.c ****     if (page_rx[i] != page_tx[i]) {
 1931              		.loc 1 521 46 is_stmt 0 discriminator 2 view .LVU566
 1932 0054 F5E7     		b	.L158
 1933              	.L163:
 1934 0056 00BF     		.align	2
 1935              	.L162:
 1936 0058 00000000 		.word	.LANCHOR5
 1937 005c 00000000 		.word	.LANCHOR6
 1938              	.LBE16:
 1939              		.cfi_endproc
 1940              	.LFE162:
 1942              		.section	.text.QSPI_ReadJEDEC_ID,"ax",%progbits
 1943              		.align	1
 1944              		.global	QSPI_ReadJEDEC_ID
 1945              		.syntax unified
 1946              		.thumb
 1947              		.thumb_func
 1948              		.fpu fpv5-d16
 1950              	QSPI_ReadJEDEC_ID:
 1951              	.LVL108:
 1952              	.LFB163:
 529:Core/Src/quadspi.c **** uint32_t QSPI_ReadJEDEC_ID(uint8_t *mid, uint8_t *mem_type, uint8_t *capacity)
 530:Core/Src/quadspi.c **** {
 1953              		.loc 1 530 1 is_stmt 1 view -0
 1954              		.cfi_startproc
 1955              		@ args = 0, pretend = 0, frame = 64
 1956              		@ frame_needed = 0, uses_anonymous_args = 0
 1957              		.loc 1 530 1 is_stmt 0 view .LVU568
 1958 0000 70B5     		push	{r4, r5, r6, lr}
 1959              	.LCFI51:
 1960              		.cfi_def_cfa_offset 16
 1961              		.cfi_offset 4, -16
 1962              		.cfi_offset 5, -12
 1963              		.cfi_offset 6, -8
 1964              		.cfi_offset 14, -4
 1965 0002 90B0     		sub	sp, sp, #64
 1966              	.LCFI52:
 1967              		.cfi_def_cfa_offset 80
 1968 0004 0646     		mov	r6, r0
 1969 0006 0D46     		mov	r5, r1
 1970 0008 1446     		mov	r4, r2
 531:Core/Src/quadspi.c ****   QSPI_CommandTypeDef sCommand = {0};
 1971              		.loc 1 531 3 is_stmt 1 view .LVU569
 1972              		.loc 1 531 23 is_stmt 0 view .LVU570
 1973 000a 3822     		movs	r2, #56
 1974              	.LVL109:
 1975              		.loc 1 531 23 view .LVU571
ARM GAS  /tmp/ccmcLKXV.s 			page 53


 1976 000c 0021     		movs	r1, #0
 1977              	.LVL110:
 1978              		.loc 1 531 23 view .LVU572
 1979 000e 02A8     		add	r0, sp, #8
 1980              	.LVL111:
 1981              		.loc 1 531 23 view .LVU573
 1982 0010 FFF7FEFF 		bl	memset
 1983              	.LVL112:
 532:Core/Src/quadspi.c ****   uint8_t id[3] = {0};
 1984              		.loc 1 532 3 is_stmt 1 view .LVU574
 1985              		.loc 1 532 11 is_stmt 0 view .LVU575
 1986 0014 194B     		ldr	r3, .L173
 1987 0016 1B88     		ldrh	r3, [r3]
 1988 0018 ADF80430 		strh	r3, [sp, #4]	@ movhi
 1989 001c 0023     		movs	r3, #0
 1990 001e 8DF80630 		strb	r3, [sp, #6]
 533:Core/Src/quadspi.c **** 
 534:Core/Src/quadspi.c ****   sCommand.Instruction = W25Q128_CMD_JEDEC_ID; /* JEDEC ID (Manufacturer, Memory Type, Capacity) */
 1991              		.loc 1 534 3 is_stmt 1 view .LVU576
 1992              		.loc 1 534 24 is_stmt 0 view .LVU577
 1993 0022 9F23     		movs	r3, #159
 1994 0024 0293     		str	r3, [sp, #8]
 535:Core/Src/quadspi.c ****   sCommand.AddressMode = QSPI_ADDRESS_NONE;
 1995              		.loc 1 535 3 is_stmt 1 view .LVU578
 536:Core/Src/quadspi.c ****   sCommand.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 1996              		.loc 1 536 3 view .LVU579
 537:Core/Src/quadspi.c ****   sCommand.DataMode = QSPI_DATA_1_LINE;
 1997              		.loc 1 537 3 view .LVU580
 1998              		.loc 1 537 21 is_stmt 0 view .LVU581
 1999 0026 4FF08073 		mov	r3, #16777216
 2000 002a 0B93     		str	r3, [sp, #44]
 538:Core/Src/quadspi.c ****   sCommand.DummyCycles = 0;
 2001              		.loc 1 538 3 is_stmt 1 view .LVU582
 539:Core/Src/quadspi.c ****   sCommand.DdrMode = QSPI_DDR_MODE_DISABLE;
 2002              		.loc 1 539 3 view .LVU583
 540:Core/Src/quadspi.c ****   sCommand.DdrHoldHalfCycle = QSPI_DDR_HHC_ANALOG_DELAY;
 2003              		.loc 1 540 3 view .LVU584
 541:Core/Src/quadspi.c ****   sCommand.SIOOMode = QSPI_SIOO_INST_EVERY_CMD;
 2004              		.loc 1 541 3 view .LVU585
 542:Core/Src/quadspi.c ****   sCommand.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 2005              		.loc 1 542 3 view .LVU586
 2006              		.loc 1 542 28 is_stmt 0 view .LVU587
 2007 002c 4FF48073 		mov	r3, #256
 2008 0030 0893     		str	r3, [sp, #32]
 543:Core/Src/quadspi.c ****   sCommand.NbData = 3;
 2009              		.loc 1 543 3 is_stmt 1 view .LVU588
 2010              		.loc 1 543 19 is_stmt 0 view .LVU589
 2011 0032 0323     		movs	r3, #3
 2012 0034 0C93     		str	r3, [sp, #48]
 544:Core/Src/quadspi.c **** 
 545:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &sCommand, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 2013              		.loc 1 545 3 is_stmt 1 view .LVU590
 2014              		.loc 1 545 7 is_stmt 0 view .LVU591
 2015 0036 41F28832 		movw	r2, #5000
 2016 003a 02A9     		add	r1, sp, #8
 2017 003c 1048     		ldr	r0, .L173+4
 2018 003e FFF7FEFF 		bl	HAL_QSPI_Command
ARM GAS  /tmp/ccmcLKXV.s 			page 54


 2019              	.LVL113:
 2020              		.loc 1 545 6 view .LVU592
 2021 0042 10B1     		cbz	r0, .L172
 546:Core/Src/quadspi.c ****     return 1;
 2022              		.loc 1 546 12 view .LVU593
 2023 0044 0120     		movs	r0, #1
 2024              	.L164:
 547:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, id, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 548:Core/Src/quadspi.c ****     return 2;
 549:Core/Src/quadspi.c ****   if (mid) *mid = id[0];
 550:Core/Src/quadspi.c ****   if (mem_type) *mem_type = id[1];
 551:Core/Src/quadspi.c ****   if (capacity) *capacity = id[2];
 552:Core/Src/quadspi.c ****   return 0;
 553:Core/Src/quadspi.c **** }
 2025              		.loc 1 553 1 view .LVU594
 2026 0046 10B0     		add	sp, sp, #64
 2027              	.LCFI53:
 2028              		.cfi_remember_state
 2029              		.cfi_def_cfa_offset 16
 2030              		@ sp needed
 2031 0048 70BD     		pop	{r4, r5, r6, pc}
 2032              	.LVL114:
 2033              	.L172:
 2034              	.LCFI54:
 2035              		.cfi_restore_state
 547:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, id, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 2036              		.loc 1 547 3 is_stmt 1 view .LVU595
 547:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, id, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 2037              		.loc 1 547 7 is_stmt 0 view .LVU596
 2038 004a 41F28832 		movw	r2, #5000
 2039 004e 01A9     		add	r1, sp, #4
 2040 0050 0B48     		ldr	r0, .L173+4
 2041 0052 FFF7FEFF 		bl	HAL_QSPI_Receive
 2042              	.LVL115:
 547:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, id, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 2043              		.loc 1 547 6 view .LVU597
 2044 0056 68B9     		cbnz	r0, .L169
 549:Core/Src/quadspi.c ****   if (mem_type) *mem_type = id[1];
 2045              		.loc 1 549 3 is_stmt 1 view .LVU598
 549:Core/Src/quadspi.c ****   if (mem_type) *mem_type = id[1];
 2046              		.loc 1 549 6 is_stmt 0 view .LVU599
 2047 0058 16B1     		cbz	r6, .L166
 549:Core/Src/quadspi.c ****   if (mem_type) *mem_type = id[1];
 2048              		.loc 1 549 12 is_stmt 1 discriminator 1 view .LVU600
 549:Core/Src/quadspi.c ****   if (mem_type) *mem_type = id[1];
 2049              		.loc 1 549 21 is_stmt 0 discriminator 1 view .LVU601
 2050 005a 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 549:Core/Src/quadspi.c ****   if (mem_type) *mem_type = id[1];
 2051              		.loc 1 549 17 discriminator 1 view .LVU602
 2052 005e 3370     		strb	r3, [r6]
 2053              	.L166:
 550:Core/Src/quadspi.c ****   if (capacity) *capacity = id[2];
 2054              		.loc 1 550 3 is_stmt 1 view .LVU603
 550:Core/Src/quadspi.c ****   if (capacity) *capacity = id[2];
 2055              		.loc 1 550 6 is_stmt 0 view .LVU604
 2056 0060 15B1     		cbz	r5, .L167
 550:Core/Src/quadspi.c ****   if (capacity) *capacity = id[2];
ARM GAS  /tmp/ccmcLKXV.s 			page 55


 2057              		.loc 1 550 17 is_stmt 1 discriminator 1 view .LVU605
 550:Core/Src/quadspi.c ****   if (capacity) *capacity = id[2];
 2058              		.loc 1 550 31 is_stmt 0 discriminator 1 view .LVU606
 2059 0062 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 550:Core/Src/quadspi.c ****   if (capacity) *capacity = id[2];
 2060              		.loc 1 550 27 discriminator 1 view .LVU607
 2061 0066 2B70     		strb	r3, [r5]
 2062              	.L167:
 551:Core/Src/quadspi.c ****   return 0;
 2063              		.loc 1 551 3 is_stmt 1 view .LVU608
 551:Core/Src/quadspi.c ****   return 0;
 2064              		.loc 1 551 6 is_stmt 0 view .LVU609
 2065 0068 34B1     		cbz	r4, .L170
 551:Core/Src/quadspi.c ****   return 0;
 2066              		.loc 1 551 17 is_stmt 1 discriminator 1 view .LVU610
 551:Core/Src/quadspi.c ****   return 0;
 2067              		.loc 1 551 31 is_stmt 0 discriminator 1 view .LVU611
 2068 006a 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
 551:Core/Src/quadspi.c ****   return 0;
 2069              		.loc 1 551 27 discriminator 1 view .LVU612
 2070 006e 2370     		strb	r3, [r4]
 552:Core/Src/quadspi.c **** }
 2071              		.loc 1 552 10 discriminator 1 view .LVU613
 2072 0070 0020     		movs	r0, #0
 2073 0072 E8E7     		b	.L164
 2074              	.L169:
 548:Core/Src/quadspi.c ****   if (mid) *mid = id[0];
 2075              		.loc 1 548 12 view .LVU614
 2076 0074 0220     		movs	r0, #2
 2077 0076 E6E7     		b	.L164
 2078              	.L170:
 552:Core/Src/quadspi.c **** }
 2079              		.loc 1 552 10 view .LVU615
 2080 0078 0020     		movs	r0, #0
 2081 007a E4E7     		b	.L164
 2082              	.L174:
 2083              		.align	2
 2084              	.L173:
 2085 007c 00000000 		.word	.LANCHOR7
 2086 0080 00000000 		.word	.LANCHOR2
 2087              		.cfi_endproc
 2088              	.LFE163:
 2090              		.section	.text.QSPI_CheckFlashSize,"ax",%progbits
 2091              		.align	1
 2092              		.global	QSPI_CheckFlashSize
 2093              		.syntax unified
 2094              		.thumb
 2095              		.thumb_func
 2096              		.fpu fpv5-d16
 2098              	QSPI_CheckFlashSize:
 2099              	.LFB164:
 554:Core/Src/quadspi.c **** 
 555:Core/Src/quadspi.c **** uint8_t QSPI_CheckFlashSize(void)
 556:Core/Src/quadspi.c **** {
 2100              		.loc 1 556 1 is_stmt 1 view -0
 2101              		.cfi_startproc
 2102              		@ args = 0, pretend = 0, frame = 8
ARM GAS  /tmp/ccmcLKXV.s 			page 56


 2103              		@ frame_needed = 0, uses_anonymous_args = 0
 2104 0000 00B5     		push	{lr}
 2105              	.LCFI55:
 2106              		.cfi_def_cfa_offset 4
 2107              		.cfi_offset 14, -4
 2108 0002 83B0     		sub	sp, sp, #12
 2109              	.LCFI56:
 2110              		.cfi_def_cfa_offset 16
 557:Core/Src/quadspi.c ****   uint8_t mid, mtype, cap;
 2111              		.loc 1 557 3 view .LVU617
 558:Core/Src/quadspi.c ****   if (QSPI_ReadJEDEC_ID(&mid, &mtype, &cap)) return 1; /* read fail */
 2112              		.loc 1 558 3 view .LVU618
 2113              		.loc 1 558 7 is_stmt 0 view .LVU619
 2114 0004 0DF10502 		add	r2, sp, #5
 2115 0008 0DF10601 		add	r1, sp, #6
 2116 000c 0DF10700 		add	r0, sp, #7
 2117 0010 FFF7FEFF 		bl	QSPI_ReadJEDEC_ID
 2118              	.LVL116:
 2119              		.loc 1 558 6 view .LVU620
 2120 0014 98B9     		cbnz	r0, .L177
 559:Core/Src/quadspi.c ****   if (mid != W25Q_MANUFACTURER_ID) return 2; /* wrong manufacturer */
 2121              		.loc 1 559 3 is_stmt 1 view .LVU621
 2122              		.loc 1 559 11 is_stmt 0 view .LVU622
 2123 0016 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2124              		.loc 1 559 6 view .LVU623
 2125 001a EF2B     		cmp	r3, #239
 2126 001c 13D1     		bne	.L178
 560:Core/Src/quadspi.c ****   if (!((mtype == W25Q128_MEM_TYPE_40) || (mtype == W25Q128_MEM_TYPE_60))) return 3; /* unexpected 
 2127              		.loc 1 560 3 is_stmt 1 view .LVU624
 2128              		.loc 1 560 7 is_stmt 0 view .LVU625
 2129 001e 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
 2130              		.loc 1 560 6 view .LVU626
 2131 0022 402B     		cmp	r3, #64
 2132 0024 18BF     		it	ne
 2133 0026 602B     		cmpne	r3, #96
 2134 0028 0FD1     		bne	.L179
 561:Core/Src/quadspi.c ****   if (cap != W25Q128_CAPACITY_ID) return 4; /* not 128Mbit */
 2135              		.loc 1 561 3 is_stmt 1 view .LVU627
 2136              		.loc 1 561 11 is_stmt 0 view .LVU628
 2137 002a 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 2138              		.loc 1 561 6 view .LVU629
 2139 002e 182B     		cmp	r3, #24
 2140 0030 0DD1     		bne	.L180
 562:Core/Src/quadspi.c **** 
 563:Core/Src/quadspi.c ****   /* Compute size from capacity code per Winbond formula: size = 1 << cap when cap >= 0x15 (0x18 ->
 564:Core/Src/quadspi.c ****      Simpler: For common parts we can derive directly: 0x18 => 128Mbit => 16MB. */
 565:Core/Src/quadspi.c ****   if (MEMORY_FLASH_SIZE != 0x01000000UL) return 5; /* our macro inconsistent */
 2141              		.loc 1 565 3 is_stmt 1 view .LVU630
 566:Core/Src/quadspi.c ****   if (hqspi.Init.FlashSize != (W25Q128_ADDRESS_BITS - 1)) return 6; /* controller config mismatch *
 2142              		.loc 1 566 3 view .LVU631
 2143              		.loc 1 566 17 is_stmt 0 view .LVU632
 2144 0032 084B     		ldr	r3, .L183
 2145 0034 1B69     		ldr	r3, [r3, #16]
 2146              		.loc 1 566 6 view .LVU633
 2147 0036 172B     		cmp	r3, #23
 2148 0038 02D0     		beq	.L176
 2149              		.loc 1 566 66 view .LVU634
ARM GAS  /tmp/ccmcLKXV.s 			page 57


 2150 003a 0620     		movs	r0, #6
 2151 003c 00E0     		b	.L176
 2152              	.L177:
 558:Core/Src/quadspi.c ****   if (mid != W25Q_MANUFACTURER_ID) return 2; /* wrong manufacturer */
 2153              		.loc 1 558 53 view .LVU635
 2154 003e 0120     		movs	r0, #1
 2155              	.L176:
 567:Core/Src/quadspi.c ****   return 0; /* OK */
 568:Core/Src/quadspi.c **** }
 2156              		.loc 1 568 1 view .LVU636
 2157 0040 03B0     		add	sp, sp, #12
 2158              	.LCFI57:
 2159              		.cfi_remember_state
 2160              		.cfi_def_cfa_offset 4
 2161              		@ sp needed
 2162 0042 5DF804FB 		ldr	pc, [sp], #4
 2163              	.L178:
 2164              	.LCFI58:
 2165              		.cfi_restore_state
 559:Core/Src/quadspi.c ****   if (!((mtype == W25Q128_MEM_TYPE_40) || (mtype == W25Q128_MEM_TYPE_60))) return 3; /* unexpected 
 2166              		.loc 1 559 43 view .LVU637
 2167 0046 0220     		movs	r0, #2
 2168 0048 FAE7     		b	.L176
 2169              	.L179:
 560:Core/Src/quadspi.c ****   if (cap != W25Q128_CAPACITY_ID) return 4; /* not 128Mbit */
 2170              		.loc 1 560 83 view .LVU638
 2171 004a 0320     		movs	r0, #3
 2172 004c F8E7     		b	.L176
 2173              	.L180:
 561:Core/Src/quadspi.c **** 
 2174              		.loc 1 561 42 view .LVU639
 2175 004e 0420     		movs	r0, #4
 2176 0050 F6E7     		b	.L176
 2177              	.L184:
 2178 0052 00BF     		.align	2
 2179              	.L183:
 2180 0054 00000000 		.word	.LANCHOR2
 2181              		.cfi_endproc
 2182              	.LFE164:
 2184              		.section	.text.MX_QUADSPI_Init,"ax",%progbits
 2185              		.align	1
 2186              		.global	MX_QUADSPI_Init
 2187              		.syntax unified
 2188              		.thumb
 2189              		.thumb_func
 2190              		.fpu fpv5-d16
 2192              	MX_QUADSPI_Init:
 2193              	.LFB144:
  53:Core/Src/quadspi.c **** 
 2194              		.loc 1 53 1 is_stmt 1 view -0
 2195              		.cfi_startproc
 2196              		@ args = 0, pretend = 0, frame = 0
 2197              		@ frame_needed = 0, uses_anonymous_args = 0
 2198 0000 08B5     		push	{r3, lr}
 2199              	.LCFI59:
 2200              		.cfi_def_cfa_offset 8
 2201              		.cfi_offset 3, -8
ARM GAS  /tmp/ccmcLKXV.s 			page 58


 2202              		.cfi_offset 14, -4
  62:Core/Src/quadspi.c ****   hqspi.Init.ClockPrescaler = 2;
 2203              		.loc 1 62 3 view .LVU641
  62:Core/Src/quadspi.c ****   hqspi.Init.ClockPrescaler = 2;
 2204              		.loc 1 62 18 is_stmt 0 view .LVU642
 2205 0002 1C48     		ldr	r0, .L196
 2206 0004 1C4B     		ldr	r3, .L196+4
 2207 0006 0360     		str	r3, [r0]
  63:Core/Src/quadspi.c ****   hqspi.Init.FifoThreshold = 32;
 2208              		.loc 1 63 3 is_stmt 1 view .LVU643
  63:Core/Src/quadspi.c ****   hqspi.Init.FifoThreshold = 32;
 2209              		.loc 1 63 29 is_stmt 0 view .LVU644
 2210 0008 0223     		movs	r3, #2
 2211 000a 4360     		str	r3, [r0, #4]
  64:Core/Src/quadspi.c ****   hqspi.Init.SampleShifting = QSPI_SAMPLE_SHIFTING_NONE;
 2212              		.loc 1 64 3 is_stmt 1 view .LVU645
  64:Core/Src/quadspi.c ****   hqspi.Init.SampleShifting = QSPI_SAMPLE_SHIFTING_NONE;
 2213              		.loc 1 64 28 is_stmt 0 view .LVU646
 2214 000c 2023     		movs	r3, #32
 2215 000e 8360     		str	r3, [r0, #8]
  65:Core/Src/quadspi.c ****   hqspi.Init.FlashSize = 23;
 2216              		.loc 1 65 3 is_stmt 1 view .LVU647
  65:Core/Src/quadspi.c ****   hqspi.Init.FlashSize = 23;
 2217              		.loc 1 65 29 is_stmt 0 view .LVU648
 2218 0010 0023     		movs	r3, #0
 2219 0012 C360     		str	r3, [r0, #12]
  66:Core/Src/quadspi.c ****   hqspi.Init.ChipSelectHighTime = QSPI_CS_HIGH_TIME_2_CYCLE;
 2220              		.loc 1 66 3 is_stmt 1 view .LVU649
  66:Core/Src/quadspi.c ****   hqspi.Init.ChipSelectHighTime = QSPI_CS_HIGH_TIME_2_CYCLE;
 2221              		.loc 1 66 24 is_stmt 0 view .LVU650
 2222 0014 1722     		movs	r2, #23
 2223 0016 0261     		str	r2, [r0, #16]
  67:Core/Src/quadspi.c ****   hqspi.Init.ClockMode = QSPI_CLOCK_MODE_3;
 2224              		.loc 1 67 3 is_stmt 1 view .LVU651
  67:Core/Src/quadspi.c ****   hqspi.Init.ClockMode = QSPI_CLOCK_MODE_3;
 2225              		.loc 1 67 33 is_stmt 0 view .LVU652
 2226 0018 4FF48072 		mov	r2, #256
 2227 001c 4261     		str	r2, [r0, #20]
  68:Core/Src/quadspi.c ****   hqspi.Init.FlashID = QSPI_FLASH_ID_1;
 2228              		.loc 1 68 3 is_stmt 1 view .LVU653
  68:Core/Src/quadspi.c ****   hqspi.Init.FlashID = QSPI_FLASH_ID_1;
 2229              		.loc 1 68 24 is_stmt 0 view .LVU654
 2230 001e 0122     		movs	r2, #1
 2231 0020 8261     		str	r2, [r0, #24]
  69:Core/Src/quadspi.c ****   hqspi.Init.DualFlash = QSPI_DUALFLASH_DISABLE;
 2232              		.loc 1 69 3 is_stmt 1 view .LVU655
  69:Core/Src/quadspi.c ****   hqspi.Init.DualFlash = QSPI_DUALFLASH_DISABLE;
 2233              		.loc 1 69 22 is_stmt 0 view .LVU656
 2234 0022 C361     		str	r3, [r0, #28]
  70:Core/Src/quadspi.c ****   if (HAL_QSPI_Init(&hqspi) != HAL_OK)
 2235              		.loc 1 70 3 is_stmt 1 view .LVU657
  70:Core/Src/quadspi.c ****   if (HAL_QSPI_Init(&hqspi) != HAL_OK)
 2236              		.loc 1 70 24 is_stmt 0 view .LVU658
 2237 0024 0362     		str	r3, [r0, #32]
  71:Core/Src/quadspi.c ****   {
 2238              		.loc 1 71 3 is_stmt 1 view .LVU659
  71:Core/Src/quadspi.c ****   {
ARM GAS  /tmp/ccmcLKXV.s 			page 59


 2239              		.loc 1 71 7 is_stmt 0 view .LVU660
 2240 0026 FFF7FEFF 		bl	HAL_QSPI_Init
 2241              	.LVL117:
  71:Core/Src/quadspi.c ****   {
 2242              		.loc 1 71 6 view .LVU661
 2243 002a B0B9     		cbnz	r0, .L192
 2244              	.L186:
  77:Core/Src/quadspi.c ****   if (qspi_last_check_status != 0U) {
 2245              		.loc 1 77 3 is_stmt 1 view .LVU662
  77:Core/Src/quadspi.c ****   if (qspi_last_check_status != 0U) {
 2246              		.loc 1 77 28 is_stmt 0 view .LVU663
 2247 002c FFF7FEFF 		bl	QSPI_CheckFlashSize
 2248              	.LVL118:
  77:Core/Src/quadspi.c ****   if (qspi_last_check_status != 0U) {
 2249              		.loc 1 77 26 view .LVU664
 2250 0030 124B     		ldr	r3, .L196+8
 2251 0032 1870     		strb	r0, [r3]
  78:Core/Src/quadspi.c ****     /* Size mismatch or ID read failure */
 2252              		.loc 1 78 3 is_stmt 1 view .LVU665
  78:Core/Src/quadspi.c ****     /* Size mismatch or ID read failure */
 2253              		.loc 1 78 30 is_stmt 0 view .LVU666
 2254 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  78:Core/Src/quadspi.c ****     /* Size mismatch or ID read failure */
 2255              		.loc 1 78 6 view .LVU667
 2256 0036 9BB9     		cbnz	r3, .L193
 2257              	.L187:
  83:Core/Src/quadspi.c ****     Error_Handler();
 2258              		.loc 1 83 3 is_stmt 1 view .LVU668
  83:Core/Src/quadspi.c ****     Error_Handler();
 2259              		.loc 1 83 7 is_stmt 0 view .LVU669
 2260 0038 FFF7FEFF 		bl	QSPI_EnsureQuadReady
 2261              	.LVL119:
  83:Core/Src/quadspi.c ****     Error_Handler();
 2262              		.loc 1 83 6 view .LVU670
 2263 003c 98B9     		cbnz	r0, .L194
 2264              	.L188:
  92:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
 2265              		.loc 1 92 3 is_stmt 1 view .LVU671
  94:Core/Src/quadspi.c **** #else
 2266              		.loc 1 94 7 is_stmt 0 view .LVU672
 2267 003e FFF7FEFF 		bl	QSPI_EnableMemoryMappedQuad
 2268              	.LVL120:
  92:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
 2269              		.loc 1 92 6 view .LVU673
 2270 0042 98B9     		cbnz	r0, .L195
 102:Core/Src/quadspi.c ****     qspi_first_word = *(uint32_t*)0x90000000UL; /* capture for debugger */
 2271              		.loc 1 102 5 is_stmt 1 view .LVU674
 102:Core/Src/quadspi.c ****     qspi_first_word = *(uint32_t*)0x90000000UL; /* capture for debugger */
 2272              		.loc 1 102 32 is_stmt 0 view .LVU675
 2273 0044 0E4B     		ldr	r3, .L196+12
 2274 0046 0122     		movs	r2, #1
 2275 0048 1A70     		strb	r2, [r3]
 103:Core/Src/quadspi.c ****   }
 2276              		.loc 1 103 5 is_stmt 1 view .LVU676
 103:Core/Src/quadspi.c ****   }
 2277              		.loc 1 103 23 is_stmt 0 view .LVU677
 2278 004a 4FF01043 		mov	r3, #-1879048192
ARM GAS  /tmp/ccmcLKXV.s 			page 60


 2279 004e 1A68     		ldr	r2, [r3]
 103:Core/Src/quadspi.c ****   }
 2280              		.loc 1 103 21 view .LVU678
 2281 0050 0C4B     		ldr	r3, .L196+16
 2282 0052 1A60     		str	r2, [r3]
 2283              	.L190:
 108:Core/Src/quadspi.c **** #endif
 2284              		.loc 1 108 3 is_stmt 1 view .LVU679
 2285 0054 FFF7FEFF 		bl	QSPI_FlashDemo
 2286              	.LVL121:
 113:Core/Src/quadspi.c **** 
 2287              		.loc 1 113 1 is_stmt 0 view .LVU680
 2288 0058 08BD     		pop	{r3, pc}
 2289              	.L192:
  73:Core/Src/quadspi.c ****   }
 2290              		.loc 1 73 5 is_stmt 1 view .LVU681
 2291 005a FFF7FEFF 		bl	Error_Handler
 2292              	.LVL122:
 2293 005e E5E7     		b	.L186
 2294              	.L193:
  80:Core/Src/quadspi.c ****   }
 2295              		.loc 1 80 5 view .LVU682
 2296 0060 FFF7FEFF 		bl	Error_Handler
 2297              	.LVL123:
 2298 0064 E8E7     		b	.L187
 2299              	.L194:
  84:Core/Src/quadspi.c ****   }
 2300              		.loc 1 84 5 view .LVU683
 2301 0066 FFF7FEFF 		bl	Error_Handler
 2302              	.LVL124:
 2303 006a E8E7     		b	.L188
 2304              	.L195:
  99:Core/Src/quadspi.c ****   }
 2305              		.loc 1 99 5 view .LVU684
 2306 006c FFF7FEFF 		bl	Error_Handler
 2307              	.LVL125:
 2308 0070 F0E7     		b	.L190
 2309              	.L197:
 2310 0072 00BF     		.align	2
 2311              	.L196:
 2312 0074 00000000 		.word	.LANCHOR2
 2313 0078 00500052 		.word	1375752192
 2314 007c 00000000 		.word	.LANCHOR8
 2315 0080 00000000 		.word	.LANCHOR9
 2316 0084 00000000 		.word	.LANCHOR10
 2317              		.cfi_endproc
 2318              	.LFE144:
 2320              		.section	.text.QSPI_IsMemoryMapped,"ax",%progbits
 2321              		.align	1
 2322              		.global	QSPI_IsMemoryMapped
 2323              		.syntax unified
 2324              		.thumb
 2325              		.thumb_func
 2326              		.fpu fpv5-d16
 2328              	QSPI_IsMemoryMapped:
 2329              	.LFB165:
 569:Core/Src/quadspi.c **** 
ARM GAS  /tmp/ccmcLKXV.s 			page 61


 570:Core/Src/quadspi.c **** uint8_t QSPI_IsMemoryMapped(void)
 571:Core/Src/quadspi.c **** {
 2330              		.loc 1 571 1 view -0
 2331              		.cfi_startproc
 2332              		@ args = 0, pretend = 0, frame = 0
 2333              		@ frame_needed = 0, uses_anonymous_args = 0
 2334              		@ link register save eliminated.
 572:Core/Src/quadspi.c ****   return qspi_memory_mapped_entered;
 2335              		.loc 1 572 3 view .LVU686
 2336              		.loc 1 572 10 is_stmt 0 view .LVU687
 2337 0000 014B     		ldr	r3, .L199
 2338 0002 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 573:Core/Src/quadspi.c **** }
 2339              		.loc 1 573 1 view .LVU688
 2340 0004 7047     		bx	lr
 2341              	.L200:
 2342 0006 00BF     		.align	2
 2343              	.L199:
 2344 0008 00000000 		.word	.LANCHOR9
 2345              		.cfi_endproc
 2346              	.LFE165:
 2348              		.section	.text.QSPI_EnableMemoryMappedFast,"ax",%progbits
 2349              		.align	1
 2350              		.global	QSPI_EnableMemoryMappedFast
 2351              		.syntax unified
 2352              		.thumb
 2353              		.thumb_func
 2354              		.fpu fpv5-d16
 2356              	QSPI_EnableMemoryMappedFast:
 2357              	.LFB166:
 574:Core/Src/quadspi.c **** 
 575:Core/Src/quadspi.c **** uint8_t QSPI_EnableMemoryMappedFast(void)
 576:Core/Src/quadspi.c **** {
 2358              		.loc 1 576 1 is_stmt 1 view -0
 2359              		.cfi_startproc
 2360              		@ args = 0, pretend = 0, frame = 0
 2361              		@ frame_needed = 0, uses_anonymous_args = 0
 2362 0000 08B5     		push	{r3, lr}
 2363              	.LCFI60:
 2364              		.cfi_def_cfa_offset 8
 2365              		.cfi_offset 3, -8
 2366              		.cfi_offset 14, -4
 577:Core/Src/quadspi.c ****   /* Re-enter mapping (useful if user disabled at build) */
 578:Core/Src/quadspi.c ****   if (qspi_memory_mapped_entered) return 0;
 2367              		.loc 1 578 3 view .LVU690
 2368              		.loc 1 578 7 is_stmt 0 view .LVU691
 2369 0002 094B     		ldr	r3, .L207
 2370 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2371              		.loc 1 578 6 view .LVU692
 2372 0006 0BB1     		cbz	r3, .L206
 2373              		.loc 1 578 42 view .LVU693
 2374 0008 0020     		movs	r0, #0
 2375              	.L202:
 579:Core/Src/quadspi.c **** #if QSPI_ENABLE_QUAD
 580:Core/Src/quadspi.c ****   if (QSPI_EnableMemoryMappedQuad()) return 1;
 581:Core/Src/quadspi.c **** #else
 582:Core/Src/quadspi.c ****   if (QSPI_EnableMemoryMapped()) return 1;
ARM GAS  /tmp/ccmcLKXV.s 			page 62


 583:Core/Src/quadspi.c **** #endif
 584:Core/Src/quadspi.c ****   qspi_memory_mapped_entered = 1;
 585:Core/Src/quadspi.c ****   qspi_first_word = *(uint32_t*)0x90000000UL;
 586:Core/Src/quadspi.c ****   return 0;
 587:Core/Src/quadspi.c **** }
 2376              		.loc 1 587 1 view .LVU694
 2377 000a 08BD     		pop	{r3, pc}
 2378              	.L206:
 580:Core/Src/quadspi.c **** #else
 2379              		.loc 1 580 3 is_stmt 1 view .LVU695
 580:Core/Src/quadspi.c **** #else
 2380              		.loc 1 580 7 is_stmt 0 view .LVU696
 2381 000c FFF7FEFF 		bl	QSPI_EnableMemoryMappedQuad
 2382              	.LVL126:
 580:Core/Src/quadspi.c **** #else
 2383              		.loc 1 580 6 view .LVU697
 2384 0010 40B9     		cbnz	r0, .L204
 584:Core/Src/quadspi.c ****   qspi_first_word = *(uint32_t*)0x90000000UL;
 2385              		.loc 1 584 3 is_stmt 1 view .LVU698
 584:Core/Src/quadspi.c ****   qspi_first_word = *(uint32_t*)0x90000000UL;
 2386              		.loc 1 584 30 is_stmt 0 view .LVU699
 2387 0012 054B     		ldr	r3, .L207
 2388 0014 0122     		movs	r2, #1
 2389 0016 1A70     		strb	r2, [r3]
 585:Core/Src/quadspi.c ****   return 0;
 2390              		.loc 1 585 3 is_stmt 1 view .LVU700
 585:Core/Src/quadspi.c ****   return 0;
 2391              		.loc 1 585 21 is_stmt 0 view .LVU701
 2392 0018 4FF01043 		mov	r3, #-1879048192
 2393 001c 1A68     		ldr	r2, [r3]
 585:Core/Src/quadspi.c ****   return 0;
 2394              		.loc 1 585 19 view .LVU702
 2395 001e 034B     		ldr	r3, .L207+4
 2396 0020 1A60     		str	r2, [r3]
 586:Core/Src/quadspi.c **** }
 2397              		.loc 1 586 3 is_stmt 1 view .LVU703
 586:Core/Src/quadspi.c **** }
 2398              		.loc 1 586 10 is_stmt 0 view .LVU704
 2399 0022 F2E7     		b	.L202
 2400              	.L204:
 580:Core/Src/quadspi.c **** #else
 2401              		.loc 1 580 45 view .LVU705
 2402 0024 0120     		movs	r0, #1
 2403 0026 F0E7     		b	.L202
 2404              	.L208:
 2405              		.align	2
 2406              	.L207:
 2407 0028 00000000 		.word	.LANCHOR9
 2408 002c 00000000 		.word	.LANCHOR10
 2409              		.cfi_endproc
 2410              	.LFE166:
 2412              		.section	.text.QSPI_ProgramPatternIfBlank,"ax",%progbits
 2413              		.align	1
 2414              		.global	QSPI_ProgramPatternIfBlank
 2415              		.syntax unified
 2416              		.thumb
 2417              		.thumb_func
ARM GAS  /tmp/ccmcLKXV.s 			page 63


 2418              		.fpu fpv5-d16
 2420              	QSPI_ProgramPatternIfBlank:
 2421              	.LFB167:
 588:Core/Src/quadspi.c **** 
 589:Core/Src/quadspi.c **** uint8_t QSPI_ProgramPatternIfBlank(void)
 590:Core/Src/quadspi.c **** {
 2422              		.loc 1 590 1 is_stmt 1 view -0
 2423              		.cfi_startproc
 2424              		@ args = 0, pretend = 0, frame = 0
 2425              		@ frame_needed = 0, uses_anonymous_args = 0
 2426              		@ link register save eliminated.
 591:Core/Src/quadspi.c **** #if !QSPI_ENABLE_PATTERN_FILL
 592:Core/Src/quadspi.c ****   return 0;
 2427              		.loc 1 592 3 view .LVU707
 593:Core/Src/quadspi.c **** #else
 594:Core/Src/quadspi.c ****   /* Simple heuristic: read first 16 bytes; if all 0xFF, assume blank and program pattern length */
 595:Core/Src/quadspi.c ****   uint8_t *mapped = (uint8_t*)0x90000000UL;
 596:Core/Src/quadspi.c ****   int blank = 1;
 597:Core/Src/quadspi.c ****   for (int i=0;i<16;i++) if (mapped[i] != 0xFF) { blank = 0; break; }
 598:Core/Src/quadspi.c ****   if (!blank) return 0;
 599:Core/Src/quadspi.c ****   uint32_t remaining = QSPI_PATTERN_LEN_BYTES;
 600:Core/Src/quadspi.c ****   if (remaining == 0) return 0;
 601:Core/Src/quadspi.c ****   if (remaining > MEMORY_FLASH_SIZE) remaining = MEMORY_FLASH_SIZE;
 602:Core/Src/quadspi.c ****   /* Pattern: byte = (addr & 0xFF) ^ 0xA5 */
 603:Core/Src/quadspi.c ****   uint8_t page[MEMORY_PAGE_SIZE];
 604:Core/Src/quadspi.c ****   uint32_t addr = 0;
 605:Core/Src/quadspi.c ****   while (remaining)
 606:Core/Src/quadspi.c ****   {
 607:Core/Src/quadspi.c ****     uint32_t chunk = (remaining > MEMORY_PAGE_SIZE) ? MEMORY_PAGE_SIZE : remaining;
 608:Core/Src/quadspi.c ****     for (uint32_t i=0;i<chunk;i++) page[i] = (uint8_t)(((addr+i)&0xFF) ^ 0xA5);
 609:Core/Src/quadspi.c ****     if (QSPI_EraseSector(addr & ~(MEMORY_SECTOR_SIZE-1))) return 1; /* naive: erase each sector whe
 610:Core/Src/quadspi.c ****     if (QSPI_PageProgram(addr, page, chunk)) return 2;
 611:Core/Src/quadspi.c ****     addr += chunk;
 612:Core/Src/quadspi.c ****     remaining -= chunk;
 613:Core/Src/quadspi.c ****   }
 614:Core/Src/quadspi.c ****   return 0;
 615:Core/Src/quadspi.c **** #endif
 616:Core/Src/quadspi.c **** }
 2428              		.loc 1 616 1 is_stmt 0 view .LVU708
 2429 0000 0020     		movs	r0, #0
 2430 0002 7047     		bx	lr
 2431              		.cfi_endproc
 2432              	.LFE167:
 2434              		.section	.text.QSPI_AppHeaderValid,"ax",%progbits
 2435              		.align	1
 2436              		.global	QSPI_AppHeaderValid
 2437              		.syntax unified
 2438              		.thumb
 2439              		.thumb_func
 2440              		.fpu fpv5-d16
 2442              	QSPI_AppHeaderValid:
 2443              	.LVL127:
 2444              	.LFB168:
 617:Core/Src/quadspi.c **** 
 618:Core/Src/quadspi.c **** uint8_t QSPI_AppHeaderValid(const qspi_app_header_t *hdr)
 619:Core/Src/quadspi.c **** {
 2445              		.loc 1 619 1 is_stmt 1 view -0
ARM GAS  /tmp/ccmcLKXV.s 			page 64


 2446              		.cfi_startproc
 2447              		@ args = 0, pretend = 0, frame = 0
 2448              		@ frame_needed = 0, uses_anonymous_args = 0
 2449              		@ link register save eliminated.
 620:Core/Src/quadspi.c **** #if !QSPI_ENABLE_APP_HEADER_CHECK
 621:Core/Src/quadspi.c ****   (void)hdr; return 1; /* treat as valid if feature disabled */
 2450              		.loc 1 621 3 view .LVU710
 2451              		.loc 1 621 14 view .LVU711
 622:Core/Src/quadspi.c **** #else
 623:Core/Src/quadspi.c ****   if (!hdr) return 0;
 624:Core/Src/quadspi.c ****   if (hdr->magic != QSPI_APP_MAGIC) return 0;
 625:Core/Src/quadspi.c ****   if (hdr->length == 0 || hdr->length > (MEMORY_FLASH_SIZE - sizeof(qspi_app_header_t))) return 0;
 626:Core/Src/quadspi.c ****   /* CRC check left to boot stub (reading over mapped region) - here we only do structural check */
 627:Core/Src/quadspi.c ****   return 1;
 628:Core/Src/quadspi.c **** #endif
 629:Core/Src/quadspi.c **** }
 2452              		.loc 1 629 1 is_stmt 0 view .LVU712
 2453 0000 0120     		movs	r0, #1
 2454              	.LVL128:
 2455              		.loc 1 629 1 view .LVU713
 2456 0002 7047     		bx	lr
 2457              		.cfi_endproc
 2458              	.LFE168:
 2460              		.section	.text.QSPI_ReadDeviceID_90,"ax",%progbits
 2461              		.align	1
 2462              		.global	QSPI_ReadDeviceID_90
 2463              		.syntax unified
 2464              		.thumb
 2465              		.thumb_func
 2466              		.fpu fpv5-d16
 2468              	QSPI_ReadDeviceID_90:
 2469              	.LVL129:
 2470              	.LFB169:
 630:Core/Src/quadspi.c **** 
 631:Core/Src/quadspi.c **** uint32_t QSPI_ReadDeviceID_90(uint8_t *mid, uint8_t *devid)
 632:Core/Src/quadspi.c **** {
 2471              		.loc 1 632 1 is_stmt 1 view -0
 2472              		.cfi_startproc
 2473              		@ args = 0, pretend = 0, frame = 64
 2474              		@ frame_needed = 0, uses_anonymous_args = 0
 2475              		.loc 1 632 1 is_stmt 0 view .LVU715
 2476 0000 30B5     		push	{r4, r5, lr}
 2477              	.LCFI61:
 2478              		.cfi_def_cfa_offset 12
 2479              		.cfi_offset 4, -12
 2480              		.cfi_offset 5, -8
 2481              		.cfi_offset 14, -4
 2482 0002 91B0     		sub	sp, sp, #68
 2483              	.LCFI62:
 2484              		.cfi_def_cfa_offset 80
 2485 0004 0546     		mov	r5, r0
 2486 0006 0C46     		mov	r4, r1
 633:Core/Src/quadspi.c ****   QSPI_CommandTypeDef cmd = {0};
 2487              		.loc 1 633 3 is_stmt 1 view .LVU716
 2488              		.loc 1 633 23 is_stmt 0 view .LVU717
 2489 0008 3822     		movs	r2, #56
 2490 000a 0021     		movs	r1, #0
ARM GAS  /tmp/ccmcLKXV.s 			page 65


 2491              	.LVL130:
 2492              		.loc 1 633 23 view .LVU718
 2493 000c 02A8     		add	r0, sp, #8
 2494              	.LVL131:
 2495              		.loc 1 633 23 view .LVU719
 2496 000e FFF7FEFF 		bl	memset
 2497              	.LVL132:
 634:Core/Src/quadspi.c ****   uint8_t rx[2] = {0};
 2498              		.loc 1 634 3 is_stmt 1 view .LVU720
 2499              		.loc 1 634 11 is_stmt 0 view .LVU721
 2500 0012 0023     		movs	r3, #0
 2501 0014 ADF80430 		strh	r3, [sp, #4]	@ movhi
 635:Core/Src/quadspi.c ****   cmd.InstructionMode = QSPI_INSTRUCTION_1_LINE;
 2502              		.loc 1 635 3 is_stmt 1 view .LVU722
 2503              		.loc 1 635 23 is_stmt 0 view .LVU723
 2504 0018 4FF48073 		mov	r3, #256
 2505 001c 0893     		str	r3, [sp, #32]
 636:Core/Src/quadspi.c ****   cmd.Instruction     = W25Q128_CMD_DEVICE_ID; /* 0x90 */
 2506              		.loc 1 636 3 is_stmt 1 view .LVU724
 2507              		.loc 1 636 23 is_stmt 0 view .LVU725
 2508 001e 9023     		movs	r3, #144
 2509 0020 0293     		str	r3, [sp, #8]
 637:Core/Src/quadspi.c ****   cmd.AddressMode     = QSPI_ADDRESS_1_LINE;
 2510              		.loc 1 637 3 is_stmt 1 view .LVU726
 2511              		.loc 1 637 23 is_stmt 0 view .LVU727
 2512 0022 4FF48063 		mov	r3, #1024
 2513 0026 0993     		str	r3, [sp, #36]
 638:Core/Src/quadspi.c ****   cmd.AddressSize     = QSPI_ADDRESS_24_BITS;
 2514              		.loc 1 638 3 is_stmt 1 view .LVU728
 2515              		.loc 1 638 23 is_stmt 0 view .LVU729
 2516 0028 4FF40053 		mov	r3, #8192
 2517 002c 0593     		str	r3, [sp, #20]
 639:Core/Src/quadspi.c ****   cmd.Address         = 0x000000; /* dummy address */
 2518              		.loc 1 639 3 is_stmt 1 view .LVU730
 640:Core/Src/quadspi.c ****   cmd.AlternateByteMode = QSPI_ALTERNATE_BYTES_NONE;
 2519              		.loc 1 640 3 view .LVU731
 641:Core/Src/quadspi.c ****   cmd.DataMode        = QSPI_DATA_1_LINE;
 2520              		.loc 1 641 3 view .LVU732
 2521              		.loc 1 641 23 is_stmt 0 view .LVU733
 2522 002e 4FF08073 		mov	r3, #16777216
 2523 0032 0B93     		str	r3, [sp, #44]
 642:Core/Src/quadspi.c ****   cmd.DummyCycles     = 0;
 2524              		.loc 1 642 3 is_stmt 1 view .LVU734
 643:Core/Src/quadspi.c ****   cmd.NbData          = 2;
 2525              		.loc 1 643 3 view .LVU735
 2526              		.loc 1 643 23 is_stmt 0 view .LVU736
 2527 0034 0223     		movs	r3, #2
 2528 0036 0C93     		str	r3, [sp, #48]
 644:Core/Src/quadspi.c ****   if (HAL_QSPI_Command(&hqspi, &cmd, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 2529              		.loc 1 644 3 is_stmt 1 view .LVU737
 2530              		.loc 1 644 7 is_stmt 0 view .LVU738
 2531 0038 41F28832 		movw	r2, #5000
 2532 003c 02A9     		add	r1, sp, #8
 2533 003e 0E48     		ldr	r0, .L219
 2534 0040 FFF7FEFF 		bl	HAL_QSPI_Command
 2535              	.LVL133:
 2536              		.loc 1 644 6 view .LVU739
ARM GAS  /tmp/ccmcLKXV.s 			page 66


 2537 0044 10B1     		cbz	r0, .L218
 645:Core/Src/quadspi.c ****     return 1;
 2538              		.loc 1 645 12 view .LVU740
 2539 0046 0120     		movs	r0, #1
 2540              	.L211:
 646:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, rx, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 647:Core/Src/quadspi.c ****     return 2;
 648:Core/Src/quadspi.c ****   if (mid)   *mid   = rx[0];
 649:Core/Src/quadspi.c ****   if (devid) *devid = rx[1];
 650:Core/Src/quadspi.c ****   return 0;
 651:Core/Src/quadspi.c **** }
 2541              		.loc 1 651 1 view .LVU741
 2542 0048 11B0     		add	sp, sp, #68
 2543              	.LCFI63:
 2544              		.cfi_remember_state
 2545              		.cfi_def_cfa_offset 12
 2546              		@ sp needed
 2547 004a 30BD     		pop	{r4, r5, pc}
 2548              	.LVL134:
 2549              	.L218:
 2550              	.LCFI64:
 2551              		.cfi_restore_state
 646:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, rx, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 2552              		.loc 1 646 3 is_stmt 1 view .LVU742
 646:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, rx, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 2553              		.loc 1 646 7 is_stmt 0 view .LVU743
 2554 004c 41F28832 		movw	r2, #5000
 2555 0050 01A9     		add	r1, sp, #4
 2556 0052 0948     		ldr	r0, .L219
 2557 0054 FFF7FEFF 		bl	HAL_QSPI_Receive
 2558              	.LVL135:
 646:Core/Src/quadspi.c ****   if (HAL_QSPI_Receive(&hqspi, rx, HAL_QSPI_TIMEOUT_DEFAULT_VALUE) != HAL_OK)
 2559              		.loc 1 646 6 view .LVU744
 2560 0058 48B9     		cbnz	r0, .L215
 648:Core/Src/quadspi.c ****   if (devid) *devid = rx[1];
 2561              		.loc 1 648 3 is_stmt 1 view .LVU745
 648:Core/Src/quadspi.c ****   if (devid) *devid = rx[1];
 2562              		.loc 1 648 6 is_stmt 0 view .LVU746
 2563 005a 15B1     		cbz	r5, .L213
 648:Core/Src/quadspi.c ****   if (devid) *devid = rx[1];
 2564              		.loc 1 648 14 is_stmt 1 discriminator 1 view .LVU747
 648:Core/Src/quadspi.c ****   if (devid) *devid = rx[1];
 2565              		.loc 1 648 25 is_stmt 0 discriminator 1 view .LVU748
 2566 005c 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 648:Core/Src/quadspi.c ****   if (devid) *devid = rx[1];
 2567              		.loc 1 648 21 discriminator 1 view .LVU749
 2568 0060 2B70     		strb	r3, [r5]
 2569              	.L213:
 649:Core/Src/quadspi.c ****   return 0;
 2570              		.loc 1 649 3 is_stmt 1 view .LVU750
 649:Core/Src/quadspi.c ****   return 0;
 2571              		.loc 1 649 6 is_stmt 0 view .LVU751
 2572 0062 34B1     		cbz	r4, .L216
 649:Core/Src/quadspi.c ****   return 0;
 2573              		.loc 1 649 14 is_stmt 1 discriminator 1 view .LVU752
 649:Core/Src/quadspi.c ****   return 0;
 2574              		.loc 1 649 25 is_stmt 0 discriminator 1 view .LVU753
ARM GAS  /tmp/ccmcLKXV.s 			page 67


 2575 0064 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 649:Core/Src/quadspi.c ****   return 0;
 2576              		.loc 1 649 21 discriminator 1 view .LVU754
 2577 0068 2370     		strb	r3, [r4]
 650:Core/Src/quadspi.c **** }
 2578              		.loc 1 650 10 discriminator 1 view .LVU755
 2579 006a 0020     		movs	r0, #0
 2580 006c ECE7     		b	.L211
 2581              	.L215:
 647:Core/Src/quadspi.c ****   if (mid)   *mid   = rx[0];
 2582              		.loc 1 647 12 view .LVU756
 2583 006e 0220     		movs	r0, #2
 2584 0070 EAE7     		b	.L211
 2585              	.L216:
 650:Core/Src/quadspi.c **** }
 2586              		.loc 1 650 10 view .LVU757
 2587 0072 0020     		movs	r0, #0
 2588 0074 E8E7     		b	.L211
 2589              	.L220:
 2590 0076 00BF     		.align	2
 2591              	.L219:
 2592 0078 00000000 		.word	.LANCHOR2
 2593              		.cfi_endproc
 2594              	.LFE169:
 2596              		.section	.text.QSPI_EraseRange,"ax",%progbits
 2597              		.align	1
 2598              		.global	QSPI_EraseRange
 2599              		.syntax unified
 2600              		.thumb
 2601              		.thumb_func
 2602              		.fpu fpv5-d16
 2604              	QSPI_EraseRange:
 2605              	.LVL136:
 2606              	.LFB170:
 652:Core/Src/quadspi.c **** 
 653:Core/Src/quadspi.c **** uint8_t QSPI_EraseRange(uint32_t address, uint32_t length)
 654:Core/Src/quadspi.c **** {
 2607              		.loc 1 654 1 is_stmt 1 view -0
 2608              		.cfi_startproc
 2609              		@ args = 0, pretend = 0, frame = 0
 2610              		@ frame_needed = 0, uses_anonymous_args = 0
 2611              		.loc 1 654 1 is_stmt 0 view .LVU759
 2612 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2613              	.LCFI65:
 2614              		.cfi_def_cfa_offset 24
 2615              		.cfi_offset 3, -24
 2616              		.cfi_offset 4, -20
 2617              		.cfi_offset 5, -16
 2618              		.cfi_offset 6, -12
 2619              		.cfi_offset 7, -8
 2620              		.cfi_offset 14, -4
 655:Core/Src/quadspi.c ****   if (length == 0) return 0;
 2621              		.loc 1 655 3 is_stmt 1 view .LVU760
 2622              		.loc 1 655 6 is_stmt 0 view .LVU761
 2623 0002 A1B1     		cbz	r1, .L225
 2624 0004 0546     		mov	r5, r0
 2625 0006 0E46     		mov	r6, r1
ARM GAS  /tmp/ccmcLKXV.s 			page 68


 656:Core/Src/quadspi.c ****   if ((address % MEMORY_SECTOR_SIZE) != 0U) return 1;
 2626              		.loc 1 656 3 is_stmt 1 view .LVU762
 2627              		.loc 1 656 16 is_stmt 0 view .LVU763
 2628 0008 C0F30B03 		ubfx	r3, r0, #0, #12
 2629              		.loc 1 656 6 view .LVU764
 2630 000c 93B9     		cbnz	r3, .L226
 657:Core/Src/quadspi.c ****   if ((length % MEMORY_SECTOR_SIZE) != 0U) return 2;
 2631              		.loc 1 657 3 is_stmt 1 view .LVU765
 2632              		.loc 1 657 15 is_stmt 0 view .LVU766
 2633 000e C1F30B04 		ubfx	r4, r1, #0, #12
 2634              		.loc 1 657 6 view .LVU767
 2635 0012 8CB9     		cbnz	r4, .L227
 658:Core/Src/quadspi.c ****   if (QSPI_CheckRange(address, length)) return 3;
 2636              		.loc 1 658 3 is_stmt 1 view .LVU768
 2637              		.loc 1 658 7 is_stmt 0 view .LVU769
 2638 0014 FFF7FEFF 		bl	QSPI_CheckRange
 2639              	.LVL137:
 2640              		.loc 1 658 6 view .LVU770
 2641 0018 0746     		mov	r7, r0
 2642 001a 78B9     		cbnz	r0, .L231
 2643              	.L223:
 2644              	.LVL138:
 2645              	.LBB17:
 659:Core/Src/quadspi.c ****   for (uint32_t offset = 0; offset < length; offset += MEMORY_SECTOR_SIZE) {
 2646              		.loc 1 659 29 is_stmt 1 discriminator 1 view .LVU771
 2647              		.loc 1 659 3 is_stmt 0 discriminator 1 view .LVU772
 2648 001c B442     		cmp	r4, r6
 2649 001e 07D2     		bcs	.L222
 660:Core/Src/quadspi.c ****     if (QSPI_EraseSector(address + offset)) return 4;
 2650              		.loc 1 660 5 is_stmt 1 view .LVU773
 2651              		.loc 1 660 9 is_stmt 0 view .LVU774
 2652 0020 6019     		adds	r0, r4, r5
 2653 0022 FFF7FEFF 		bl	QSPI_EraseSector
 2654              	.LVL139:
 2655              		.loc 1 660 8 view .LVU775
 2656 0026 58B9     		cbnz	r0, .L229
 659:Core/Src/quadspi.c ****   for (uint32_t offset = 0; offset < length; offset += MEMORY_SECTOR_SIZE) {
 2657              		.loc 1 659 46 is_stmt 1 discriminator 2 view .LVU776
 659:Core/Src/quadspi.c ****   for (uint32_t offset = 0; offset < length; offset += MEMORY_SECTOR_SIZE) {
 2658              		.loc 1 659 53 is_stmt 0 discriminator 2 view .LVU777
 2659 0028 04F58054 		add	r4, r4, #4096
 2660              	.LVL140:
 659:Core/Src/quadspi.c ****   for (uint32_t offset = 0; offset < length; offset += MEMORY_SECTOR_SIZE) {
 2661              		.loc 1 659 53 discriminator 2 view .LVU778
 2662 002c F6E7     		b	.L223
 2663              	.LVL141:
 2664              	.L225:
 659:Core/Src/quadspi.c ****   for (uint32_t offset = 0; offset < length; offset += MEMORY_SECTOR_SIZE) {
 2665              		.loc 1 659 53 discriminator 2 view .LVU779
 2666              	.LBE17:
 655:Core/Src/quadspi.c ****   if ((address % MEMORY_SECTOR_SIZE) != 0U) return 1;
 2667              		.loc 1 655 27 view .LVU780
 2668 002e 0027     		movs	r7, #0
 2669              	.LVL142:
 2670              	.L222:
 661:Core/Src/quadspi.c ****   }
 662:Core/Src/quadspi.c ****   return 0;
ARM GAS  /tmp/ccmcLKXV.s 			page 69


 663:Core/Src/quadspi.c **** }
 2671              		.loc 1 663 1 view .LVU781
 2672 0030 3846     		mov	r0, r7
 2673 0032 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2674              	.LVL143:
 2675              	.L226:
 656:Core/Src/quadspi.c ****   if ((length % MEMORY_SECTOR_SIZE) != 0U) return 2;
 2676              		.loc 1 656 52 view .LVU782
 2677 0034 0127     		movs	r7, #1
 2678 0036 FBE7     		b	.L222
 2679              	.L227:
 657:Core/Src/quadspi.c ****   if (QSPI_CheckRange(address, length)) return 3;
 2680              		.loc 1 657 51 view .LVU783
 2681 0038 0227     		movs	r7, #2
 2682 003a F9E7     		b	.L222
 2683              	.LVL144:
 2684              	.L231:
 658:Core/Src/quadspi.c ****   for (uint32_t offset = 0; offset < length; offset += MEMORY_SECTOR_SIZE) {
 2685              		.loc 1 658 48 view .LVU784
 2686 003c 0327     		movs	r7, #3
 2687 003e F7E7     		b	.L222
 2688              	.LVL145:
 2689              	.L229:
 2690              	.LBB18:
 660:Core/Src/quadspi.c ****   }
 2691              		.loc 1 660 52 view .LVU785
 2692 0040 0427     		movs	r7, #4
 2693 0042 F5E7     		b	.L222
 2694              	.LBE18:
 2695              		.cfi_endproc
 2696              	.LFE170:
 2698              		.section	.text.QSPI_WriteBuffer,"ax",%progbits
 2699              		.align	1
 2700              		.global	QSPI_WriteBuffer
 2701              		.syntax unified
 2702              		.thumb
 2703              		.thumb_func
 2704              		.fpu fpv5-d16
 2706              	QSPI_WriteBuffer:
 2707              	.LVL146:
 2708              	.LFB171:
 664:Core/Src/quadspi.c **** 
 665:Core/Src/quadspi.c **** uint8_t QSPI_WriteBuffer(uint32_t address, const uint8_t *data, uint32_t length)
 666:Core/Src/quadspi.c **** {
 2709              		.loc 1 666 1 is_stmt 1 view -0
 2710              		.cfi_startproc
 2711              		@ args = 0, pretend = 0, frame = 0
 2712              		@ frame_needed = 0, uses_anonymous_args = 0
 2713              		.loc 1 666 1 is_stmt 0 view .LVU787
 2714 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2715              	.LCFI66:
 2716              		.cfi_def_cfa_offset 24
 2717              		.cfi_offset 4, -24
 2718              		.cfi_offset 5, -20
 2719              		.cfi_offset 6, -16
 2720              		.cfi_offset 7, -12
 2721              		.cfi_offset 8, -8
ARM GAS  /tmp/ccmcLKXV.s 			page 70


 2722              		.cfi_offset 14, -4
 667:Core/Src/quadspi.c ****   if (length == 0) return 0;
 2723              		.loc 1 667 3 is_stmt 1 view .LVU788
 2724              		.loc 1 667 6 is_stmt 0 view .LVU789
 2725 0004 E2B1     		cbz	r2, .L237
 2726 0006 0646     		mov	r6, r0
 2727 0008 0F46     		mov	r7, r1
 2728 000a 1546     		mov	r5, r2
 668:Core/Src/quadspi.c ****   if (!data) return 1;
 2729              		.loc 1 668 3 is_stmt 1 view .LVU790
 2730              		.loc 1 668 6 is_stmt 0 view .LVU791
 2731 000c E9B1     		cbz	r1, .L238
 669:Core/Src/quadspi.c ****   if (QSPI_CheckRange(address, length)) return 2;
 2732              		.loc 1 669 3 is_stmt 1 view .LVU792
 2733              		.loc 1 669 7 is_stmt 0 view .LVU793
 2734 000e 1146     		mov	r1, r2
 2735              	.LVL147:
 2736              		.loc 1 669 7 view .LVU794
 2737 0010 FFF7FEFF 		bl	QSPI_CheckRange
 2738              	.LVL148:
 2739              		.loc 1 669 6 view .LVU795
 2740 0014 8046     		mov	r8, r0
 2741 0016 58B1     		cbz	r0, .L234
 2742              		.loc 1 669 48 view .LVU796
 2743 0018 4FF00208 		mov	r8, #2
 2744 001c 12E0     		b	.L233
 2745              	.LVL149:
 2746              	.L235:
 2747              	.LBB19:
 670:Core/Src/quadspi.c ****   uint32_t remaining = length;
 671:Core/Src/quadspi.c ****   uint32_t current = address;
 672:Core/Src/quadspi.c ****   const uint8_t *cursor = data;
 673:Core/Src/quadspi.c ****   while (remaining) {
 674:Core/Src/quadspi.c ****     uint32_t page_offset = current % MEMORY_PAGE_SIZE;
 675:Core/Src/quadspi.c ****     uint32_t chunk = MEMORY_PAGE_SIZE - page_offset;
 676:Core/Src/quadspi.c ****     if (chunk > remaining) chunk = remaining;
 677:Core/Src/quadspi.c ****     if (QSPI_PageProgram(current, cursor, chunk)) return 3;
 2748              		.loc 1 677 5 is_stmt 1 view .LVU797
 2749              		.loc 1 677 9 is_stmt 0 view .LVU798
 2750 001e 2246     		mov	r2, r4
 2751 0020 3946     		mov	r1, r7
 2752 0022 3046     		mov	r0, r6
 2753 0024 FFF7FEFF 		bl	QSPI_PageProgram
 2754              	.LVL150:
 2755              		.loc 1 677 8 view .LVU799
 2756 0028 90B9     		cbnz	r0, .L241
 678:Core/Src/quadspi.c ****     current += chunk;
 2757              		.loc 1 678 5 is_stmt 1 view .LVU800
 2758              		.loc 1 678 13 is_stmt 0 view .LVU801
 2759 002a 2644     		add	r6, r6, r4
 2760              	.LVL151:
 679:Core/Src/quadspi.c ****     cursor += chunk;
 2761              		.loc 1 679 5 is_stmt 1 view .LVU802
 2762              		.loc 1 679 12 is_stmt 0 view .LVU803
 2763 002c 2744     		add	r7, r7, r4
 2764              	.LVL152:
 680:Core/Src/quadspi.c ****     remaining -= chunk;
ARM GAS  /tmp/ccmcLKXV.s 			page 71


 2765              		.loc 1 680 5 is_stmt 1 view .LVU804
 2766              		.loc 1 680 15 is_stmt 0 view .LVU805
 2767 002e 2D1B     		subs	r5, r5, r4
 2768              	.LVL153:
 2769              	.L234:
 2770              		.loc 1 680 15 view .LVU806
 2771              	.LBE19:
 673:Core/Src/quadspi.c ****     uint32_t page_offset = current % MEMORY_PAGE_SIZE;
 2772              		.loc 1 673 9 is_stmt 1 view .LVU807
 2773 0030 45B1     		cbz	r5, .L233
 2774              	.LBB20:
 674:Core/Src/quadspi.c ****     uint32_t chunk = MEMORY_PAGE_SIZE - page_offset;
 2775              		.loc 1 674 5 view .LVU808
 674:Core/Src/quadspi.c ****     uint32_t chunk = MEMORY_PAGE_SIZE - page_offset;
 2776              		.loc 1 674 14 is_stmt 0 view .LVU809
 2777 0032 F4B2     		uxtb	r4, r6
 2778              	.LVL154:
 675:Core/Src/quadspi.c ****     if (chunk > remaining) chunk = remaining;
 2779              		.loc 1 675 5 is_stmt 1 view .LVU810
 675:Core/Src/quadspi.c ****     if (chunk > remaining) chunk = remaining;
 2780              		.loc 1 675 14 is_stmt 0 view .LVU811
 2781 0034 C4F58074 		rsb	r4, r4, #256
 2782              	.LVL155:
 676:Core/Src/quadspi.c ****     if (QSPI_PageProgram(current, cursor, chunk)) return 3;
 2783              		.loc 1 676 5 is_stmt 1 view .LVU812
 676:Core/Src/quadspi.c ****     if (QSPI_PageProgram(current, cursor, chunk)) return 3;
 2784              		.loc 1 676 8 is_stmt 0 view .LVU813
 2785 0038 A542     		cmp	r5, r4
 2786 003a F0D2     		bcs	.L235
 676:Core/Src/quadspi.c ****     if (QSPI_PageProgram(current, cursor, chunk)) return 3;
 2787              		.loc 1 676 34 view .LVU814
 2788 003c 2C46     		mov	r4, r5
 2789              	.LVL156:
 676:Core/Src/quadspi.c ****     if (QSPI_PageProgram(current, cursor, chunk)) return 3;
 2790              		.loc 1 676 34 view .LVU815
 2791 003e EEE7     		b	.L235
 2792              	.LVL157:
 2793              	.L237:
 676:Core/Src/quadspi.c ****     if (QSPI_PageProgram(current, cursor, chunk)) return 3;
 2794              		.loc 1 676 34 view .LVU816
 2795              	.LBE20:
 667:Core/Src/quadspi.c ****   if (!data) return 1;
 2796              		.loc 1 667 27 view .LVU817
 2797 0040 4FF00008 		mov	r8, #0
 2798              	.LVL158:
 2799              	.L233:
 681:Core/Src/quadspi.c ****   }
 682:Core/Src/quadspi.c ****   return 0;
 683:Core/Src/quadspi.c **** }
 2800              		.loc 1 683 1 view .LVU818
 2801 0044 4046     		mov	r0, r8
 2802 0046 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2803              	.LVL159:
 2804              	.L238:
 668:Core/Src/quadspi.c ****   if (QSPI_CheckRange(address, length)) return 2;
 2805              		.loc 1 668 21 view .LVU819
 2806 004a 4FF00108 		mov	r8, #1
ARM GAS  /tmp/ccmcLKXV.s 			page 72


 2807 004e F9E7     		b	.L233
 2808              	.LVL160:
 2809              	.L241:
 2810              	.LBB21:
 677:Core/Src/quadspi.c ****     current += chunk;
 2811              		.loc 1 677 58 view .LVU820
 2812 0050 4FF00308 		mov	r8, #3
 2813 0054 F6E7     		b	.L233
 2814              	.LBE21:
 2815              		.cfi_endproc
 2816              	.LFE171:
 2818              		.section	.text.QSPI_ReadBuffer,"ax",%progbits
 2819              		.align	1
 2820              		.global	QSPI_ReadBuffer
 2821              		.syntax unified
 2822              		.thumb
 2823              		.thumb_func
 2824              		.fpu fpv5-d16
 2826              	QSPI_ReadBuffer:
 2827              	.LVL161:
 2828              	.LFB172:
 684:Core/Src/quadspi.c **** 
 685:Core/Src/quadspi.c **** uint8_t QSPI_ReadBuffer(uint32_t address, uint8_t *data, uint32_t length)
 686:Core/Src/quadspi.c **** {
 2829              		.loc 1 686 1 is_stmt 1 view -0
 2830              		.cfi_startproc
 2831              		@ args = 0, pretend = 0, frame = 0
 2832              		@ frame_needed = 0, uses_anonymous_args = 0
 2833              		.loc 1 686 1 is_stmt 0 view .LVU822
 2834 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2835              	.LCFI67:
 2836              		.cfi_def_cfa_offset 24
 2837              		.cfi_offset 4, -24
 2838              		.cfi_offset 5, -20
 2839              		.cfi_offset 6, -16
 2840              		.cfi_offset 7, -12
 2841              		.cfi_offset 8, -8
 2842              		.cfi_offset 14, -4
 687:Core/Src/quadspi.c ****   if (length == 0) return 0;
 2843              		.loc 1 687 3 is_stmt 1 view .LVU823
 2844              		.loc 1 687 6 is_stmt 0 view .LVU824
 2845 0004 CAB1     		cbz	r2, .L247
 2846 0006 0746     		mov	r7, r0
 2847 0008 0E46     		mov	r6, r1
 2848 000a 1546     		mov	r5, r2
 688:Core/Src/quadspi.c ****   if (!data) return 1;
 2849              		.loc 1 688 3 is_stmt 1 view .LVU825
 2850              		.loc 1 688 6 is_stmt 0 view .LVU826
 2851 000c D1B1     		cbz	r1, .L248
 689:Core/Src/quadspi.c ****   if (QSPI_CheckRange(address, length)) return 2;
 2852              		.loc 1 689 3 is_stmt 1 view .LVU827
 2853              		.loc 1 689 7 is_stmt 0 view .LVU828
 2854 000e 1146     		mov	r1, r2
 2855              	.LVL162:
 2856              		.loc 1 689 7 view .LVU829
 2857 0010 FFF7FEFF 		bl	QSPI_CheckRange
 2858              	.LVL163:
ARM GAS  /tmp/ccmcLKXV.s 			page 73


 2859              		.loc 1 689 6 view .LVU830
 2860 0014 8046     		mov	r8, r0
 2861 0016 C0B9     		cbnz	r0, .L252
 2862              	.LVL164:
 2863              	.L245:
 690:Core/Src/quadspi.c ****   uint32_t remaining = length;
 691:Core/Src/quadspi.c ****   uint32_t current = address;
 692:Core/Src/quadspi.c ****   uint8_t *cursor = data;
 693:Core/Src/quadspi.c ****   while (remaining) {
 2864              		.loc 1 693 9 is_stmt 1 view .LVU831
 2865 0018 8DB1     		cbz	r5, .L244
 2866              	.LBB22:
 694:Core/Src/quadspi.c ****     uint32_t chunk = (remaining > QSPI_RW_CHUNK_MAX_BYTES) ? QSPI_RW_CHUNK_MAX_BYTES : remaining;
 2867              		.loc 1 694 5 view .LVU832
 2868              		.loc 1 694 14 is_stmt 0 view .LVU833
 2869 001a 2C46     		mov	r4, r5
 2870 001c B5F5803F 		cmp	r5, #65536
 2871 0020 28BF     		it	cs
 2872 0022 4FF48034 		movcs	r4, #65536
 2873              	.LVL165:
 695:Core/Src/quadspi.c ****     if (QSPI_ReadChunk(current, cursor, chunk)) return 3;
 2874              		.loc 1 695 5 is_stmt 1 view .LVU834
 2875              		.loc 1 695 9 is_stmt 0 view .LVU835
 2876 0026 2246     		mov	r2, r4
 2877 0028 3146     		mov	r1, r6
 2878 002a 3846     		mov	r0, r7
 2879 002c FFF7FEFF 		bl	QSPI_ReadChunk
 2880              	.LVL166:
 2881              		.loc 1 695 8 view .LVU836
 2882 0030 70B9     		cbnz	r0, .L250
 696:Core/Src/quadspi.c ****     current += chunk;
 2883              		.loc 1 696 5 is_stmt 1 view .LVU837
 2884              		.loc 1 696 13 is_stmt 0 view .LVU838
 2885 0032 2744     		add	r7, r7, r4
 2886              	.LVL167:
 697:Core/Src/quadspi.c ****     cursor += chunk;
 2887              		.loc 1 697 5 is_stmt 1 view .LVU839
 2888              		.loc 1 697 12 is_stmt 0 view .LVU840
 2889 0034 2644     		add	r6, r6, r4
 2890              	.LVL168:
 698:Core/Src/quadspi.c ****     remaining -= chunk;
 2891              		.loc 1 698 5 is_stmt 1 view .LVU841
 2892              		.loc 1 698 15 is_stmt 0 view .LVU842
 2893 0036 2D1B     		subs	r5, r5, r4
 2894              	.LVL169:
 2895              		.loc 1 698 15 view .LVU843
 2896 0038 EEE7     		b	.L245
 2897              	.LVL170:
 2898              	.L247:
 2899              		.loc 1 698 15 view .LVU844
 2900              	.LBE22:
 687:Core/Src/quadspi.c ****   if (!data) return 1;
 2901              		.loc 1 687 27 view .LVU845
 2902 003a 4FF00008 		mov	r8, #0
 2903              	.LVL171:
 2904              	.L244:
 699:Core/Src/quadspi.c ****   }
ARM GAS  /tmp/ccmcLKXV.s 			page 74


 700:Core/Src/quadspi.c ****   return 0;
 701:Core/Src/quadspi.c **** }
 2905              		.loc 1 701 1 view .LVU846
 2906 003e 4046     		mov	r0, r8
 2907 0040 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2908              	.LVL172:
 2909              	.L248:
 688:Core/Src/quadspi.c ****   if (QSPI_CheckRange(address, length)) return 2;
 2910              		.loc 1 688 21 view .LVU847
 2911 0044 4FF00108 		mov	r8, #1
 2912 0048 F9E7     		b	.L244
 2913              	.LVL173:
 2914              	.L252:
 689:Core/Src/quadspi.c ****   uint32_t remaining = length;
 2915              		.loc 1 689 48 view .LVU848
 2916 004a 4FF00208 		mov	r8, #2
 2917 004e F6E7     		b	.L244
 2918              	.LVL174:
 2919              	.L250:
 2920              	.LBB23:
 695:Core/Src/quadspi.c ****     current += chunk;
 2921              		.loc 1 695 56 view .LVU849
 2922 0050 4FF00308 		mov	r8, #3
 2923 0054 F3E7     		b	.L244
 2924              	.LBE23:
 2925              		.cfi_endproc
 2926              	.LFE172:
 2928              		.section	.text.QSPI_CalculateCRC32,"ax",%progbits
 2929              		.align	1
 2930              		.global	QSPI_CalculateCRC32
 2931              		.syntax unified
 2932              		.thumb
 2933              		.thumb_func
 2934              		.fpu fpv5-d16
 2936              	QSPI_CalculateCRC32:
 2937              	.LVL175:
 2938              	.LFB173:
 702:Core/Src/quadspi.c **** 
 703:Core/Src/quadspi.c **** uint32_t QSPI_CalculateCRC32(const uint8_t *data, uint32_t length)
 704:Core/Src/quadspi.c **** {
 2939              		.loc 1 704 1 is_stmt 1 view -0
 2940              		.cfi_startproc
 2941              		@ args = 0, pretend = 0, frame = 0
 2942              		@ frame_needed = 0, uses_anonymous_args = 0
 2943              		.loc 1 704 1 is_stmt 0 view .LVU851
 2944 0000 38B5     		push	{r3, r4, r5, lr}
 2945              	.LCFI68:
 2946              		.cfi_def_cfa_offset 16
 2947              		.cfi_offset 3, -16
 2948              		.cfi_offset 4, -12
 2949              		.cfi_offset 5, -8
 2950              		.cfi_offset 14, -4
 705:Core/Src/quadspi.c ****   if (length == 0) return 0x00000000UL;
 2951              		.loc 1 705 3 is_stmt 1 view .LVU852
 2952              		.loc 1 705 6 is_stmt 0 view .LVU853
 2953 0002 0C46     		mov	r4, r1
 2954 0004 59B1     		cbz	r1, .L255
ARM GAS  /tmp/ccmcLKXV.s 			page 75


 2955 0006 0546     		mov	r5, r0
 706:Core/Src/quadspi.c ****   if (!data) return 0x00000000UL;
 2956              		.loc 1 706 3 is_stmt 1 view .LVU854
 2957              		.loc 1 706 6 is_stmt 0 view .LVU855
 2958 0008 58B1     		cbz	r0, .L256
 707:Core/Src/quadspi.c ****   QSPI_CRC32_EnsureTable();
 2959              		.loc 1 707 3 is_stmt 1 view .LVU856
 2960 000a FFF7FEFF 		bl	QSPI_CRC32_EnsureTable
 2961              	.LVL176:
 708:Core/Src/quadspi.c ****   uint32_t crc = 0xFFFFFFFFUL;
 2962              		.loc 1 708 3 view .LVU857
 709:Core/Src/quadspi.c ****   crc = QSPI_CRC32_Update(crc, data, length);
 2963              		.loc 1 709 3 view .LVU858
 2964              		.loc 1 709 9 is_stmt 0 view .LVU859
 2965 000e 2246     		mov	r2, r4
 2966 0010 2946     		mov	r1, r5
 2967 0012 4FF0FF30 		mov	r0, #-1
 2968 0016 FFF7FEFF 		bl	QSPI_CRC32_Update
 2969              	.LVL177:
 710:Core/Src/quadspi.c ****   return crc ^ 0xFFFFFFFFUL;
 2970              		.loc 1 710 3 is_stmt 1 view .LVU860
 2971              		.loc 1 710 14 is_stmt 0 view .LVU861
 2972 001a C043     		mvns	r0, r0
 2973              	.LVL178:
 2974              	.L253:
 711:Core/Src/quadspi.c **** }
 2975              		.loc 1 711 1 view .LVU862
 2976 001c 38BD     		pop	{r3, r4, r5, pc}
 2977              	.LVL179:
 2978              	.L255:
 705:Core/Src/quadspi.c ****   if (!data) return 0x00000000UL;
 2979              		.loc 1 705 27 view .LVU863
 2980 001e 0846     		mov	r0, r1
 2981              	.LVL180:
 705:Core/Src/quadspi.c ****   if (!data) return 0x00000000UL;
 2982              		.loc 1 705 27 view .LVU864
 2983 0020 FCE7     		b	.L253
 2984              	.LVL181:
 2985              	.L256:
 706:Core/Src/quadspi.c ****   QSPI_CRC32_EnsureTable();
 2986              		.loc 1 706 21 view .LVU865
 2987 0022 0020     		movs	r0, #0
 2988              	.LVL182:
 706:Core/Src/quadspi.c ****   QSPI_CRC32_EnsureTable();
 2989              		.loc 1 706 21 view .LVU866
 2990 0024 FAE7     		b	.L253
 2991              		.cfi_endproc
 2992              	.LFE173:
 2994              		.section	.text.QSPI_VerifyCRC32,"ax",%progbits
 2995              		.align	1
 2996              		.global	QSPI_VerifyCRC32
 2997              		.syntax unified
 2998              		.thumb
 2999              		.thumb_func
 3000              		.fpu fpv5-d16
 3002              	QSPI_VerifyCRC32:
 3003              	.LVL183:
ARM GAS  /tmp/ccmcLKXV.s 			page 76


 3004              	.LFB174:
 712:Core/Src/quadspi.c **** 
 713:Core/Src/quadspi.c **** uint8_t QSPI_VerifyCRC32(uint32_t address, uint32_t length, uint32_t expected_crc, uint32_t *actual
 714:Core/Src/quadspi.c **** {
 3005              		.loc 1 714 1 is_stmt 1 view -0
 3006              		.cfi_startproc
 3007              		@ args = 0, pretend = 0, frame = 256
 3008              		@ frame_needed = 0, uses_anonymous_args = 0
 3009              		.loc 1 714 1 is_stmt 0 view .LVU868
 3010 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3011              	.LCFI69:
 3012              		.cfi_def_cfa_offset 32
 3013              		.cfi_offset 4, -32
 3014              		.cfi_offset 5, -28
 3015              		.cfi_offset 6, -24
 3016              		.cfi_offset 7, -20
 3017              		.cfi_offset 8, -16
 3018              		.cfi_offset 9, -12
 3019              		.cfi_offset 10, -8
 3020              		.cfi_offset 14, -4
 3021 0004 C0B0     		sub	sp, sp, #256
 3022              	.LCFI70:
 3023              		.cfi_def_cfa_offset 288
 3024 0006 9046     		mov	r8, r2
 3025 0008 1F46     		mov	r7, r3
 715:Core/Src/quadspi.c ****   if (length == 0) {
 3026              		.loc 1 715 3 is_stmt 1 view .LVU869
 3027              		.loc 1 715 6 is_stmt 0 view .LVU870
 3028 000a F9B1     		cbz	r1, .L269
 3029 000c 8246     		mov	r10, r0
 3030 000e 0D46     		mov	r5, r1
 716:Core/Src/quadspi.c ****     if (actual_crc) *actual_crc = 0x00000000UL;
 717:Core/Src/quadspi.c ****     return (expected_crc == 0x00000000UL) ? 0 : 1;
 718:Core/Src/quadspi.c ****   }
 719:Core/Src/quadspi.c ****   if (QSPI_CheckRange(address, length)) return 2;
 3031              		.loc 1 719 3 is_stmt 1 view .LVU871
 3032              		.loc 1 719 7 is_stmt 0 view .LVU872
 3033 0010 FFF7FEFF 		bl	QSPI_CheckRange
 3034              	.LVL184:
 3035              		.loc 1 719 6 view .LVU873
 3036 0014 8146     		mov	r9, r0
 3037 0016 68BB     		cbnz	r0, .L265
 720:Core/Src/quadspi.c ****   QSPI_CRC32_EnsureTable();
 3038              		.loc 1 720 3 is_stmt 1 view .LVU874
 3039 0018 FFF7FEFF 		bl	QSPI_CRC32_EnsureTable
 3040              	.LVL185:
 721:Core/Src/quadspi.c ****   uint32_t crc = 0xFFFFFFFFUL;
 3041              		.loc 1 721 3 view .LVU875
 722:Core/Src/quadspi.c ****   uint32_t remaining = length;
 3042              		.loc 1 722 3 view .LVU876
 723:Core/Src/quadspi.c ****   uint32_t current = address;
 3043              		.loc 1 723 3 view .LVU877
 724:Core/Src/quadspi.c ****   uint8_t scratch[QSPI_VERIFY_SCRATCH_BYTES];
 3044              		.loc 1 724 3 view .LVU878
 725:Core/Src/quadspi.c ****   while (remaining) {
 3045              		.loc 1 725 3 view .LVU879
 721:Core/Src/quadspi.c ****   uint32_t remaining = length;
ARM GAS  /tmp/ccmcLKXV.s 			page 77


 3046              		.loc 1 721 12 is_stmt 0 view .LVU880
 3047 001c 4FF0FF36 		mov	r6, #-1
 3048              	.LVL186:
 3049              	.L262:
 3050              		.loc 1 725 9 is_stmt 1 view .LVU881
 3051 0020 05B3     		cbz	r5, .L270
 3052              	.LBB24:
 726:Core/Src/quadspi.c ****     uint32_t chunk = (remaining > (uint32_t)sizeof(scratch)) ? (uint32_t)sizeof(scratch) : remainin
 3053              		.loc 1 726 5 view .LVU882
 3054              		.loc 1 726 14 is_stmt 0 view .LVU883
 3055 0022 2C46     		mov	r4, r5
 3056 0024 B5F5807F 		cmp	r5, #256
 3057 0028 28BF     		it	cs
 3058 002a 4FF48074 		movcs	r4, #256
 3059              	.LVL187:
 727:Core/Src/quadspi.c ****     if (QSPI_ReadChunk(current, scratch, chunk)) return 3;
 3060              		.loc 1 727 5 is_stmt 1 view .LVU884
 3061              		.loc 1 727 9 is_stmt 0 view .LVU885
 3062 002e 2246     		mov	r2, r4
 3063 0030 6946     		mov	r1, sp
 3064 0032 5046     		mov	r0, r10
 3065 0034 FFF7FEFF 		bl	QSPI_ReadChunk
 3066              	.LVL188:
 3067              		.loc 1 727 8 view .LVU886
 3068 0038 F8B9     		cbnz	r0, .L266
 728:Core/Src/quadspi.c ****     crc = QSPI_CRC32_Update(crc, scratch, chunk);
 3069              		.loc 1 728 5 is_stmt 1 view .LVU887
 3070              		.loc 1 728 11 is_stmt 0 view .LVU888
 3071 003a 2246     		mov	r2, r4
 3072 003c 6946     		mov	r1, sp
 3073 003e 3046     		mov	r0, r6
 3074 0040 FFF7FEFF 		bl	QSPI_CRC32_Update
 3075              	.LVL189:
 3076 0044 0646     		mov	r6, r0
 3077              	.LVL190:
 729:Core/Src/quadspi.c ****     current += chunk;
 3078              		.loc 1 729 5 is_stmt 1 view .LVU889
 3079              		.loc 1 729 13 is_stmt 0 view .LVU890
 3080 0046 A244     		add	r10, r10, r4
 3081              	.LVL191:
 730:Core/Src/quadspi.c ****     remaining -= chunk;
 3082              		.loc 1 730 5 is_stmt 1 view .LVU891
 3083              		.loc 1 730 15 is_stmt 0 view .LVU892
 3084 0048 2D1B     		subs	r5, r5, r4
 3085              	.LVL192:
 3086              		.loc 1 730 15 view .LVU893
 3087 004a E9E7     		b	.L262
 3088              	.LVL193:
 3089              	.L269:
 3090              		.loc 1 730 15 view .LVU894
 3091              	.LBE24:
 716:Core/Src/quadspi.c ****     return (expected_crc == 0x00000000UL) ? 0 : 1;
 3092              		.loc 1 716 5 is_stmt 1 view .LVU895
 716:Core/Src/quadspi.c ****     return (expected_crc == 0x00000000UL) ? 0 : 1;
 3093              		.loc 1 716 8 is_stmt 0 view .LVU896
 3094 004c 0BB1     		cbz	r3, .L260
 716:Core/Src/quadspi.c ****     return (expected_crc == 0x00000000UL) ? 0 : 1;
ARM GAS  /tmp/ccmcLKXV.s 			page 78


 3095              		.loc 1 716 21 is_stmt 1 discriminator 1 view .LVU897
 716:Core/Src/quadspi.c ****     return (expected_crc == 0x00000000UL) ? 0 : 1;
 3096              		.loc 1 716 33 is_stmt 0 discriminator 1 view .LVU898
 3097 004e 0023     		movs	r3, #0
 3098              	.LVL194:
 716:Core/Src/quadspi.c ****     return (expected_crc == 0x00000000UL) ? 0 : 1;
 3099              		.loc 1 716 33 discriminator 1 view .LVU899
 3100 0050 3B60     		str	r3, [r7]
 3101              	.L260:
 717:Core/Src/quadspi.c ****   }
 3102              		.loc 1 717 5 is_stmt 1 view .LVU900
 717:Core/Src/quadspi.c ****   }
 3103              		.loc 1 717 47 is_stmt 0 view .LVU901
 3104 0052 B8F10009 		subs	r9, r8, #0
 3105 0056 18BF     		it	ne
 3106 0058 4FF00109 		movne	r9, #1
 3107              	.LVL195:
 3108              	.L261:
 731:Core/Src/quadspi.c ****   }
 732:Core/Src/quadspi.c ****   crc ^= 0xFFFFFFFFUL;
 733:Core/Src/quadspi.c ****   if (actual_crc) *actual_crc = crc;
 734:Core/Src/quadspi.c ****   return (crc == expected_crc) ? 0 : 4;
 735:Core/Src/quadspi.c **** }
 3109              		.loc 1 735 1 view .LVU902
 3110 005c 4846     		mov	r0, r9
 3111 005e 40B0     		add	sp, sp, #256
 3112              	.LCFI71:
 3113              		.cfi_remember_state
 3114              		.cfi_def_cfa_offset 32
 3115              		@ sp needed
 3116 0060 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3117              	.LVL196:
 3118              	.L270:
 3119              	.LCFI72:
 3120              		.cfi_restore_state
 732:Core/Src/quadspi.c ****   if (actual_crc) *actual_crc = crc;
 3121              		.loc 1 732 3 is_stmt 1 view .LVU903
 732:Core/Src/quadspi.c ****   if (actual_crc) *actual_crc = crc;
 3122              		.loc 1 732 7 is_stmt 0 view .LVU904
 3123 0064 F643     		mvns	r6, r6
 3124              	.LVL197:
 733:Core/Src/quadspi.c ****   return (crc == expected_crc) ? 0 : 4;
 3125              		.loc 1 733 3 is_stmt 1 view .LVU905
 733:Core/Src/quadspi.c ****   return (crc == expected_crc) ? 0 : 4;
 3126              		.loc 1 733 6 is_stmt 0 view .LVU906
 3127 0066 07B1     		cbz	r7, .L264
 733:Core/Src/quadspi.c ****   return (crc == expected_crc) ? 0 : 4;
 3128              		.loc 1 733 19 is_stmt 1 discriminator 1 view .LVU907
 733:Core/Src/quadspi.c ****   return (crc == expected_crc) ? 0 : 4;
 3129              		.loc 1 733 31 is_stmt 0 discriminator 1 view .LVU908
 3130 0068 3E60     		str	r6, [r7]
 3131              	.L264:
 734:Core/Src/quadspi.c **** }
 3132              		.loc 1 734 3 is_stmt 1 view .LVU909
 734:Core/Src/quadspi.c **** }
 3133              		.loc 1 734 36 is_stmt 0 view .LVU910
 3134 006a 4645     		cmp	r6, r8
ARM GAS  /tmp/ccmcLKXV.s 			page 79


 3135 006c F6D0     		beq	.L261
 3136 006e 4FF00409 		mov	r9, #4
 3137 0072 F3E7     		b	.L261
 3138              	.LVL198:
 3139              	.L265:
 719:Core/Src/quadspi.c ****   QSPI_CRC32_EnsureTable();
 3140              		.loc 1 719 48 view .LVU911
 3141 0074 4FF00209 		mov	r9, #2
 3142 0078 F0E7     		b	.L261
 3143              	.LVL199:
 3144              	.L266:
 3145              	.LBB25:
 727:Core/Src/quadspi.c ****     crc = QSPI_CRC32_Update(crc, scratch, chunk);
 3146              		.loc 1 727 57 view .LVU912
 3147 007a 4FF00309 		mov	r9, #3
 3148 007e EDE7     		b	.L261
 3149              	.LBE25:
 3150              		.cfi_endproc
 3151              	.LFE174:
 3153              		.section	.text.QSPI_LastCheckStatus,"ax",%progbits
 3154              		.align	1
 3155              		.global	QSPI_LastCheckStatus
 3156              		.syntax unified
 3157              		.thumb
 3158              		.thumb_func
 3159              		.fpu fpv5-d16
 3161              	QSPI_LastCheckStatus:
 3162              	.LFB175:
 736:Core/Src/quadspi.c **** 
 737:Core/Src/quadspi.c **** uint8_t QSPI_LastCheckStatus(void)
 738:Core/Src/quadspi.c **** {
 3163              		.loc 1 738 1 is_stmt 1 view -0
 3164              		.cfi_startproc
 3165              		@ args = 0, pretend = 0, frame = 0
 3166              		@ frame_needed = 0, uses_anonymous_args = 0
 3167              		@ link register save eliminated.
 739:Core/Src/quadspi.c ****   return qspi_last_check_status;
 3168              		.loc 1 739 3 view .LVU914
 3169              		.loc 1 739 10 is_stmt 0 view .LVU915
 3170 0000 014B     		ldr	r3, .L272
 3171 0002 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 740:Core/Src/quadspi.c **** }
 3172              		.loc 1 740 1 view .LVU916
 3173 0004 7047     		bx	lr
 3174              	.L273:
 3175 0006 00BF     		.align	2
 3176              	.L272:
 3177 0008 00000000 		.word	.LANCHOR8
 3178              		.cfi_endproc
 3179              	.LFE175:
 3181              		.section	.text.QSPI_IndirectModeDemo,"ax",%progbits
 3182              		.align	1
 3183              		.global	QSPI_IndirectModeDemo
 3184              		.syntax unified
 3185              		.thumb
 3186              		.thumb_func
 3187              		.fpu fpv5-d16
ARM GAS  /tmp/ccmcLKXV.s 			page 80


 3189              	QSPI_IndirectModeDemo:
 3190              	.LFB176:
 741:Core/Src/quadspi.c **** 
 742:Core/Src/quadspi.c **** /* Demo function using Indirect Mode only (no Memory Mapped) */
 743:Core/Src/quadspi.c **** /* This demonstrates basic QSPI operations using Indirect Mode as described */
 744:Core/Src/quadspi.c **** void QSPI_IndirectModeDemo(void)
 745:Core/Src/quadspi.c **** {
 3191              		.loc 1 745 1 is_stmt 1 view -0
 3192              		.cfi_startproc
 3193              		@ args = 0, pretend = 0, frame = 520
 3194              		@ frame_needed = 0, uses_anonymous_args = 0
 3195 0000 10B5     		push	{r4, lr}
 3196              	.LCFI73:
 3197              		.cfi_def_cfa_offset 8
 3198              		.cfi_offset 4, -8
 3199              		.cfi_offset 14, -4
 3200 0002 ADF5027D 		sub	sp, sp, #520
 3201              	.LCFI74:
 3202              		.cfi_def_cfa_offset 528
 746:Core/Src/quadspi.c ****   /* Example: Read JEDEC ID using Indirect Mode */
 747:Core/Src/quadspi.c ****   uint8_t mid, mtype, cap;
 3203              		.loc 1 747 3 view .LVU918
 748:Core/Src/quadspi.c ****   if (QSPI_ReadJEDEC_ID(&mid, &mtype, &cap) == 0) {
 3204              		.loc 1 748 3 view .LVU919
 3205              		.loc 1 748 7 is_stmt 0 view .LVU920
 3206 0006 0DF20522 		addw	r2, sp, #517
 3207 000a 0DF20621 		addw	r1, sp, #518
 3208 000e 0DF20720 		addw	r0, sp, #519
 3209 0012 FFF7FEFF 		bl	QSPI_ReadJEDEC_ID
 3210              	.LVL200:
 3211              		.loc 1 748 6 view .LVU921
 3212 0016 10B1     		cbz	r0, .L282
 3213              	.L274:
 749:Core/Src/quadspi.c ****     /* Successfully read JEDEC ID: mid=0xEF for Winbond, mtype=0x40/0x60, cap=0x18 for 128Mbit */
 750:Core/Src/quadspi.c ****     /* You can log or use these values for verification */
 751:Core/Src/quadspi.c ****   } else {
 752:Core/Src/quadspi.c ****     /* JEDEC ID read failed - check QSPI connection */
 753:Core/Src/quadspi.c ****     return;
 754:Core/Src/quadspi.c ****   }
 755:Core/Src/quadspi.c **** 
 756:Core/Src/quadspi.c ****   /* Example: Write Enable (WREN) - prerequisite for write/erase */
 757:Core/Src/quadspi.c ****   if (QSPI_WriteEnable() != 0) {
 758:Core/Src/quadspi.c ****     /* Write Enable failed */
 759:Core/Src/quadspi.c ****     return;
 760:Core/Src/quadspi.c ****   }
 761:Core/Src/quadspi.c **** 
 762:Core/Src/quadspi.c ****   /* Example: Erase a sector (4KB) at address 0x000000 */
 763:Core/Src/quadspi.c ****   if (QSPI_EraseSector(0x000000) != 0) {
 764:Core/Src/quadspi.c ****     /* Sector erase failed */
 765:Core/Src/quadspi.c ****     return;
 766:Core/Src/quadspi.c ****   }
 767:Core/Src/quadspi.c **** 
 768:Core/Src/quadspi.c ****   /* Example: Program a page (256 bytes) with test data */
 769:Core/Src/quadspi.c ****   uint8_t test_data[MEMORY_PAGE_SIZE];
 770:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < MEMORY_PAGE_SIZE; ++i) {
 771:Core/Src/quadspi.c ****     test_data[i] = (uint8_t)(i & 0xFF); /* Simple pattern */
 772:Core/Src/quadspi.c ****   }
ARM GAS  /tmp/ccmcLKXV.s 			page 81


 773:Core/Src/quadspi.c ****   if (QSPI_PageProgram(0x000000, test_data, MEMORY_PAGE_SIZE) != 0) {
 774:Core/Src/quadspi.c ****     /* Page program failed */
 775:Core/Src/quadspi.c ****     return;
 776:Core/Src/quadspi.c ****   }
 777:Core/Src/quadspi.c **** 
 778:Core/Src/quadspi.c ****   /* Example: Read back the data using Indirect Mode */
 779:Core/Src/quadspi.c ****   uint8_t read_data[MEMORY_PAGE_SIZE];
 780:Core/Src/quadspi.c ****   if (QSPI_ReadChunk(0x000000, read_data, MEMORY_PAGE_SIZE) != 0) {
 781:Core/Src/quadspi.c ****     /* Read failed */
 782:Core/Src/quadspi.c ****     return;
 783:Core/Src/quadspi.c ****   }
 784:Core/Src/quadspi.c **** 
 785:Core/Src/quadspi.c ****   /* Verify the data */
 786:Core/Src/quadspi.c ****   for (uint32_t i = 0; i < MEMORY_PAGE_SIZE; ++i) {
 787:Core/Src/quadspi.c ****     if (read_data[i] != test_data[i]) {
 788:Core/Src/quadspi.c ****       /* Verification failed */
 789:Core/Src/quadspi.c ****       return;
 790:Core/Src/quadspi.c ****     }
 791:Core/Src/quadspi.c ****   }
 792:Core/Src/quadspi.c **** 
 793:Core/Src/quadspi.c ****   /* Example: Read Status Register to check if busy */
 794:Core/Src/quadspi.c ****   uint8_t sr1;
 795:Core/Src/quadspi.c ****   if (QSPI_ReadStatusReg(&sr1) == 0) {
 796:Core/Src/quadspi.c ****     if (sr1 & 0x01) {
 797:Core/Src/quadspi.c ****       /* Flash is busy - wait or handle */
 798:Core/Src/quadspi.c ****     }
 799:Core/Src/quadspi.c ****   }
 800:Core/Src/quadspi.c **** 
 801:Core/Src/quadspi.c ****   /* Demo completed successfully */
 802:Core/Src/quadspi.c **** }
 3214              		.loc 1 802 1 view .LVU922
 3215 0018 0DF5027D 		add	sp, sp, #520
 3216              	.LCFI75:
 3217              		.cfi_remember_state
 3218              		.cfi_def_cfa_offset 8
 3219              		@ sp needed
 3220 001c 10BD     		pop	{r4, pc}
 3221              	.L282:
 3222              	.LCFI76:
 3223              		.cfi_restore_state
 3224 001e 0446     		mov	r4, r0
 751:Core/Src/quadspi.c ****     /* JEDEC ID read failed - check QSPI connection */
 3225              		.loc 1 751 3 is_stmt 1 view .LVU923
 757:Core/Src/quadspi.c ****     /* Write Enable failed */
 3226              		.loc 1 757 3 view .LVU924
 757:Core/Src/quadspi.c ****     /* Write Enable failed */
 3227              		.loc 1 757 7 is_stmt 0 view .LVU925
 3228 0020 FFF7FEFF 		bl	QSPI_WriteEnable
 3229              	.LVL201:
 757:Core/Src/quadspi.c ****     /* Write Enable failed */
 3230              		.loc 1 757 6 view .LVU926
 3231 0024 0028     		cmp	r0, #0
 3232 0026 F7D1     		bne	.L274
 763:Core/Src/quadspi.c ****     /* Sector erase failed */
 3233              		.loc 1 763 3 is_stmt 1 view .LVU927
 763:Core/Src/quadspi.c ****     /* Sector erase failed */
 3234              		.loc 1 763 7 is_stmt 0 view .LVU928
ARM GAS  /tmp/ccmcLKXV.s 			page 82


 3235 0028 FFF7FEFF 		bl	QSPI_EraseSector
 3236              	.LVL202:
 763:Core/Src/quadspi.c ****     /* Sector erase failed */
 3237              		.loc 1 763 6 view .LVU929
 3238 002c 0028     		cmp	r0, #0
 3239 002e F3D1     		bne	.L274
 3240              	.LBB26:
 770:Core/Src/quadspi.c ****     test_data[i] = (uint8_t)(i & 0xFF); /* Simple pattern */
 3241              		.loc 1 770 17 view .LVU930
 3242 0030 2346     		mov	r3, r4
 3243 0032 02E0     		b	.L276
 3244              	.LVL203:
 3245              	.L277:
 771:Core/Src/quadspi.c ****   }
 3246              		.loc 1 771 5 is_stmt 1 discriminator 3 view .LVU931
 771:Core/Src/quadspi.c ****   }
 3247              		.loc 1 771 18 is_stmt 0 discriminator 3 view .LVU932
 3248 0034 41AA     		add	r2, sp, #260
 3249 0036 D354     		strb	r3, [r2, r3]
 770:Core/Src/quadspi.c ****     test_data[i] = (uint8_t)(i & 0xFF); /* Simple pattern */
 3250              		.loc 1 770 46 is_stmt 1 discriminator 3 view .LVU933
 3251 0038 0133     		adds	r3, r3, #1
 3252              	.LVL204:
 3253              	.L276:
 770:Core/Src/quadspi.c ****     test_data[i] = (uint8_t)(i & 0xFF); /* Simple pattern */
 3254              		.loc 1 770 24 discriminator 1 view .LVU934
 770:Core/Src/quadspi.c ****     test_data[i] = (uint8_t)(i & 0xFF); /* Simple pattern */
 3255              		.loc 1 770 3 is_stmt 0 discriminator 1 view .LVU935
 3256 003a FF2B     		cmp	r3, #255
 3257 003c FAD9     		bls	.L277
 3258              	.LBE26:
 773:Core/Src/quadspi.c ****     /* Page program failed */
 3259              		.loc 1 773 3 is_stmt 1 view .LVU936
 773:Core/Src/quadspi.c ****     /* Page program failed */
 3260              		.loc 1 773 7 is_stmt 0 view .LVU937
 3261 003e 4FF48072 		mov	r2, #256
 3262 0042 41A9     		add	r1, sp, #260
 3263 0044 0020     		movs	r0, #0
 3264 0046 FFF7FEFF 		bl	QSPI_PageProgram
 3265              	.LVL205:
 773:Core/Src/quadspi.c ****     /* Page program failed */
 3266              		.loc 1 773 6 view .LVU938
 3267 004a 0028     		cmp	r0, #0
 3268 004c E4D1     		bne	.L274
 779:Core/Src/quadspi.c ****   if (QSPI_ReadChunk(0x000000, read_data, MEMORY_PAGE_SIZE) != 0) {
 3269              		.loc 1 779 3 is_stmt 1 view .LVU939
 780:Core/Src/quadspi.c ****     /* Read failed */
 3270              		.loc 1 780 3 view .LVU940
 780:Core/Src/quadspi.c ****     /* Read failed */
 3271              		.loc 1 780 7 is_stmt 0 view .LVU941
 3272 004e 4FF48072 		mov	r2, #256
 3273 0052 01A9     		add	r1, sp, #4
 3274 0054 FFF7FEFF 		bl	QSPI_ReadChunk
 3275              	.LVL206:
 780:Core/Src/quadspi.c ****     /* Read failed */
 3276              		.loc 1 780 6 view .LVU942
 3277 0058 0028     		cmp	r0, #0
ARM GAS  /tmp/ccmcLKXV.s 			page 83


 3278 005a DDD1     		bne	.L274
 3279              	.L278:
 3280              	.LVL207:
 3281              	.LBB27:
 786:Core/Src/quadspi.c ****     if (read_data[i] != test_data[i]) {
 3282              		.loc 1 786 24 is_stmt 1 discriminator 1 view .LVU943
 786:Core/Src/quadspi.c ****     if (read_data[i] != test_data[i]) {
 3283              		.loc 1 786 3 is_stmt 0 discriminator 1 view .LVU944
 3284 005c FF2C     		cmp	r4, #255
 3285 005e 07D8     		bhi	.L283
 787:Core/Src/quadspi.c ****       /* Verification failed */
 3286              		.loc 1 787 5 is_stmt 1 view .LVU945
 787:Core/Src/quadspi.c ****       /* Verification failed */
 3287              		.loc 1 787 18 is_stmt 0 view .LVU946
 3288 0060 01AB     		add	r3, sp, #4
 3289 0062 1A5D     		ldrb	r2, [r3, r4]	@ zero_extendqisi2
 787:Core/Src/quadspi.c ****       /* Verification failed */
 3290              		.loc 1 787 34 view .LVU947
 3291 0064 41AB     		add	r3, sp, #260
 3292 0066 1B5D     		ldrb	r3, [r3, r4]	@ zero_extendqisi2
 787:Core/Src/quadspi.c ****       /* Verification failed */
 3293              		.loc 1 787 8 view .LVU948
 3294 0068 9A42     		cmp	r2, r3
 3295 006a D5D1     		bne	.L274
 786:Core/Src/quadspi.c ****     if (read_data[i] != test_data[i]) {
 3296              		.loc 1 786 46 is_stmt 1 discriminator 2 view .LVU949
 3297 006c 0134     		adds	r4, r4, #1
 3298              	.LVL208:
 786:Core/Src/quadspi.c ****     if (read_data[i] != test_data[i]) {
 3299              		.loc 1 786 46 is_stmt 0 discriminator 2 view .LVU950
 3300 006e F5E7     		b	.L278
 3301              	.L283:
 786:Core/Src/quadspi.c ****     if (read_data[i] != test_data[i]) {
 3302              		.loc 1 786 46 discriminator 2 view .LVU951
 3303              	.LBE27:
 794:Core/Src/quadspi.c ****   if (QSPI_ReadStatusReg(&sr1) == 0) {
 3304              		.loc 1 794 3 is_stmt 1 view .LVU952
 795:Core/Src/quadspi.c ****     if (sr1 & 0x01) {
 3305              		.loc 1 795 3 view .LVU953
 795:Core/Src/quadspi.c ****     if (sr1 & 0x01) {
 3306              		.loc 1 795 7 is_stmt 0 view .LVU954
 3307 0070 0DF10300 		add	r0, sp, #3
 3308 0074 FFF7FEFF 		bl	QSPI_ReadStatusReg
 3309              	.LVL209:
 798:Core/Src/quadspi.c ****   }
 3310              		.loc 1 798 5 is_stmt 1 view .LVU955
 3311 0078 CEE7     		b	.L274
 3312              		.cfi_endproc
 3313              	.LFE176:
 3315              		.global	hmdma_quadspi_fifo_th
 3316              		.global	hqspi
 3317              		.section	.rodata
 3318              		.align	2
 3319              		.set	.LANCHOR7,. + 0
 3320              	.LC0:
 3321 0000 0000     		.ascii	"\000\000"
 3322 0002 00       		.space	1
ARM GAS  /tmp/ccmcLKXV.s 			page 84


 3323              		.section	.bss.hmdma_quadspi_fifo_th,"aw",%nobits
 3324              		.align	2
 3325              		.set	.LANCHOR4,. + 0
 3328              	hmdma_quadspi_fifo_th:
 3329 0000 00000000 		.space	108
 3329      00000000 
 3329      00000000 
 3329      00000000 
 3329      00000000 
 3330              		.section	.bss.hqspi,"aw",%nobits
 3331              		.align	2
 3332              		.set	.LANCHOR2,. + 0
 3335              	hqspi:
 3336 0000 00000000 		.space	76
 3336      00000000 
 3336      00000000 
 3336      00000000 
 3336      00000000 
 3337              		.section	.bss.page_rx.0,"aw",%nobits
 3338              		.align	2
 3339              		.set	.LANCHOR6,. + 0
 3342              	page_rx.0:
 3343 0000 00000000 		.space	256
 3343      00000000 
 3343      00000000 
 3343      00000000 
 3343      00000000 
 3344              		.section	.bss.page_tx.1,"aw",%nobits
 3345              		.align	2
 3346              		.set	.LANCHOR5,. + 0
 3349              	page_tx.1:
 3350 0000 00000000 		.space	256
 3350      00000000 
 3350      00000000 
 3350      00000000 
 3350      00000000 
 3351              		.section	.bss.qspi_crc32_table,"aw",%nobits
 3352              		.align	2
 3353              		.set	.LANCHOR1,. + 0
 3356              	qspi_crc32_table:
 3357 0000 00000000 		.space	1024
 3357      00000000 
 3357      00000000 
 3357      00000000 
 3357      00000000 
 3358              		.section	.bss.qspi_crc32_table_ready,"aw",%nobits
 3359              		.set	.LANCHOR0,. + 0
 3362              	qspi_crc32_table_ready:
 3363 0000 00       		.space	1
 3364              		.section	.bss.qspi_first_word,"aw",%nobits
 3365              		.align	2
 3366              		.set	.LANCHOR10,. + 0
 3369              	qspi_first_word:
 3370 0000 00000000 		.space	4
 3371              		.section	.bss.qspi_last_check_status,"aw",%nobits
 3372              		.set	.LANCHOR8,. + 0
 3375              	qspi_last_check_status:
ARM GAS  /tmp/ccmcLKXV.s 			page 85


 3376 0000 00       		.space	1
 3377              		.section	.bss.qspi_memory_mapped_entered,"aw",%nobits
 3378              		.set	.LANCHOR9,. + 0
 3381              	qspi_memory_mapped_entered:
 3382 0000 00       		.space	1
 3383              		.section	.bss.qspi_qe_set,"aw",%nobits
 3384              		.set	.LANCHOR3,. + 0
 3387              	qspi_qe_set:
 3388 0000 00       		.space	1
 3389              		.text
 3390              	.Letext0:
 3391              		.file 2 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stdint.h"
 3392              		.file 3 "Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h753xx.h"
 3393              		.file 4 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 3394              		.file 5 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_rcc_ex.h"
 3395              		.file 6 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_gpio.h"
 3396              		.file 7 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_mdma.h"
 3397              		.file 8 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_qspi.h"
 3398              		.file 9 "Core/Inc/quadspi.h"
 3399              		.file 10 "Core/Inc/main.h"
 3400              		.file 11 "<built-in>"
ARM GAS  /tmp/ccmcLKXV.s 			page 86


DEFINED SYMBOLS
                            *ABS*:0000000000000000 quadspi.c
     /tmp/ccmcLKXV.s:17     .text.QSPI_CheckRange:0000000000000000 $t
     /tmp/ccmcLKXV.s:24     .text.QSPI_CheckRange:0000000000000000 QSPI_CheckRange
     /tmp/ccmcLKXV.s:73     .text.QSPI_CRC32_EnsureTable:0000000000000000 $t
     /tmp/ccmcLKXV.s:79     .text.QSPI_CRC32_EnsureTable:0000000000000000 QSPI_CRC32_EnsureTable
     /tmp/ccmcLKXV.s:166    .text.QSPI_CRC32_EnsureTable:000000000000003c $d
     /tmp/ccmcLKXV.s:173    .text.QSPI_CRC32_Update:0000000000000000 $t
     /tmp/ccmcLKXV.s:179    .text.QSPI_CRC32_Update:0000000000000000 QSPI_CRC32_Update
     /tmp/ccmcLKXV.s:246    .text.QSPI_CRC32_Update:0000000000000030 $d
     /tmp/ccmcLKXV.s:251    .text.QSPI_WriteEnable:0000000000000000 $t
     /tmp/ccmcLKXV.s:257    .text.QSPI_WriteEnable:0000000000000000 QSPI_WriteEnable
     /tmp/ccmcLKXV.s:315    .text.QSPI_WriteEnable:0000000000000030 $d
     /tmp/ccmcLKXV.s:320    .text.QSPI_WaitWhileBusy:0000000000000000 $t
     /tmp/ccmcLKXV.s:326    .text.QSPI_WaitWhileBusy:0000000000000000 QSPI_WaitWhileBusy
     /tmp/ccmcLKXV.s:421    .text.QSPI_WaitWhileBusy:0000000000000054 $d
     /tmp/ccmcLKXV.s:426    .text.QSPI_WriteStatusReg2:0000000000000000 $t
     /tmp/ccmcLKXV.s:432    .text.QSPI_WriteStatusReg2:0000000000000000 QSPI_WriteStatusReg2
     /tmp/ccmcLKXV.s:532    .text.QSPI_WriteStatusReg2:0000000000000068 $d
     /tmp/ccmcLKXV.s:537    .text.QSPI_EraseSector:0000000000000000 $t
     /tmp/ccmcLKXV.s:543    .text.QSPI_EraseSector:0000000000000000 QSPI_EraseSector
     /tmp/ccmcLKXV.s:634    .text.QSPI_EraseSector:0000000000000058 $d
     /tmp/ccmcLKXV.s:639    .text.QSPI_PageProgram:0000000000000000 $t
     /tmp/ccmcLKXV.s:645    .text.QSPI_PageProgram:0000000000000000 QSPI_PageProgram
     /tmp/ccmcLKXV.s:771    .text.QSPI_PageProgram:000000000000007c $d
     /tmp/ccmcLKXV.s:776    .text.QSPI_ReadStatusReg2:0000000000000000 $t
     /tmp/ccmcLKXV.s:782    .text.QSPI_ReadStatusReg2:0000000000000000 QSPI_ReadStatusReg2
     /tmp/ccmcLKXV.s:878    .text.QSPI_ReadStatusReg2:0000000000000060 $d
     /tmp/ccmcLKXV.s:883    .text.QSPI_SetQEBit:0000000000000000 $t
     /tmp/ccmcLKXV.s:889    .text.QSPI_SetQEBit:0000000000000000 QSPI_SetQEBit
     /tmp/ccmcLKXV.s:978    .text.QSPI_SetQEBit:0000000000000058 $d
     /tmp/ccmcLKXV.s:983    .text.QSPI_EnsureQuadReady:0000000000000000 $t
     /tmp/ccmcLKXV.s:989    .text.QSPI_EnsureQuadReady:0000000000000000 QSPI_EnsureQuadReady
     /tmp/ccmcLKXV.s:1025   .text.QSPI_EnsureQuadReady:0000000000000018 $d
     /tmp/ccmcLKXV.s:1030   .text.QSPI_ReadChunk:0000000000000000 $t
     /tmp/ccmcLKXV.s:1036   .text.QSPI_ReadChunk:0000000000000000 QSPI_ReadChunk
     /tmp/ccmcLKXV.s:1177   .text.QSPI_ReadChunk:0000000000000074 $d
     /tmp/ccmcLKXV.s:1182   .text.QSPI_ReadStatusReg:0000000000000000 $t
     /tmp/ccmcLKXV.s:1188   .text.QSPI_ReadStatusReg:0000000000000000 QSPI_ReadStatusReg
     /tmp/ccmcLKXV.s:1284   .text.QSPI_ReadStatusReg:0000000000000060 $d
     /tmp/ccmcLKXV.s:1289   .text.QSPI_EnableMemoryMappedQuad:0000000000000000 $t
     /tmp/ccmcLKXV.s:1295   .text.QSPI_EnableMemoryMappedQuad:0000000000000000 QSPI_EnableMemoryMappedQuad
     /tmp/ccmcLKXV.s:1387   .text.QSPI_EnableMemoryMappedQuad:000000000000005c $d
     /tmp/ccmcLKXV.s:1392   .text.HAL_QSPI_MspInit:0000000000000000 $t
     /tmp/ccmcLKXV.s:1399   .text.HAL_QSPI_MspInit:0000000000000000 HAL_QSPI_MspInit
     /tmp/ccmcLKXV.s:1731   .text.HAL_QSPI_MspInit:000000000000017c $d
     /tmp/ccmcLKXV.s:1743   .text.HAL_QSPI_MspDeInit:0000000000000000 $t
     /tmp/ccmcLKXV.s:1750   .text.HAL_QSPI_MspDeInit:0000000000000000 HAL_QSPI_MspDeInit
     /tmp/ccmcLKXV.s:1811   .text.HAL_QSPI_MspDeInit:0000000000000048 $d
     /tmp/ccmcLKXV.s:1821   .text.QSPI_FlashDemo:0000000000000000 $t
     /tmp/ccmcLKXV.s:1828   .text.QSPI_FlashDemo:0000000000000000 QSPI_FlashDemo
     /tmp/ccmcLKXV.s:1936   .text.QSPI_FlashDemo:0000000000000058 $d
     /tmp/ccmcLKXV.s:1943   .text.QSPI_ReadJEDEC_ID:0000000000000000 $t
     /tmp/ccmcLKXV.s:1950   .text.QSPI_ReadJEDEC_ID:0000000000000000 QSPI_ReadJEDEC_ID
     /tmp/ccmcLKXV.s:2085   .text.QSPI_ReadJEDEC_ID:000000000000007c $d
     /tmp/ccmcLKXV.s:2091   .text.QSPI_CheckFlashSize:0000000000000000 $t
     /tmp/ccmcLKXV.s:2098   .text.QSPI_CheckFlashSize:0000000000000000 QSPI_CheckFlashSize
ARM GAS  /tmp/ccmcLKXV.s 			page 87


     /tmp/ccmcLKXV.s:2180   .text.QSPI_CheckFlashSize:0000000000000054 $d
     /tmp/ccmcLKXV.s:2185   .text.MX_QUADSPI_Init:0000000000000000 $t
     /tmp/ccmcLKXV.s:2192   .text.MX_QUADSPI_Init:0000000000000000 MX_QUADSPI_Init
     /tmp/ccmcLKXV.s:2312   .text.MX_QUADSPI_Init:0000000000000074 $d
     /tmp/ccmcLKXV.s:2321   .text.QSPI_IsMemoryMapped:0000000000000000 $t
     /tmp/ccmcLKXV.s:2328   .text.QSPI_IsMemoryMapped:0000000000000000 QSPI_IsMemoryMapped
     /tmp/ccmcLKXV.s:2344   .text.QSPI_IsMemoryMapped:0000000000000008 $d
     /tmp/ccmcLKXV.s:2349   .text.QSPI_EnableMemoryMappedFast:0000000000000000 $t
     /tmp/ccmcLKXV.s:2356   .text.QSPI_EnableMemoryMappedFast:0000000000000000 QSPI_EnableMemoryMappedFast
     /tmp/ccmcLKXV.s:2407   .text.QSPI_EnableMemoryMappedFast:0000000000000028 $d
     /tmp/ccmcLKXV.s:2413   .text.QSPI_ProgramPatternIfBlank:0000000000000000 $t
     /tmp/ccmcLKXV.s:2420   .text.QSPI_ProgramPatternIfBlank:0000000000000000 QSPI_ProgramPatternIfBlank
     /tmp/ccmcLKXV.s:2435   .text.QSPI_AppHeaderValid:0000000000000000 $t
     /tmp/ccmcLKXV.s:2442   .text.QSPI_AppHeaderValid:0000000000000000 QSPI_AppHeaderValid
     /tmp/ccmcLKXV.s:2461   .text.QSPI_ReadDeviceID_90:0000000000000000 $t
     /tmp/ccmcLKXV.s:2468   .text.QSPI_ReadDeviceID_90:0000000000000000 QSPI_ReadDeviceID_90
     /tmp/ccmcLKXV.s:2592   .text.QSPI_ReadDeviceID_90:0000000000000078 $d
     /tmp/ccmcLKXV.s:2597   .text.QSPI_EraseRange:0000000000000000 $t
     /tmp/ccmcLKXV.s:2604   .text.QSPI_EraseRange:0000000000000000 QSPI_EraseRange
     /tmp/ccmcLKXV.s:2699   .text.QSPI_WriteBuffer:0000000000000000 $t
     /tmp/ccmcLKXV.s:2706   .text.QSPI_WriteBuffer:0000000000000000 QSPI_WriteBuffer
     /tmp/ccmcLKXV.s:2819   .text.QSPI_ReadBuffer:0000000000000000 $t
     /tmp/ccmcLKXV.s:2826   .text.QSPI_ReadBuffer:0000000000000000 QSPI_ReadBuffer
     /tmp/ccmcLKXV.s:2929   .text.QSPI_CalculateCRC32:0000000000000000 $t
     /tmp/ccmcLKXV.s:2936   .text.QSPI_CalculateCRC32:0000000000000000 QSPI_CalculateCRC32
     /tmp/ccmcLKXV.s:2995   .text.QSPI_VerifyCRC32:0000000000000000 $t
     /tmp/ccmcLKXV.s:3002   .text.QSPI_VerifyCRC32:0000000000000000 QSPI_VerifyCRC32
     /tmp/ccmcLKXV.s:3154   .text.QSPI_LastCheckStatus:0000000000000000 $t
     /tmp/ccmcLKXV.s:3161   .text.QSPI_LastCheckStatus:0000000000000000 QSPI_LastCheckStatus
     /tmp/ccmcLKXV.s:3177   .text.QSPI_LastCheckStatus:0000000000000008 $d
     /tmp/ccmcLKXV.s:3182   .text.QSPI_IndirectModeDemo:0000000000000000 $t
     /tmp/ccmcLKXV.s:3189   .text.QSPI_IndirectModeDemo:0000000000000000 QSPI_IndirectModeDemo
     /tmp/ccmcLKXV.s:3328   .bss.hmdma_quadspi_fifo_th:0000000000000000 hmdma_quadspi_fifo_th
     /tmp/ccmcLKXV.s:3335   .bss.hqspi:0000000000000000 hqspi
     /tmp/ccmcLKXV.s:3318   .rodata:0000000000000000 $d
     /tmp/ccmcLKXV.s:3324   .bss.hmdma_quadspi_fifo_th:0000000000000000 $d
     /tmp/ccmcLKXV.s:3331   .bss.hqspi:0000000000000000 $d
     /tmp/ccmcLKXV.s:3338   .bss.page_rx.0:0000000000000000 $d
     /tmp/ccmcLKXV.s:3342   .bss.page_rx.0:0000000000000000 page_rx.0
     /tmp/ccmcLKXV.s:3345   .bss.page_tx.1:0000000000000000 $d
     /tmp/ccmcLKXV.s:3349   .bss.page_tx.1:0000000000000000 page_tx.1
     /tmp/ccmcLKXV.s:3352   .bss.qspi_crc32_table:0000000000000000 $d
     /tmp/ccmcLKXV.s:3356   .bss.qspi_crc32_table:0000000000000000 qspi_crc32_table
     /tmp/ccmcLKXV.s:3362   .bss.qspi_crc32_table_ready:0000000000000000 qspi_crc32_table_ready
     /tmp/ccmcLKXV.s:3363   .bss.qspi_crc32_table_ready:0000000000000000 $d
     /tmp/ccmcLKXV.s:3365   .bss.qspi_first_word:0000000000000000 $d
     /tmp/ccmcLKXV.s:3369   .bss.qspi_first_word:0000000000000000 qspi_first_word
     /tmp/ccmcLKXV.s:3375   .bss.qspi_last_check_status:0000000000000000 qspi_last_check_status
     /tmp/ccmcLKXV.s:3376   .bss.qspi_last_check_status:0000000000000000 $d
     /tmp/ccmcLKXV.s:3381   .bss.qspi_memory_mapped_entered:0000000000000000 qspi_memory_mapped_entered
     /tmp/ccmcLKXV.s:3382   .bss.qspi_memory_mapped_entered:0000000000000000 $d
     /tmp/ccmcLKXV.s:3387   .bss.qspi_qe_set:0000000000000000 qspi_qe_set
     /tmp/ccmcLKXV.s:3388   .bss.qspi_qe_set:0000000000000000 $d

UNDEFINED SYMBOLS
memset
HAL_QSPI_Command
ARM GAS  /tmp/ccmcLKXV.s 			page 88


HAL_QSPI_AutoPolling
HAL_QSPI_Transmit
HAL_QSPI_Receive
HAL_QSPI_MemoryMapped
HAL_RCCEx_PeriphCLKConfig
HAL_GPIO_Init
HAL_MDMA_Init
HAL_MDMA_ConfigPostRequestMask
Error_Handler
HAL_GPIO_DeInit
HAL_MDMA_DeInit
HAL_QSPI_Init
